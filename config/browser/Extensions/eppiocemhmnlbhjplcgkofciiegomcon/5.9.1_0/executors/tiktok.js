(()=>{const W=!!document?.querySelector("script[adblock_use][bis_use]"),q=(()=>{const W=sessionStorage.getItem("bis_data");if(null!==W){return JSON.parse(W)}return null})(),k=q?.config?`${q.id}_t`:null,u=q?.config?.tiktokConfig?.TRAFFIC_LISTENER_CONFIG||{},{PARSERS:O=[]}=u;ParserProcessors={XMLHttpRequest:function(q){const k=fetch;fetch=async function(u){let O=u instanceof Request?u.url:u;if("object"==typeof O&&O.href&&(O=O.href),!(W=>{let q=W.replace(/.*\/([gimy]*)$/,"$1"),k=W.replace(new RegExp("^/(.*?)/"+q+"$"),"$1");return new RegExp(k,q)})(q.QUERY).test(O))return k.apply(this,arguments);try{const u=await k.apply(this,arguments);if(u.body instanceof ReadableStream){const k=u.clone(),O=await k.json(),s=O[q.CONTENT_QUERY],y=p(s,q.PATHS_CHECK_AD);if(y?.length&&(b(y,q),W)){O[q.CONTENT_QUERY]=s.filter((W=>!W.isAd));const W=JSON.stringify(O);return new Response(W,{status:u.status,statusText:u.statusText,headers:u.headers})}}return u}catch(W){return k.apply(this,arguments)}}}};const p=(W,q)=>{const k=[];for(let u of W)q.some((W=>W.reduce(((W,q)=>W&&"object"==typeof W?W[q]:W),u)))&&k.push(u);return k},b=(W,q)=>{if(W?.length)for(let O of W){const W=s(O,u.PROPERTIES_FOR_AD_DATA,q.PATHS_GET_PROPERTIES);W&&y(k,W)}},s=function(W,q,k){let u={};for(let O of q){const{NAME:q,PATH_NAME:p,IS_NECESSARY:b}=O,s=k[p];if(u[q]=s?.length?s.reduce(((W,q,k)=>{if(k===s.length-1&&"PATH_TO_PAGE_LINK"===p){return`https://www.tiktok.com/@${W[q]}`}return W&&"object"==typeof W?W?W[q]:null:W??null}),W):null,b&&!u[q])return null}return u},y=(W,q)=>{try{let k={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TIKTOK_VIDEO_CANDIDATES",from:W,to:W.substring(0,W.length-2),content:q};window.postMessage(k)}catch(W){}};for(let W of O)W.USE&&ParserProcessors[W.TYPE](W)})();