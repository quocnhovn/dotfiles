!function(i){let e=Object.create(null),t=i.localStorage.getItem("dfa_cache")||{};let n=null;function s(){return 0<Object.keys(e).length?e:t}function u(e,t){if("string"!=typeof e)return e;let n=[],r=s(),o=[],l=0;for(var c=e.length;l<=c;){var a=e[l];Object.prototype.hasOwnProperty.call(r,"__e")&&!0===r.__e?(o.push(n.map(t=>e[t]).join("")),r=s(),n=[],l++):(r=Object.prototype.hasOwnProperty.call(r,a)?(n.push(l),r[a]):(0<n.length&&(l-=n.length,n=[]),s()),l++)}var i=new RegExp(o.join("|"),"g");return 0<o.length?{text:e.replace(i,t),count:o.length}:{text:e,count:0}}function r(){i.localStorage.setItem("dfa_cache",e)}chrome.runtime.onMessage.addListener((t,e,r)=>{if("dfa"==t.type){const{key:c,texts:a}=t;let n=0;for(let t=0,e=a.length;t<e;t++){var{text:o,count:l}=u(a[t],"***");a[t]=o,n+=l}0<n&&i.listeners.notifyListeners(i.listeners.ADS_BLOCKED,{filterId:i.pageStats.NSFW_PROTOTYPE_NAME,filterType:"text",count:n},f(e.tab),n),r({key:c,texts:a})}});const f=t=>({tabId:t.id||999,tabUrl:t.url||"999"});i.dfa={replace:u,add:function(t){"string"==typeof(t=t.trim())&&t&&(function t(e,n){if(n.length<=0)return void(e.__e=!0);const r=n[0];Object.prototype.hasOwnProperty.call(e,r)||(e[r]={});t(e[r],n.substring(1))}(e,t),clearTimeout(n),n=setTimeout(r,1e3))},has:function(t){return"string"==typeof t&&function t(e,n){if(n.length<=0)return!0===e.__e;const r=n[0];return!!Object.prototype.hasOwnProperty.call(e,r)&&t(e[r],n.substring(1))}(s(),t)},clear:function(){e=Object.create(null)},get(){return e}}}(adguard);