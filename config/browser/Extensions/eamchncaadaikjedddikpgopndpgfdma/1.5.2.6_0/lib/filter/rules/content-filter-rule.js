!function(g,c){"use strict";var d='"';function p(e){var t,r;this.regexp=new RegExp((t=e,r=new RegExp("["+["\\","*","+","?","|","{","}","[","]","(",")","^","$",".","#"].join("\\")+"]","g"),t=t.replace(r,"\\$&"),t=g.utils.strings.replaceAll(t,"\\*","[\\s\\S]*"),"^"+(t=g.utils.strings.replaceAll(t,"\\?","."))+"$"),"i"),this.shortcut=function(e){var t=["*","?"],r=0,n=g.utils.strings.indexOfAny(e,t);if(n<0)return e.toLowerCase();var i=n===r?"":e.substring(r,n-r);for(;0<=n&&(r=r+n+1,!(e.length<=r));){var s=(n=g.utils.strings.indexOfAny(e.substring(r),t))<0?e.substring(r):e.substring(r,n+r);s.length>i.length&&(i=s)}return i.toLowerCase()}(e),this.matches=function(e){return!!e&&(!(e.toLowerCase().indexOf(this.shortcut)<0)&&this.regexp.test(e))}}function e(e,t){c.FilterRule.call(this,e,t),this.parentSearchLevel=3,this.maxLength=8192;var r=c.FilterRule.MASK_CONTENT_EXCEPTION_RULE;if(0<=(t=e.indexOf(r))?this.whiteListRule=!0:(r=c.FilterRule.MASK_CONTENT_RULE,t=e.indexOf(r)),t<0)throw"Invalid rule "+e;this.elementsFilter=e.substring(t+r.length);var n=e.indexOf("[");if(this.tagName=-1===n?e.substring(t+r.length):e.substring(t+r.length,n),0<t&&(t=e.substring(0,t),this.loadDomains(t)),!this.whiteListRule&&this.isGeneric())throw"Content rule must have at least one permitted domain";for(var i=[this.tagName];-1!==n;){var s=e.indexOf(c.FilterRule.EQUAL,n+1),l=e.indexOf(d,s+1),a=function(e,t){for(var r='"',n=t-2;'"'===r;){if(-1===(n=e.indexOf(d,n+2)))return-1;r=e.length===n+1?"0":e.charAt(n+1)}return n}(e,l+1);if(-1===l||-1===a)break;var h=e.indexOf("]",a+1),u=e.substring(n+1,s),o=e.substring(l+1,a),o=g.utils.strings.replaceAll(o,'""','"');switch(u){case"tag-content":this.tagContentFilter=o;break;case"wildcard":this.wildcard=new p(o);break;case"max-length":this.maxLength=parseInt(o);break;case"min-length":this.minLength=parseInt(o);break;case"parent-elements":this.parentElements=o.split(",");break;case"parent-search-level":this.parentSearchLevel=parseInt(o);break;default:i.push("["),i.push(u),i.push('*="'),i.push(o),i.push('"]')}if(-1===h)break;n=e.indexOf("[",h+1)}this.selector=i.join(""),window.document.querySelectorAll(this.selector)}(e.prototype=Object.create(c.FilterRule.prototype)).getMatchedElements=function(e){for(var t=e.querySelectorAll(this.selector),r=null,n=0;n<t.length;n++){var i,s=t[n],l=null;this.isFiltered(s)&&(this.parentElements?(i=this.searchForParentElement(s))&&(l=i):l=s,l&&(r=null===r?[]:r).push(s))}return r},e.prototype.isFiltered=function(e){e=e.innerHTML||"";return!(0<this.maxLength&&e.length>this.maxLength)&&(!(0<this.minLength&&e.length<this.minLength)&&(!this.tagContentFilter&&!this.wildcard||!!e&&(!(this.tagContentFilter&&e.indexOf(this.tagContentFilter)<0)&&!(this.wildcard&&!this.wildcard.matches(e)))))},e.prototype.searchForParentElement=function(e){if(!this.parentElements||0===this.parentElements.length)return null;for(var t=e.parentNode,r=0;r<this.parentSearchLevel;r++){if(!t)return null;if(0<this.parentElements.indexOf(t.tagName.toLowerCase()))return t;t=t.parentNode}return null},e.RULE_MARKER_FIRST_CHAR="$",e.RULE_MARKERS=[c.FilterRule.MASK_CONTENT_EXCEPTION_RULE,c.FilterRule.MASK_CONTENT_RULE],c.ContentFilterRule=e,c.Wildcard=p}(adguard,adguard.rules);