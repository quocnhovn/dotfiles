!function(o,e){function t(e){this.version=Object.create(null);var r,s=String(e||"").split(".");for(let e=3;0<=e;e--)this.version[e]=(r=s[e],isNaN(r)?0:Math.max(+r,0))}t.prototype.compare=function(r){for(let e=0;e<4;e++){if(this.version[e]>r.version[e])return 1;if(this.version[e]<r.version[e])return-1}return 0};e.browser={getClientId(){let e=o.localStorage.getItem("client-id");if(!e){const n=[];var r=Date.now()%1e8,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890";for(let e=0;e<8;e++){var t=s[Math.floor(Math.random()*s.length)];n.push(t)}e=n.join("")+r,o.localStorage.setItem("client-id",e)}return e},isGreaterVersion(e,r){const s=new t(e);r=new t(r);return 0<s.compare(r)},isGreaterOrEqualsVersion(e,r){const s=new t(e);r=new t(r);return 0<=s.compare(r)},getMajorVersionNumber(e){return new t(e).version[0]},getMinorVersionNumber(e){return new t(e).version[1]},getAppVersion(){return o.localStorage.getItem("app-version")},setAppVersion(e){o.localStorage.setItem("app-version",e)},isYaBrowser(){return"YaBrowser"===o.prefs.browser},isOperaBrowser(){return"Opera"===o.prefs.browser},isEdgeBrowser(){return"Edge"===o.prefs.browser},isEdgeChromiumBrowser(){return"EdgeChromium"===o.prefs.browser},isFirefoxBrowser(){return"Firefox"===o.prefs.browser},isChromeBrowser(){return"Chrome"===o.prefs.browser},isChromium(){return"chromium"===o.prefs.platform},isWindowsOs(){return 0<=navigator.userAgent.toLowerCase().indexOf("win")},isMacOs(){return 0<=navigator.platform.toUpperCase().indexOf("MAC")},findHeaderByName(r,s){if(r)for(let e=0;e<r.length;e++){const t=r[e];if(t.name.toLowerCase()===s.toLowerCase())return t}return null},getHeaderValueByName(e,r){r=this.findHeaderByName(e,r);return r?r.value:null},setHeaderValue(e,r,s){const t=this.findHeaderByName(e=e||[],r);return t?t.value=s:e.push({name:r,value:s}),e},removeHeader(r,s){let t=!1;if(r)for(let e=r.length-1;0<=e;e--){const n=r[e];n.name.toLowerCase()===s.toLowerCase()&&(r.splice(e,1),t=!0)}return t},getSafebrowsingBackUrl(e){const r=o.tabs.getTabMetadata(e.tabId,"previousUrl");if(r&&0===r.indexOf("http"))return r;const s=o.tabs.getTabMetadata(e.tabId,"referrerUrl");return s&&0===s.indexOf("http")?s:"about:newtab"},parseContentTypeFromUrlPath(e){let r=e.slice(-6);e=r.lastIndexOf(".");return-1===e?null:(r=r.slice(e)+".",-1!==".jar.swf.".indexOf(r)?o.RequestTypes.OBJECT:-1!==".mp4.flv.avi.m3u.webm.mpeg.3gp.3gpp.3g2.3gpp2.ogg.mov.qt.".indexOf(r)?o.RequestTypes.MEDIA:-1!==".ttf.otf.woff.woff2.eot.".indexOf(r)?o.RequestTypes.FONT:-1!==".ico.png.gif.jpg.jpeg.webp.".indexOf(r)?o.RequestTypes.IMAGE:null)},getNavigatorLanguages(e){let r=[];return o.utils.collections.isArray(navigator.languages)?r=navigator.languages.slice(0,e):navigator.language&&r.push(navigator.language),r},EDGE_CREATORS_UPDATE:15063,isEdgeBeforeCreatorsUpdate(){return this.isEdgeBrowser()&&o.prefs.edgeVersion.build<this.EDGE_CREATORS_UPDATE},getExtensionParams(){var e=encodeURIComponent(this.getClientId()),r=encodeURIComponent(o.app.getLocale()),s=encodeURIComponent(o.app.getVersion()),t=encodeURIComponent(o.app.getId());const n=[];return n.push("v="+s),n.push("cid="+e),n.push("lang="+r),n.push("id="+t),n},containsPermissions:(r,s)=>new Promise(e=>{browser.permissions.contains({permissions:r,origins:s},e)}),requestPermissions:(r,s)=>new Promise(e=>{browser.permissions.request({permissions:r,origins:s},e)}),removePermission:(r,s)=>new Promise(e=>{browser.permissions.remove({permissions:r,origins:s},e)})}}(adguard,adguard.utils);