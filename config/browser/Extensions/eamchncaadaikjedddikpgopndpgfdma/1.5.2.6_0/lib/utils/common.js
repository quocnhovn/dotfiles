adguard.RequestTypes={DOCUMENT:"DOCUMENT",SUBDOCUMENT:"SUBDOCUMENT",SCRIPT:"SCRIPT",STYLESHEET:"STYLESHEET",OBJECT:"OBJECT",IMAGE:"IMAGE",XMLHTTPREQUEST:"XMLHTTPREQUEST",MEDIA:"MEDIA",FONT:"FONT",WEBSOCKET:"WEBSOCKET",WEBRTC:"WEBRTC",OTHER:"OTHER",CSP:"CSP",COOKIE:"COOKIE",PING:"PING"},adguard.BACKGROUND_TAB_ID=-1,adguard.MAIN_FRAME_ID=0,adguard.utils={strings:null,dates:null,collections:null,concurrent:null,channels:null,browser:null,filters:null,workaround:null,i18n:null,StopWatch:null,Promise:null},function(e){String.prototype.endsWith||(String.prototype.endsWith=function(e){var t=this.lastIndexOf(e);return-1!==t&&t===this.length-e.length}),e.strings={isEmpty(e){return!e||0===e.trim().length},startWith(e,t){return e&&0===e.indexOf(t)},endsWith(e,t){return e.endsWith(t)},substringAfter(e,t){if(!e)return e;var n=e.indexOf(t);return n<0?"":e.substring(n+t.length)},substringBefore(e,t){if(!e||!t)return e;t=e.indexOf(t);return t<0?e:e.substring(0,t)},contains(e,t){return e&&0<=e.indexOf(t)},containsIgnoreCase(e,t){return e&&t&&0<=e.toUpperCase().indexOf(t.toUpperCase())},replaceAll(e,t,n){return e&&e.split(t).join(n)},join(t,e,n,r){if(!t)return null;if((r=r||t.length)<=(n=n||0))return"";const u=[];for(let e=n;e<r;e++)u.push(t[e]);return u.join(e)},getBeforeRegExp(e,t){t=e.search(t);return e.substring(0,t)},indexOfAny(t,n,r){if(r=r||0,"string"==typeof t&&t.length<=r)return-1;for(let e=r;e<t.length;e++){var u=t.charAt(e);if(-1<n.indexOf(u))return e}return-1},splitByDelimiterWithEscapeCharacter(t,n,r,u){const i=[];if(adguard.utils.strings.isEmpty(t))return i;let l=[];for(let e=0;e<t.length;e++){var s,o=t.charAt(e);o===n?0===e||(t.charAt(e-1)===r?(l.splice(l.length-1,1),l.push(o)):(u||0<l.length)&&(s=l.join(""),i.push(s),l=[])):l.push(o)}return(u||0<l.length)&&i.push(l.join("")),i},patternFromString(e){e=this.splitByDelimiterWithEscapeCharacter(e,"/","\\",!0);let t=e[1]||"";return t.indexOf("g")<0&&(t+="g"),new RegExp(e[0],t)},elementToString(e){const t=[];t.push("<"),t.push(e.localName);var n=e["attributes"];for(let e=0;e<n.length;e++){const u=n[e];t.push(" "),t.push(u.name),t.push('="');var r=null===u.value?"":u.value.replace(/"/g,'\\"');t.push(r),t.push('"')}return t.push(">"),t.join("")},startsAtIndexWith(t,n,r){if(t.length-n<r.length)return!1;for(let e=0;e<r.length;e+=1)if(t.charAt(n+e)!==r.charAt(e))return!1;return!0},hasUnquotedSubstring(t,n){const r=['"',"'","/"],u=[];for(let e=0;e<t.length;e+=1){var i,l=t[e];if(0===u.length&&this.startsAtIndexWith(t,e,n))return!0;0<=r.indexOf(l)&&(0===e||"\\"!==t[e-1])&&((i=u.pop())?i!==l&&(u.push(i),u.push(l)):u.push(l))}return!1}}}(adguard.utils),adguard.utils.dates={isSameHour(e,t){return this.isSameDay(e,t)&&e.getHours()===t.getHours()},isSameDay(e,t){return this.isSameMonth(e,t)&&e.getDate()===t.getDate()},isSameMonth(e,t){return!(!e||!t)&&(e.getYear()===t.getYear()&&e.getMonth()===t.getMonth())},getDifferenceInHours(e,t){return(e.getTime()-t.getTime())/1e3/60/60},getDifferenceInDays(e,t){return this.getDifferenceInHours(e,t)/24},getDifferenceInMonths(e,t){return this.getDifferenceInDays(e,t)/30}},function(e){var t={remove(e,t){t&&e&&(0<=(t=e.indexOf(t))&&e.splice(t,1))},removeAll(t,n){if(n&&t)for(let e=t.length-1;0<=e;e--)t[e]==n&&t.splice(e,1)},removeRule(t,n){if(n&&t)for(let e=t.length-1;0<=e;e--)n.ruleText===t[e].ruleText&&t.splice(e,1)},removeDuplicates(n){return n&&1!=n.length?n.filter((e,t)=>n.indexOf(e)==t):n},getRulesText(t){const n=[];if(!t)return n;for(let e=0;e<t.length;e++)n.push(t[e].ruleText);return n},find(t,n,r){if("function"==typeof t.find)return t.find(e=>e[n]===r);for(let e=0;e<t.length;e++){var u=t[e];if(u[n]===r)return u}return null},isArray:Array.isArray||function(e){return""+e=="[object Array]"},getArraySubtraction(e,t){return e.filter(e=>t.indexOf(e)<0)}};e.collections=t}(adguard.utils),adguard.utils.concurrent={runAsync(e,t){const n=Array.prototype.slice.call(arguments,2);setTimeout(()=>{e.apply(t,n)},0)},retryUntil(e,t,n){let r=0;const u=(n="object"!=typeof n?{}:n).next||200,i=n.until||2e3;function l(){!0===e()||r>=i?t():(r+=u,setTimeout(l,u))}setTimeout(l,1)},debounce(n,r){let u;return function(){const e=this,t=arguments;clearTimeout(u),u=setTimeout(function(){u=null,n.apply(e,t)},r)}},throttle(e,t){let n,r,u,i,l=0;function s(){i=0,l=+new Date,u=e.apply(n,r),n=null,r=null}return function(){n=this,r=arguments;var e=new Date-l;return i||(t<=e?s():i=setTimeout(s,t-e)),u}}},function(e){const t={USER_FILTER_ID:0,RUSSIAN_FILTER_ID:1,ENGLISH_FILTER_ID:2,TRACKING_FILTER_ID:3,SOCIAL_FILTER_ID:4,SEARCH_AND_SELF_PROMO_FILTER_ID:10,URL_TRACKING_FILTER_ID:17,WHITE_LIST_FILTER_ID:100,EASY_PRIVACY:118,FANBOY_ANNOYANCES:122,FANBOY_SOCIAL:123,FANBOY_ENHANCED:215,MOBILE_ADS_FILTER_ID:11},n={isUserFilterRule(e){return e.filterId==t.USER_FILTER_ID},isWhiteListFilterRule(e){return e.filterId==t.WHITE_LIST_FILTER_ID}};n.ids=t;for(const r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);e.filters=n}(adguard.utils),function(e){function t(e){this.name=e}t.prototype={start(){this.startTime=Date.now()},stop(){this.stopTime=Date.now()},print(){this.stopTime,this.startTime}},e.StopWatch=t}(adguard.utils),function(e){var t=function(){"use strict";function e(){let n=null,r=null;return{addListener:function(e){if("function"!=typeof e)throw new Error("Illegal callback");null===n?r=null!==r?(n=[],n.push(r),n.push(e),null):e:n.push(e)},removeListener:function(e){null!==r?r=null:0<=(e=n.indexOf(e))&&n.splice(e,1)},notify:function(){if(null!==r)return r.apply(r,arguments);if(null!==n)for(let e=0;e<n.length;e++){const t=n[e];t.apply(t,arguments)}},notifyInReverseOrder:function(){if(null!==r)return r.apply(r,arguments);if(null!==n)for(let e=n.length-1;0<=e;e--){const t=n[e];t.apply(t,arguments)}}}}function n(){return new e}const r=Object.create(null);return{newChannel:n,newNamedChannel:function(e){var t=n();return r[e]=t},getNamedChannel:function(e){return r[e]}}}();e.channels=t}(adguard.utils),function(e,r){"use strict";const u=r.Deferred;function t(){const t=u();let n;return n="function"==typeof t.promise?t.promise():t.promise,{promise:n,resolve:function(e){t.resolve(e)},reject:function(e){t.reject(e)},then:function(e,t){n.then(e,t)}}}t.all=function(t){const n=[];for(let e=0;e<t.length;e++)n.push(t[e].promise);return e=n,r.Deferred.when.apply(r.Deferred,e);var e},e.Promise=t}(adguard.utils,window),adguard.utils.workaround={getBlockedCountText(e){let t=999<+e?"âˆž":"0"==e?"":e;return t}},function(r){function u(e,t){return 0<=e.indexOf(t)}function i(e,t){return t in e}r.i18n={normalize(e,t){if(!t)return null;t=t.replace("-","_");let n;if(n=r.collections.isArray(e)?u:i,n(e,t))return t;t=t.split("_")[0];return n(e,t)?t:null}}}(adguard.utils),adguard.unload=function(){"use strict";const t=adguard.utils.channels.newChannel();return{when:function(e){"function"==typeof e&&t.addListener(()=>{try{e()}catch(e){}})},fireUnload:function(e){t.notifyInReverseOrder(e)}}}(),adguard.utils.RingBuffer=function(l){if("undefined"==typeof Map)throw new Error("Unable to create RingBuffer");let s=new Map,o=0;const a=new Array(l);let e=a.length;for(;e--;)a[e]={processedKey:null};return{put:function(e,t){var n,r=o;o=(r+1)%l;let u=a[r],i;null!==u.processedKey&&(i=s.get(u.processedKey),1===i.length?s.delete(u.processedKey):0<=(n=i.indexOf(r))&&i.splice(n,1),a[r]=u=null),i=s.get(e),void 0===i?s.set(e,[r]):i.unshift(r),(a[r]=t).processedKey=e},pop:function(e){const t=s.get(e);if(void 0===t)return null;var n=t.shift();0===t.length&&s.delete(e);const r=a[n];return r.processedKey=null,r},clear:function(){s=new Map,o=0;let e=a.length;for(;e--;)a[e]={processedKey:null}}}};