adguard.localStorageImpl=adguard.localStorageImpl||function(){function e(){throw new Error("Not implemented")}return{getItem:e,setItem:e,removeItem:e,hasItem:e}}(),adguard.localStorage=function(t,n){return{getItem:function(e){return n.getItem(e)},setItem:function(r,e){try{n.setItem(r,e)}catch(e){t.console.error(`Error while saving item ${r} to the localStorage: `+e)}},removeItem:function(e){n.removeItem(e)},hasItem:function(e){return n.hasItem(e)},init:function(e){"function"==typeof n.init?n.init(e):e()},isInitialized:function(){return"function"!=typeof n.isInitialized||n.isInitialized()}}}(adguard,adguard.localStorageImpl),adguard.rulesStorageImpl=adguard.rulesStorageImpl||function(){function e(){throw new Error("Not implemented")}return{read:e,write:e}}(),adguard.rulesStorage=function(o,i){function a(e){return`filterrules_${e}.txt`}return{read:function(e,t){const n=a(e);i.read(n,(e,r)=>{e&&o.console.error(`Error while reading rules from file ${n} cause: `+e),t(r)})},write:function(e,r,t){const n=a(e);i.write(n,r,e=>{e&&o.console.error(`Error writing filters to file ${n}. Cause: `+e),t()})},remove:(e,r)=>{const t=a(e);i.remove(t,e=>{e&&o.console.error(`Error removing filter ${t}. Cause: `+e),r()})},init:function(r){"function"==typeof i.init?i.init(e=>{i=e,r()}):r()}}}(adguard,adguard.rulesStorageImpl);