!function(){var i={img:"IMAGE",input:"IMAGE",audio:"MEDIA",video:"MEDIA",object:"OBJECT",frame:"SUBDOCUMENT",iframe:"SUBDOCUMENT",embed:"OBJECT"},r=Object.create(null),o=1,c=function(){return"undefined"==typeof contentPage&&(contentPage={sendMessage:adguardContent.runtimeImpl.sendMessage,onMessage:adguardContent.runtimeImpl.onMessage}),contentPage};c().onMessage.addListener(function(e,t,n){"injectScripts"===e.type&&(n({applied:!0}),s()&&g(e.scripts))});function e(){var e;s()&&(t()&&(initPageMessageListener(),e="wrapper-script-"+Math.random().toString().substr(2),e=`(${injectPageScriptAPI.toString()})('${e}', true);`,n([e])),(e=navigator.userAgent.toLowerCase()).indexOf("firefox"),-1<e.indexOf("opera")||e.indexOf("opr"),document.addEventListener("error",v,!0),document.addEventListener("load",v,!0),d())}var s=function(){return document instanceof HTMLDocument||document instanceof XMLDocument&&document.createElement("div")instanceof HTMLDivElement},t=function(){var e=window.location.protocol;return 0===e.indexOf("http")||0===e.indexOf("about:")},n=function(e){e&&0!==e.length&&(e.unshift("( function () { try {"),e.push("} catch (ex) { console.error('Error executing AG js: ' + ex); } })();"),a(e.join("\r\n")))};function a(e){const t=document.createElement("script");t.setAttribute("type","text/javascript"),t.textContent=e;const n=document.head||document.documentElement;n.appendChild(t),t.parentNode&&t.parentNode.removeChild(t)}function d(){var e={type:"getSelectorsAndScripts",documentUrl:window.location.href};c().sendMessage(e,u)}const u=e=>{e&&!1!==e.requestFilterReady?(e.collectRulesHits&&CssHitsCounter.init(e=>{c().sendMessage({type:"saveCssHitStats",stats:e})}),e.collapseAllElements?(l(e.selectors),g(e.scripts),function(){if(document.readyState==="complete"||document.readyState==="loaded"||document.readyState==="interactive")M();else document.addEventListener("DOMContentLoaded",M)}()):(l(e.selectors),g(e.scripts))):setTimeout(d,100)};function l(e){e&&(f(e.css),p(e.extendedCss))}function m(e){if(e)for(var t=e.requests,n=0;n<t.length;n++){var r=t[n];E(r)}}var f=function(e){if(e&&0!==e.length)for(var t,n=0;n<e.length;n++){var r=document.createElement("style");r.setAttribute("type","text/css"),t=e[n],r.textContent=t,(document.head||document.documentElement).appendChild(r),function(s){var e=window.MutationObserver||window.WebKitMutationObserver,t;e&&new e(function(e){for(var t=0;t<e.length;t++){var n=e[t];if(s.hasAttribute("mod")&&"inner"===s.getAttribute("mod")){s.removeAttribute("mod");break}s.setAttribute("mod","inner");var r=!1;if(0<n.removedNodes.length)for(var o=0;o<n.removedNodes.length;o++)r=!0,s.appendChild(n.removedNodes[o]);else n.oldValue&&(r=!0,s.textContent=n.oldValue);r||s.removeAttribute("mod")}}).observe(s,{childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0})}(r)}},p=function(e){e&&e.length&&(window.extcss=new ExtendedCss({styleSheet:e.join("\n"),beforeStyleApplied:CssHitsCounter.countAffectedByExtendedCss}),extcss.apply())},g=function(e){e&&0!==e.length&&a(e)},v=function(e){var t=e.target,n=e.type,e=t.tagName.toLowerCase();n===("iframe"===e||"frame"===e||"embed"===e?"load":"error")&&(!(e=i[(n=t).localName])||(t=h(n))&&(ElementCollapser.isCollapsed(n)||(n=C(n),n={type:"processShouldCollapse",elementUrl:t,documentUrl:document.URL,requestType:e,requestId:n},c().sendMessage(n,E))))},h=function(e){var t=e.src||e.data;if(!t||0!==t.indexOf("http")||t===e.baseURI)return null;return t=16384<t.length?t.slice(0,16384):t},C=function(e){var t=e.tagName.toLowerCase(),n=o++;return r[n]={element:e,src:e.src,tagName:t},n},E=function(e){var t,n;!e||(n=r[e.requestId])&&(delete r[e.requestId],t=n.element,!0===e.collapse&&(n=n.src,ElementCollapser.collapseElement(t,n)))},M=function(){var e,t=[];for(e in i)for(var n=i[e],r=document.getElementsByTagName(e),o=0;o<r.length;o++){var s=r[o],a=h(s);a&&(s=C(s),t.push({elementUrl:a,requestType:n,requestId:s,tagName:e}))}var d={type:"processShouldCollapseMany",requests:t,documentUrl:document.URL};c().sendMessage(d,m)};e()}();