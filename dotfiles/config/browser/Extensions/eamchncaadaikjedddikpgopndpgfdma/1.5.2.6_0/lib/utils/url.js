!function(i,e){const n=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|0x[0-9a-f][0-9a-f]?|0[0-7]{3})\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|0x[0-9a-f][0-9a-f]?|0[0-7]{3})$/i,r=/^0x([0-9a-f]{8})$/i,s=/^[0-9]+$/,l=/(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,u=/([^0-9a-f:])/i,a=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]$)/i,f=i.publicSuffixes;function o(t){var e=function(t){let e=t,n=e.indexOf(".");for(;0<=n;){if(e in f)return e;e=e.slice(n+1,e.length),n=e.indexOf(".")}return e in f?e:""}(t);return e?t.slice(0,t.indexOf("."+e))+".*":""}i.url={isHttpRequest(t){return t&&0===t.indexOf("http")},isHttpOrWsRequest(t){return t&&(0===t.indexOf("http")||0===t.indexOf("ws"))},toPunyCode(t){return t?/^[\x00-\x7F]+$/.test(t)?t:e.punycode.toASCII(t):""},isThirdPartyRequest(t,e){return this._get2NdLevelDomainName(t)!=this._get2NdLevelDomainName(e)},getHost(t){if(!t)return null;let e=t.indexOf("//");if(-1===e){if(e=t.indexOf(":"),-1===e)return null;--e}var n=t.indexOf("/",e+2),r=t.indexOf("?",e+2);let i=n;0<r&&(r<n||n<0)&&(i=r);let s=-1===i?t.substring(e+2):t.substring(e+2,i);t=s.indexOf(":");return s=-1===t?s:s.substring(0,t),"."===s.charAt(s.length-1)&&(s=s.slice(0,-1)),s},getDomainName(t){t=this.getHost(t);return this.getCroppedDomainName(t)},getCroppedDomainName(t){return i.strings.startWith(t,"www.")?t.substring(4):t},isIpv4(t){return!!n.test(t)||(!!r.test(t)||!!s.test(t))},isIpv6(t){let e=0;const n=t.match(l);if(n){const s=n[0].split(".");for(let t=0;t<4;t++)if(/^0[0-9]+/.test(s[t]))return!1;if(t=t.replace(l,""),/[0-9]$/.test(t))return!1;t+=s.join(":"),e=2}if(u.test(t))return!1;if(a.test(t))return!1;function r(t,e){return(t.length-t.replace(new RegExp(e,"g"),"").length)/e.length}var i=r(t,"::");return 1==i&&r(t,":")<=8+e||0==i&&r(t,":")==7+e},urlEquals(t,e){return!(!t||!e)&&(t=t.split(/[#?]/)[0])==(e=e.split(/[#?]/)[0])},isDomainOrSubDomainOfAny(e,n){if(!n||0===n.length)return!1;for(let t=0;t<n.length;t+=1)if(this.isDomainOrSubDomain(e,n[t]))return!0;return!1},isDomainOrSubDomain:function(t,e){return i.strings.endsWith(e,".*")?(n=e,!!(r=o(r=t))&&(r===n||i.strings.endsWith(r,n)&&i.strings.endsWith(r,"."+n))):e==t||i.strings.endsWith(t,e)&&i.strings.endsWith(t,"."+e);var n,r},_get2NdLevelDomainName(t){const e=this.getHost(t);if(!e)return null;var n=e.split(".");if(n.length<=2)return e;var r=n[n.length-2]+"."+n[n.length-1],i=r in f,t=n[n.length-3]+"."+r;return 3==n.length&&i?t:t in f?3==n.length?t:n[n.length-4]+"."+t:i?t:r},cleanUrlParamByRegExp(t,n,e=!1){var r=t.indexOf("?");if(-1===r)return t;const i=[t.slice(0,r),t.slice(r+1)];for(i[1]=(e?i[1].split("&").filter(t=>t).filter(t=>t&&t.match(n)):i[1].split("&").filter(t=>t).filter(t=>{const e=t.includes("=")?t:t+"=";return!e.match(n)})).join("&"),i[1]=i[1].split("&").filter(t=>t&&!t.startsWith("=")).join("&");"&"===i[1].charAt(0);)i[1]=i[1].substr(1);return i[1]?i.join("?"):i[0]},cleanUrlParam(t,e,n=!1){e=new RegExp(`((^|&)(${e.join("|")})=[^&#]*)`,"g");return this.cleanUrlParamByRegExp(t,e,n)}}}(adguard.utils,window);