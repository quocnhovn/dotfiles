adguard.localStorageImpl=function(){var n="adguard-settings",o=null;function a(r){r&&adguard.console.error("{0}",r)}function l(t){var r=new adguard.utils.Promise;return r.then(function(r){t(null,r)},function(r){t(r)}),r}function e(r,t,e){var n=l(e);try{var o={};o[r]=t,browser.storage.local.set(o,function(){browser.runtime.lastError?n.reject(browser.runtime.lastError):n.resolve()})}catch(r){n.reject(r)}}function t(r){var t;r in localStorage&&(t=localStorage.getItem(r),localStorage.removeItem(r),c(r,t))}function u(){return null!==o}var c=function(r,t){u()&&(o[r]=t,e(n,o,a))};return{getItem:function(r){return u()?(r in o||t(r),o[r]):null},setItem:c,removeItem:function(r){u()&&(delete o[r],localStorage.removeItem(r),e(n,o,a))},hasItem:function(r){return!!u()&&(r in o||(t(r),r in o))},init:function(e){u()?e():function(t,r){var e=l(r);try{browser.storage.local.get(t,function(r){browser.runtime.lastError?e.reject(browser.runtime.lastError):e.resolve(r?r[t]:null)})}catch(r){e.reject(r)}}(n,function(r,t){r&&a(r),o=t||Object.create(null),e()})},isInitialized:u}}();