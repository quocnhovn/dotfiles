const PageController=e=>{const{userSettings:r,enabledFilters:c,constants:{AntiBannerFiltersId:s}}=e;let i,o,l,g,E,I;const _=e=>{e=e.currentTarget;contentPage.sendMessage({type:"changeUserSetting",key:r.names.DISABLE_SAFEBROWSING,value:!e.checked})},u=e=>{e.currentTarget.checked?contentPage.sendMessage({type:"addAndEnableFilter",filterId:s.TRACKING_FILTER_ID}):contentPage.sendMessage({type:"disableAntiBannerFilter",filterId:s.TRACKING_FILTER_ID,remove:!0})},A=e=>{e.currentTarget.checked?contentPage.sendMessage({type:"addAndEnableFilter",filterId:s.SOCIAL_FILTER_ID}):contentPage.sendMessage({type:"disableAntiBannerFilter",filterId:s.SOCIAL_FILTER_ID,remove:!0})},S=e=>{e=e.currentTarget;contentPage.sendMessage({type:"changeUserSetting",key:r.names.DISABLE_COLLECT_HITS,value:!e.checked})},T=e=>{e.currentTarget.checked?contentPage.sendMessage({type:"addAndEnableFilter",filterId:s.SEARCH_AND_SELF_PROMO_FILTER_ID}):contentPage.sendMessage({type:"disableAntiBannerFilter",filterId:s.SEARCH_AND_SELF_PROMO_FILTER_ID,remove:!0})},L=e=>{e.currentTarget.checked?contentPage.sendMessage({type:"addAndEnableFilter",filterId:s.SEARCH_AND_SELF_PROMO_FILTER_ID}):contentPage.sendMessage({type:"disableAntiBannerFilter",filterId:s.SEARCH_AND_SELF_PROMO_FILTER_ID,remove:!0})},R=(e,t)=>{e&&(t?e.setAttribute("checked","checked"):e.removeAttribute("checked"))},m=(e,t)=>{R(i,e),R(g,t)};return{init:()=>{var e,t,n,a,d;(()=>{i=document.getElementById("safebrowsingEnabledCheckbox"),o=document.getElementById("trackingFilterEnabledCheckbox"),l=document.getElementById("socialFilterEnabledCheckbox"),g=document.getElementById("sendSafebrowsingStatsCheckbox"),E=document.getElementById("allowAcceptableAds"),I=document.getElementById("allowProtectBadContentCheckbox"),i.addEventListener("change",_),o.addEventListener("change",u),l.addEventListener("change",A),navigator.userAgent.includes("Firefox")||g.addEventListener("change",S),E.addEventListener("change",T),I.addEventListener("change",L);const e=[].slice.call(document.querySelectorAll(".openExtensionStore"));e.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),contentPage.sendMessage({type:"openExtensionStore"})})});const t=[].slice.call(document.querySelectorAll(".openSettings"));t.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),contentPage.sendMessage({type:"openSettingsTab"})})})})(),e=!r.values[r.names.DISABLE_SAFEBROWSING],t=!r.values[r.names.DISABLE_COLLECT_HITS],n=s.TRACKING_FILTER_ID in c,a=s.SOCIAL_FILTER_ID in c,d=s.SEARCH_AND_SELF_PROMO_FILTER_ID in c,m(e,t),R(o,n),R(l,a),R(E,d)}}};let timeoutId,counter=0;const MAX_WAIT_RETRY=10,RETRY_TIMEOUT_MS=100,waitContentPage=()=>{if("undefined"==typeof contentPage)return counter>MAX_WAIT_RETRY?void clearTimeout(timeoutId):(timeoutId=setTimeout(waitContentPage,RETRY_TIMEOUT_MS),void(counter+=1));clearTimeout(timeoutId),contentPage.sendMessage({type:"initializeFrameScript"},e=>{const t=PageController(e);"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{t.init()}):t.init()})};waitContentPage();