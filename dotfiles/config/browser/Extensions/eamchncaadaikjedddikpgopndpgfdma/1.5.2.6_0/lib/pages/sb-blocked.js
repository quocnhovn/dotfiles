const api=window.browser||chrome;let adguard;const getAdguard=()=>new Promise(t=>{api.runtime.getBackgroundPage(e=>{t(e.adguard)})});function hideNodes(e){e.forEach(e=>{e.style.display="none"})}function onAdvancedClicked(e,t,a){t.style.display="block",a.style.display="block",e.style.display="none"}function isValid(e){return e&&e.indexOf("<")<0}const replaceHostTemplates=(e,a)=>{e.forEach(e=>{const t=e.textContent||e.innerText;e.innerHTML=t.replace("(var.Host)",a)})};document.addEventListener("DOMContentLoaded",async()=>{adguard=await getAdguard();const t=document.getElementById("advancedButton"),a=document.getElementById("moreInfoButton"),n=document.getElementById("btnProceed"),e=new URLSearchParams(document.location.search);var d=e.get("host");const o=e.get("url");var r=e.get("malware"),c=r&&"true"===r||!0,r=[].slice.call(document.querySelectorAll(".malware"));const s=[].slice.call(document.querySelectorAll(".phishing"));hideNodes(c?s:r),replaceHostTemplates(s.concat(r),d),d&&isValid(d)&&a.setAttribute("href",`https://adguard.com/site.html?domain=${d}&utm_source=extension&aid=16593`),o&&isValid(o)&&n.addEventListener("click",e=>{e.preventDefault(),adguard.safebrowsing.addToSafebrowsingTrusted(o),adguard.tabs.getActive(e=>{adguard.tabs.reload(e.tabId,o)})}),t.addEventListener("click",e=>{e.preventDefault(),onAdvancedClicked(t,a,n)})});