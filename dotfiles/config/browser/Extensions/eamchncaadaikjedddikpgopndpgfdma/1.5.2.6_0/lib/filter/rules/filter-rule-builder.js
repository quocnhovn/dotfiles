!function(i,R){"use strict";function s(r,l,e){if(!(r=r?r.trim():null))return null;try{const t=i.utils.strings;return t.startWith(r,R.FilterRule.COMMENT)?null:c(r)||!u(r)||!e&&n(r)?null:t.startWith(r,R.FilterRule.MASK_WHITE_LIST)?new R.UrlFilterRule(r,l):R.FilterRule.findRuleMarker(r,R.ContentFilterRule.RULE_MARKERS,R.ContentFilterRule.RULE_MARKER_FIRST_CHAR)?i.prefs.features&&i.prefs.features.responseContentFilteringSupported?new R.ContentFilterRule(r,l):null:new(R.FilterRule.findRuleMarker(r,R.CssFilterRule.RULE_MARKERS,R.CssFilterRule.RULE_MARKER_FIRST_CHAR)?R.CssFilterRule:R.FilterRule.findRuleMarker(r,R.ScriptFilterRule.RULE_MARKERS,R.ScriptFilterRule.RULE_MARKER_FIRST_CHAR)?R.ScriptletRule.isAdguardScriptletRule(r)?R.ScriptletRule:R.ScriptFilterRule:R.UrlFilterRule)(r,l)}catch(e){i.console.debug("Cannot create rule from filter {0}: {1}, cause {2}",l||0,r,e)}return null}const u=function(e){return!e.includes("##^")},n=function(e){if(e.includes(R.FilterRule.MASK_SCRIPT_RULE))return!0;var r=e.indexOf(R.UrlFilterRule.OPTIONS_DELIMITER);if(0<=r&&r<e.indexOf(R.UrlFilterRule.REPLACE_OPTION+"="))return!0;return!1},c=function(e){return e.length<4};R.builder={createRule:(r,l,t=!0)=>{let e;try{e=R.ruleConverter.convertRule(r)}catch(e){i.console.debug("Cannot convert rule from filter {0}: {1}, cause {2}",l||0,r,e)}if(!e)return null;if(Array.isArray(e)){var u=e.map(e=>s(e,l,t)).filter(e=>null!==e);return 0===u.length?null:new R.CompositeRule(r,u)}const n=s(e,l,t);return n&&e!==r&&(n.ruleText=r,n.convertedRuleText=e),n}}}(adguard,adguard.rules);