!function(n,e){"use strict";function l(e){if(this.lookupTable=Object.create(null),e)for(var l=0;l<e.length;l++)this.addRule(e[l])}l.prototype={addRule:function(e){if(!e.hasPermittedDomains())return!1;for(var l=e.getPermittedDomains(),t=0;t<l.length;t++){var o=l[t],u=this.lookupTable[o];u||(this.lookupTable[o]=u=[]),u.push(e)}return!0},removeRule:function(e){if(e.hasPermittedDomains())for(var l=e.getPermittedDomains(),t=0;t<l.length;t++){var o=l[t],u=this.lookupTable[o];u&&(n.utils.collections.removeRule(u,e),0===u.length&&delete this.lookupTable[o])}},clearRules:function(){this.lookupTable=Object.create(null)},lookupRules:function(e){if(!e)return null;var l=e.split(".");if(0===l.length)return null;let t=null,o=l[l.length-1];for(let e=l.length-2;0<=e;e--){o=l[e]+"."+o;var u=this.lookupTable[o];u&&0<u.length&&(null===t&&(t=[]),t=t.concat(u))}return t},getRules:function(){var e,l=[];for(e in this.lookupTable){var t=this.lookupTable[e];t&&(n.utils.collections.isArray(t)?l=l.concat(t):l.push(t))}return n.utils.collections.removeDuplicates(l)}},e.DomainsLookupTable=l}(adguard,adguard.rules);