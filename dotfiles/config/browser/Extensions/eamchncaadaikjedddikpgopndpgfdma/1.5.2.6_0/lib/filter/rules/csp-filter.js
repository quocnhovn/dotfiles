!function(h,r){"use strict";function a(e){return e?e.whiteListRule&&e.isImportant?4:e.isImportant?3:e.whiteListRule?2:1:0}function d(e,t,u){var r=e.cspDirective,n=u[r],i=a(e),l=a(t),s=a(n),c=Math.max(i,l,s);c===i?u[r]=e:c===l?u[r]=t:c===s&&(u[r]=n)}r.CspFilter=function(e,R){var f=new r.UrlFilterRuleLookupTable,p=new r.UrlFilterRuleLookupTable;function t(e){for(var t=0;t<e.length;t++)u(e[t])}function u(e){(e.whiteListRule?f:p).addRule(e)}return e&&t(e),{addRules:t,addRule:u,removeRule:function(e){(e.whiteListRule?f:p).removeRule(e)},getRules:function(){return f.getRules().concat(p.getRules())},findCspRules:function(e,t,u,r){r!==h.RequestTypes.DOCUMENT&&r!==h.RequestTypes.SUBDOCUMENT&&(r=h.RequestTypes.OTHER);var n,i=f.findRules(e,t,u,r,R),l=Object.create(null);if(i)for(n=0;n<i.length;n++){if(!(s=i[n]).cspDirective)return[s];d(s,null,l)}var s,c=p.findRules(e,t,u,r,R),a=Object.create(null);if(c)for(n=0;n<c.length;n++)d(s=c[n],l[s.cspDirective],a);var o=[];return Object.keys(a).forEach(function(e){o.push(a[e])}),o}}},r.CspFilter.DEFAULT_DIRECTIVE="connect-src http: https:; frame-src http: https:; child-src http: https:"}(adguard,adguard.rules);