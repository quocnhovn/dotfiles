!function(t,l){const m=t.utils.strings,a="${domains}#%#//scriptlet(${args})",c="${domains}#@%#//scriptlet(${args})",u=/#@?#script:inject|#@?#\s*\+js/,n="##+js",i="##script:inject",s="#@#+js",p="#@#script:inject",f="##^script",o='[max-length="262144"]',d="#$#",g="#@$#",S=/#@?\$#.+?\s*\{.*\}\s*$/g;function E(t){return"'"===t[0]&&"'"===t[t.length-1]?t=(t=t.substring(1,t.length-1)).replace(/\"/g,'\\"'):'"'===t[0]&&'"'===t[t.length-1]&&(t=(t=t.substring(1,t.length-1)).replace(/\'/g,"\\'")),`"${t}"`}function h(t,n){return Object.keys(n).reduce((t,e)=>{var r=new RegExp(`\\$\\{${e}\\}`,"g");return t=t.replace(r,n[e])},t)}function _(t){var e=-1<t.indexOf(d)?d:g;const r=e===d?a:c,n=m.substringBefore(t,e),i=m.substringAfter(t,e);return i.split(/;(?=(?:(?:[^"]*"){2})*[^"]*$)/g).map(t=>function(t){return t.match(/'.*?'|".*?"|\S+/g)}(t).filter(t=>t).map((t,e)=>0===e?"abp-"+t:t).map(t=>E(t)).join(", ")).map(t=>h(r,{domains:n,args:t}))}l.ruleConverter={convertRule:function(t){if(e=t,m.startWith(e,l.FilterRule.COMMENT))return t;if((-1<(r=t).indexOf(n)||-1<r.indexOf(i)||-1<r.indexOf(s)||-1<r.indexOf(p))&&u.test(r))return function(t){var e=m.getBeforeRegExp(t,u);const r=t.match(u)[0];let n;n=-1<r.indexOf("@")?c:a;var i,s,t=(s=(i=t).indexOf("("),t=i.lastIndexOf(")"),i.substring(s+1,t).split(/, /g).map((t,e)=>0===e?"ubo-"+t:t).map(t=>E(t)).join(", "));return h(n,{domains:e,args:t})}(t);if((-1<(e=t).indexOf(d)||-1<e.indexOf(g))&&-1===e.search(S))return _(t);var e,r=function(t){if(-1===t.indexOf(f))return null;var e=":has-text",r="##^script";const n=t.split(e);if(1===n.length)return null;var i,s=n[0].replace(r,"");const l=[];for(let t=1;t<n.length;t+=1){var a=n[t].slice(1,-1);"/"===(i=a)[0]&&"/"===i[i.length-1]?l.push(s+r+e+`(${a})`):l.push(s+`$$script[tag-content="${a}"]`+o)}return l}(t);return r||((e=function(t){const e={MASK_CSS_RULE:"##",MASK_CSS_EXCEPTION_RULE:"#@#",MASK_CSS_EXTENDED_CSS_RULE:"#?#",MASK_CSS_EXCEPTION_EXTENDED_CSS_RULE:"#@?#"};var r={[e.MASK_CSS_RULE]:"#$#",[e.MASK_CSS_EXCEPTION_RULE]:"#@$#",[e.MASK_CSS_EXTENDED_CSS_RULE]:"#$?#",[e.MASK_CSS_EXCEPTION_EXTENDED_CSS_RULE]:"#@$?#"},n=Object.keys(e).map(t=>e[t]),i=l.FilterRule.findRuleMarker(t,n,"#");if(!i)return null;n=t.indexOf(i);const s=t.substring(n+i.length);if(!(-1<s.indexOf(":style(")))return null;if(t=t.substring(0,n),(n=s.replace(/:style\s*\(\s*(\S+.*\S)\s*\)/," { $1 }"))===s)throw new Error("Empty :style pseudo class: "+s);return t+r[i]+n}(t))?e:(r="rewrite=abp-resource:",(r=(e=t).includes(r)?e.replace(r,"redirect="):null)?r:(r=function(e){const r="csp";var t="inline-script",n="inline-font";const i={empty:"redirect=nooptext",mp4:"redirect=noopmp4-1s","inline-script":"csp=script-src 'self' 'unsafe-eval' http: https: data: blob: mediastream: filesystem:","inline-font":"csp=font-src 'self' 'unsafe-eval' http: https: data: blob: mediastream: filesystem:",ghide:"generichide",ehide:"elemhide"};let s,l;for(let t=e.length-2;0<=t;--t){var a=e.charAt(t);if("$"===a&&(0<t&&"\\"!==e.charAt(t-1))){l=e.substring(0,t),s=e.substring(t+1);break}}if(!s)return null;const c=s.split(",");let u=!1,p=c.map(t=>{let e=i[t];return"mp4"===t&&(c.some(t=>"media"===t)||(e+=",media")),e?(u=!0,e):t});const f=p.filter(t=>m.startWith(t,r));if(1<f.length){const d=p.filter(t=>!m.startWith(t,r)),g=f.map(t=>{var[,t]=t.split("=");return t});var o="csp="+g.join("; ");p=d.concat(o)}if(-1<p.indexOf("all")){const S=[["document","popup"],[t],[n],[""]];return S.map(e=>{var t=p.filter(t=>!(e.includes(t)||"all"===t)),t=[...e.map(t=>i[t]||t),...t].filter(t=>t).join(",");return t.length<1?l:l+"$"+t})}if(u){n=p.join(",");return l+"$"+n}return null}(t))||t))}}}(adguard,adguard.rules);