!function(m,t){"use strict";function e(t,e){this.ruleText=t,this.filterId=e}e.prototype={loadDomains(r){if(!m.utils.strings.isEmpty(r)){let i=null,s=null;var n=r.split(/[,|]/);for(let e=0;e<n.length;e+=1){const o=n[e];let t;if(0===o.trim().length)throw`Error load $domain options from "${r}", because after split one of them is empty`;m.utils.strings.startWith(o,"~")?(t=m.utils.url.toPunyCode(o.substring(1).trim()),m.utils.strings.isEmpty(t)||(null===s&&(s=[]),s.push(t))):(t=m.utils.url.toPunyCode(o.trim()),m.utils.strings.isEmpty(t)||(null===i&&(i=[]),i.push(t)))}this.setPermittedDomains(i),this.setRestrictedDomains(s)}},getPermittedDomains(){return this.permittedDomain?[this.permittedDomain]:this.permittedDomains},getRestrictedDomains(){return this.restrictedDomain?[this.restrictedDomain]:this.restrictedDomains},setPermittedDomains(t){if(!t||0===t.length)return delete this.permittedDomain,void delete this.permittedDomains;1<t.length?(this.permittedDomains=t,delete this.permittedDomain):(this.permittedDomain=t[0],delete this.permittedDomains)},setRestrictedDomains(t){if(!t||0===t.length)return delete this.restrictedDomain,void delete this.restrictedDomains;1<t.length?(this.restrictedDomains=t,delete this.restrictedDomain):(this.restrictedDomain=t[0],delete this.restrictedDomains)},isDomainSensitive(){return this.hasRestrictedDomains()||this.hasPermittedDomains()},isGeneric(){return!this.hasPermittedDomains()||this.getPermittedDomains().some(t=>t===e.WILDCARD_MARK)},hasPermittedDomains(){return this.permittedDomain||this.permittedDomains&&0<this.permittedDomains.length},hasRestrictedDomains(){return this.restrictedDomain||this.restrictedDomains&&0<this.restrictedDomains.length},isRestricted(t){if(!t)return!1;var e=this.getRestrictedDomains();return!!e&&m.utils.url.isDomainOrSubDomainOfAny(t,e)},isPermitted(t){if(!t)return!1;if(this.isRestricted(t))return!1;var e=this.getPermittedDomains();return!e||m.utils.url.isDomainOrSubDomainOfAny(t,e)},isDomainSpecific(t){if(!t)return!1;var e=this.getPermittedDomains()||[],i=this.getRestrictedDomains()||[];return m.utils.url.isDomainOrSubDomainOfAny(t,[...e,...i])},addRestrictedDomains(e){if(e&&e.length){let t=this.getRestrictedDomains();t=m.utils.collections.removeDuplicates((t||[]).concat(e)),this.setRestrictedDomains(t)}},removeRestrictedDomains(e){if(e){var i=this.getRestrictedDomains();for(let t=0;t<e.length;t++)m.utils.collections.remove(i,e[t]);this.setRestrictedDomains(i)}}};var n=m.utils.strings;e.findRuleMarker=function(e,i,t){var s=e.indexOf(t);if(-1===s)return null;for(let t=0;t<i.length;t+=1){var r=i[t];if(n.startsAtIndexWith(e,s,r))return r}return null},e.escapeRule=function(t){return encodeURIComponent(t).replace(/['()]/g,t=>({"'":"%27","(":"%28",")":"%29"})[t])},e.PARAMETER_START="[",e.PARAMETER_END="]",e.MASK_WHITE_LIST="@@",e.MASK_CSS_RULE="##",e.MASK_CSS_EXCEPTION_RULE="#@#",e.MASK_CSS_INJECT_RULE="#$#",e.MASK_CSS_EXCEPTION_INJECT_RULE="#@$#",e.MASK_CSS_EXTENDED_CSS_RULE="#?#",e.MASK_CSS_EXCEPTION_EXTENDED_CSS_RULE="#@?#",e.MASK_CSS_INJECT_EXTENDED_CSS_RULE="#$?#",e.MASK_CSS_EXCEPTION_INJECT_EXTENDED_CSS_RULE="#@$?#",e.MASK_SCRIPT_RULE="#%#",e.MASK_SCRIPT_EXCEPTION_RULE="#@%#",e.MASK_CONTENT_RULE="$$",e.MASK_CONTENT_EXCEPTION_RULE="$@$",e.MASK_BANNER_RULE="++",e.MASK_CONFIGURATION_RULE="~~",e.COMMENT="!",e.EQUAL="=",e.COMA_DELIMITER=",",e.LINE_DELIMITER="|",e.NOT_MARK="~",e.WILDCARD_MARK="*",t.FilterRule=e}(adguard,adguard.rules);