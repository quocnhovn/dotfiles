!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).c3=e()}(this,function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){var e=this;e.d3=window.d3||("undefined"!=typeof require?require("d3"):void 0),e.api=t,e.config=e.getDefaultConfig(),e.data={},e.cache={},e.axes={}}function n(t){this.internal=new s(this),this.internal.loadConfig(t),this.internal.beforeInit(t),this.internal.init(),this.internal.afterInit(t),function e(i,n,r){Object.keys(i).forEach(function(t){n[t]=i[t].bind(r),0<Object.keys(i[t]).length&&e(i[t],n[t],r)})}(n.prototype,this,this)}function a(t){return Math.ceil(t)+.5}function r(t){return 10*Math.ceil(t/10)}function G(t){return t[1]-t[0]}function I(t,e,i){return E(t[e])?t[e]:i}function x(t){var e=c(t);return{x:(t=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)])[0].x,y:Math.min(t[0].y,t[1].y),width:e.width,height:e.height}}function c(t){try{return t.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}}function u(t){return Array.isArray(t)}function E(t){return void 0!==t}function d(t){return null==t||g(t)&&0===t.length||"object"===o(t)&&0===Object.keys(t).length}function l(t){return"function"==typeof t}function h(t){return"number"==typeof t}function g(t){return"string"==typeof t}function w(t){return void 0===t}function y(t){return t||0===t}function m(t){return!d(t)}function f(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function e(t,e){var i=this;i.component=t,i.params=e||{},i.d3=t.d3,i.scale=i.d3.scaleLinear(),i.range,i.orient="bottom",i.innerTickSize=6,i.outerTickSize=this.params.withOuterTick?6:0,i.tickPadding=3,i.tickValues=null,i.tickFormat,i.tickArguments,i.tickOffset=0,i.tickCulling=!0,i.tickCentered,i.tickTextCharSize,i.tickTextRotate=i.params.tickTextRotate,i.tickLength,i.axis=i.generateAxis()}e.prototype.axisX=function(t,e,i){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+i)+", 0)"})},e.prototype.axisY=function(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})},e.prototype.scaleExtent=function(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]},e.prototype.generateTicks=function(t){var e,i,n=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(i=t.domain(),e=Math.ceil(i[0]);e<i[1];e++)n.push(e);return 0<n.length&&0<n[0]&&n.unshift(n[0]-(n[1]-n[0])),n},e.prototype.copyScale=function(){var t,e=this.scale.copy();return this.params.isCategory&&(t=this.scale.domain(),e.domain([t[0],t[1]-1])),e},e.prototype.textFormatted=function(t){t=this.tickFormat?this.tickFormat(t):t;return void 0!==t?t:""},e.prototype.updateRange=function(){var t=this;return t.range=t.scale.rangeExtent?t.scale.rangeExtent():t.scaleExtent(t.scale.range()),t.range},e.prototype.updateTickTextCharSize=function(t){var n=this;if(n.tickTextCharSize)return n.tickTextCharSize;var r={h:11.5,w:5.5};return t.select("text").text(function(t){return n.textFormatted(t)}).each(function(t){var e=c(this),i=n.textFormatted(t),t=e.height,i=i?e.width/i.length:void 0;t&&i&&(r.h=t,r.w=i)}).text(""),n.tickTextCharSize=r},e.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient},e.prototype.tspanData=function(t,e,i){var n=this,r=n.params.tickMultiline?n.splitTickText(t,i):[].concat(n.textFormatted(t));return(r=n.params.tickMultiline&&0<n.params.tickMultilineMax?n.ellipsify(r,n.params.tickMultilineMax):r).map(function(t){return{index:e,splitted:t,length:r.length}})},e.prototype.splitTickText=function(t,e){var r,a,o=this,t=o.textFormatted(t),s=o.params.tickWidth;return"[object Array]"===Object.prototype.toString.call(t)?t:((!s||s<=0)&&(s=o.isVertical()?95:o.params.isCategory?Math.ceil(e(1)-e(0))-12:110),function t(e,i){r=void 0;for(var n=1;n<i.length;n++)if(" "===i.charAt(n)&&(r=n),a=i.substr(0,n+1),a=o.tickTextCharSize.w*a.length,s<a)return t(e.concat(i.substr(0,r||n)),i.slice(r?r+1:n));return e.concat(i)}([],t+""))},e.prototype.ellipsify=function(t,e){if(t.length<=e)return t;for(var i=t.slice(0,e),n=3,r=e-1;0<=r;r--){var a=i[r].length;if(i[r]=i[r].substr(0,a-n).padEnd(a,"."),(n-=a)<=0)break}return i},e.prototype.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},e.prototype.lineY2=function(t){var e=this,t=e.scale(t)+(e.tickCentered?0:e.tickOffset);return e.range[0]<t&&t<e.range[1]?e.innerTickSize:0},e.prototype.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(0<t?1:-1):this.tickLength},e.prototype.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},e.prototype.textTextAnchor=function(){var t=this.tickTextRotate;return t?0<t?"start":"end":"middle"},e.prototype.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},e.prototype.tspanDy=function(t,e){var i=this.tickTextCharSize.h;return i=0===e?this.isVertical()?-((t.length-1)*(this.tickTextCharSize.h/2)-3):".71em":i},e.prototype.generateAxis=function(){var y=this,m=y.d3,S=y.params;function w(t,_){var x;return t.each(function(){var t,e,i,n=w.g=m.select(this),r=this.__chart__||y.scale,a=this.__chart__=y.copyScale(),o=y.tickValues||y.generateTicks(a),s=n.selectAll(".tick").data(o,a),c=s.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),d=s.exit().remove(),o=s.merge(c);S.isCategory?(y.tickOffset=Math.ceil((a(1)-a(0))/2),e=y.tickCentered?0:y.tickOffset,i=y.tickCentered?y.tickOffset:0):y.tickOffset=e=0,y.updateRange(),y.updateTickLength(),y.updateTickTextCharSize(n.select(".tick"));var l=o.select("line").merge(c.append("line")),u=o.select("text").merge(c.append("text")),s=o.selectAll("text").selectAll("tspan").data(function(t,e){return y.tspanData(t,e,a)}),h=s.enter().append("tspan").merge(s).text(function(t){return t.splitted});s.exit().remove();var g,p,n=n.selectAll(".domain").data([0]),f=n.enter().append("path").merge(n).attr("class","domain");switch(y.orient){case"bottom":t=y.axisX,l.attr("x1",e).attr("x2",e).attr("y2",function(t,e){return y.lineY2(t,e)}),u.attr("x",0).attr("y",function(t,e){return y.textY(t,e)}).attr("transform",function(t,e){return y.textTransform(t,e)}).style("text-anchor",function(t,e){return y.textTextAnchor(t,e)}),h.attr("x",0).attr("dy",function(t,e){return y.tspanDy(t,e)}).attr("dx",function(t,e){return y.tspanDx(t,e)}),f.attr("d","M"+y.range[0]+","+y.outerTickSize+"V0H"+y.range[1]+"V"+y.outerTickSize);break;case"top":t=y.axisX,l.attr("x1",e).attr("x2",e).attr("y2",function(t,e){return-1*y.lineY2(t,e)}),u.attr("x",0).attr("y",function(t,e){return-1*y.textY(t,e)-(S.isCategory?2:y.tickLength-2)}).attr("transform",function(t,e){return y.textTransform(t,e)}).style("text-anchor",function(t,e){return y.textTextAnchor(t,e)}),h.attr("x",0).attr("dy",function(t,e){return y.tspanDy(t,e)}).attr("dx",function(t,e){return y.tspanDx(t,e)}),f.attr("d","M"+y.range[0]+","+-y.outerTickSize+"V0H"+y.range[1]+"V"+-y.outerTickSize);break;case"left":t=y.axisY,l.attr("x2",-y.innerTickSize).attr("y1",i).attr("y2",i),u.attr("x",-y.tickLength).attr("y",y.tickOffset).style("text-anchor","end"),h.attr("x",-y.tickLength).attr("dy",function(t,e){return y.tspanDy(t,e)}),f.attr("d","M"+-y.outerTickSize+","+y.range[0]+"H0V"+y.range[1]+"H"+-y.outerTickSize);break;case"right":t=y.axisY,l.attr("x2",y.innerTickSize).attr("y1",i).attr("y2",i),u.attr("x",y.tickLength).attr("y",y.tickOffset).style("text-anchor","start"),h.attr("x",y.tickLength).attr("dy",function(t,e){return y.tspanDy(t,e)}),f.attr("d","M"+y.outerTickSize+","+y.range[0]+"H0V"+y.range[1]+"H"+y.outerTickSize)}a.rangeBand?(p=(g=a).rangeBand()/2,r=a=function(t){return g(t)+p}):r.rangeBand?r=a:d.call(t,a,y.tickOffset),c.call(t,r,y.tickOffset),x=(_?o.transition(_):o).style("opacity",1).call(t,a,y.tickOffset)}),x}return w.scale=function(t){return arguments.length?(y.scale=t,w):y.scale},w.orient=function(t){return arguments.length?(y.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",w):y.orient},w.tickFormat=function(t){return arguments.length?(y.tickFormat=t,w):y.tickFormat},w.tickCentered=function(t){return arguments.length?(y.tickCentered=t,w):y.tickCentered},w.tickOffset=function(){return y.tickOffset},w.tickInterval=function(){var t;return(t=S.isCategory?2*y.tickOffset:(w.g.select("path.domain").node().getTotalLength()-2*y.outerTickSize)/w.g.selectAll("line").size())==1/0?0:t},w.ticks=function(){return arguments.length?(y.tickArguments=arguments,w):y.tickArguments},w.tickCulling=function(t){return arguments.length?(y.tickCulling=t,w):y.tickCulling},w.tickValues=function(t){if("function"==typeof t)y.tickValues=function(){return t(y.scale.domain())};else{if(!arguments.length)return y.tickValues;y.tickValues=t}return w},w};function p(t){!function(t){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this),this.owner=t,this.d3=t.d3,this.internal=e}var R={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",colorScale:"c3-colorscale",stanfordElements:"c3-stanford-elements",stanfordLine:"c3-stanford-line",stanfordLines:"c3-stanford-lines",stanfordRegion:"c3-stanford-region",stanfordRegions:"c3-stanford-regions",stanfordText:"c3-stanford-text",stanfordTexts:"c3-stanford-texts",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};p.prototype.init=function(){var t=this.owner,e=t.config,i=t.main;t.axes.x=i.append("g").attr("class",R.axis+" "+R.axisX).attr("clip-path",e.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",R.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=i.append("g").attr("class",R.axis+" "+R.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",R.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=i.append("g").attr("class",R.axis+" "+R.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",R.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},p.prototype.getXAxis=function(t,e,i,n,r,a,o){var s=this.owner,c=s.config,a={isCategory:s.isCategorized(),withOuterTick:r,tickMultiline:c.axis_x_tick_multiline,tickMultilineMax:c.axis_x_tick_multiline?Number(c.axis_x_tick_multilineMax):0,tickWidth:c.axis_x_tick_width,tickTextRotate:o?0:c.axis_x_tick_rotate,withoutTransition:a},e=new this.internal(this,a).axis.scale(t).orient(e);return s.isTimeSeries()&&n&&"function"!=typeof n&&(n=n.map(function(t){return s.parseDate(t)})),e.tickFormat(i).tickValues(n),s.isCategorized()&&(e.tickCentered(c.axis_x_tick_centered),d(c.axis_x_tick_culling)&&(c.axis_x_tick_culling=!1)),e},p.prototype.updateXAxisTickValues=function(t,e){var i,n=this.owner,r=n.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(i=this.generateTickValues(n.mapTargetsToUniqueXs(t),r.axis_x_tick_count,n.isTimeSeries())),e?e.tickValues(i):(n.xAxis.tickValues(i),n.subXAxis.tickValues(i)),i},p.prototype.getYAxis=function(t,e,i,n,r,a,o){var s=this.owner,c=s.config,d=c["axis_".concat(t,"_tick_format")];!d&&s.isAxisNormalized(t)&&(d=function(t){return"".concat(t,"%")});i=new this.internal(this,{withOuterTick:r,withoutTransition:a,tickTextRotate:o?0:c.axis_y_tick_rotate}).axis.scale(e).orient(i);return d&&i.tickFormat(d),s.isTimeSeriesY()?i.ticks(c.axis_y_tick_time_type,c.axis_y_tick_time_interval):i.tickValues(n),i},p.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},p.prototype.getXAxisTickFormat=function(){var e=this.owner,i=e.config,n=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(t){return t};return i.axis_x_tick_format&&(l(i.axis_x_tick_format)?n=i.axis_x_tick_format:e.isTimeSeries()&&(n=function(t){return t?e.axisTimeFormat(i.axis_x_tick_format)(t):""})),l(n)?function(t){return n.call(e,t)}:n},p.prototype.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},p.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},p.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},p.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},p.prototype.getLabelOptionByAxisId=function(t){var e,i=this.owner.config;return"y"===t?e=i.axis_y_label:"y2"===t?e=i.axis_y2_label:"x"===t&&(e=i.axis_x_label),e},p.prototype.getLabelText=function(t){t=this.getLabelOptionByAxisId(t);return g(t)?t:t?t.text:null},p.prototype.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);g(n)?"y"===t?i.axis_y_label=e:"y2"===t?i.axis_y2_label=e:"x"===t&&(i.axis_x_label=e):n&&(n.text=e)},p.prototype.getLabelPosition=function(t,e){t=this.getLabelOptionByAxisId(t),e=t&&"object"===o(t)&&t.position?t.position:e;return{isInner:0<=e.indexOf("inner"),isOuter:0<=e.indexOf("outer"),isLeft:0<=e.indexOf("left"),isCenter:0<=e.indexOf("center"),isRight:0<=e.indexOf("right"),isTop:0<=e.indexOf("top"),isMiddle:0<=e.indexOf("middle"),isBottom:0<=e.indexOf("bottom")}},p.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},p.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},p.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},p.prototype.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},p.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},p.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},p.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},p.prototype.xForAxisLabel=function(t,e){var i=this.owner;return t?e.isLeft?0:e.isCenter?i.width/2:i.width:e.isBottom?-i.height:e.isMiddle?-i.height/2:0},p.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},p.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},p.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},p.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},p.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},p.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},p.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},p.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},p.prototype.dyForXAxisLabel=function(){var t=this.owner,e=t.config,i=this.getXAxisLabelPosition();return e.axis_rotated?i.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):i.isInner?"-0.5em":t.getHorizontalAxisHeight("x")-10},p.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},p.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},p.prototype.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},p.prototype.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},p.prototype.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},p.prototype.getMaxTickWidth=function(t,e){var i,n,r,a=this.owner,o=0;return e&&a.currentMaxTickWidths[t]||(a.svg&&(e=a.filterTargetsToShow(a.data.targets),"y"===t?(i=a.y.copy().domain(a.getYDomain(e,"y")),n=this.getYAxis(t,i,a.yOrient,a.yAxisTickValues,!1,!0,!0)):"y2"===t?(i=a.y2.copy().domain(a.getYDomain(e,"y2")),n=this.getYAxis(t,i,a.y2Orient,a.y2AxisTickValues,!1,!0,!0)):(i=a.x.copy().domain(a.getXDomain(e)),n=this.getXAxis(i,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(e,n)),(r=a.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(n).each(function(){a.d3.select(this).selectAll("text").each(function(){var t=c(this);o<t.width&&(o=t.width)}),r.remove()})),a.currentMaxTickWidths[t]=o<=0?a.currentMaxTickWidths[t]:o),a.currentMaxTickWidths[t]},p.prototype.updateLabels=function(t){var e=this.owner,i=e.main.select("."+R.axisX+" ."+R.axisXLabel),n=e.main.select("."+R.axisY+" ."+R.axisYLabel),e=e.main.select("."+R.axisY2+" ."+R.axisY2Label);(t?i.transition():i).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?n.transition():n).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},p.prototype.getPadding=function(t,e,i,n){var r="number"==typeof t?t:t[e];return y(r)?"ratio"===t.unit?t[e]*n:this.convertPixelsToAxisPadding(r,n):i},p.prototype.convertPixelsToAxisPadding=function(t,e){var i=this.owner;return e*(t/(i.config.axis_rotated?i.width:i.height))},p.prototype.generateTickValues=function(t,e,i){var n,r,a,o,s,c=t;if(e)if(1===(e=l(e)?e():e))c=[t[0]];else if(2===e)c=[t[0],t[t.length-1]];else if(2<e){for(n=t[0],a=((t=t[t.length-1])-n)/(1+(r=e-2)),c=[n],o=0;o<r;o++)s=+n+a*(o+1),c.push(i?new Date(s):s);c.push(t)}return c=!i?c.sort(function(t,e){return t-e}):c},p.prototype.generateTransitions=function(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},p.prototype.redraw=function(t,e){var i=this.owner,t=t?i.d3.transition().duration(t):null;i.axes.x.style("opacity",e?0:1).call(i.xAxis,t),i.axes.y.style("opacity",e?0:1).call(i.yAxis,t),i.axes.y2.style("opacity",e?0:1).call(i.y2Axis,t),i.axes.subx.style("opacity",e?0:1).call(i.subXAxis,t)};var t={version:"0.7.11",chart:{fn:n.prototype,internal:{fn:s.prototype,axis:{fn:p.prototype,internal:{fn:e.prototype}}}},generate:function(t){return new n(t)}};function _(t){return t/Math.pow(10,Math.ceil(Math.log(t)/Math.LN10-1e-12))==1}s.prototype.beforeInit=function(){},s.prototype.afterInit=function(){},s.prototype.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},s.prototype.initParams=function(){var t=this,e=t.d3,i=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=void 0,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeParse=(i.data_xLocaltime?e.timeParse:e.utcParse)(t.config.data_xFormat),t.axisTimeFormat=i.axis_x_localtime?e.timeFormat:e.utcFormat,t.defaultAxisTimeFormat=function(t){return(t.getMilliseconds()?e.timeFormat(".%L"):t.getSeconds()?e.timeFormat(":%S"):t.getMinutes()?e.timeFormat("%I:%M"):t.getHours()?e.timeFormat("%I %p"):t.getDay()&&1!==t.getDate()||1!==t.getDate()||t.getMonth()?e.timeFormat("%-m/%-d"):e.timeFormat("%Y/%-m/%-d"))(t)},t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=i.axis_rotated?i.axis_x_inner?"right":"left":i.axis_x_inner?"top":"bottom",t.yOrient=i.axis_rotated?i.axis_y_inner?"top":"bottom":i.axis_y_inner?"right":"left",t.y2Orient=i.axis_rotated?i.axis_y2_inner?"bottom":"top":i.axis_y2_inner?"left":"right",t.subXOrient=i.axis_rotated?"left":"bottom",t.isLegendRight="right"===i.legend_position,t.isLegendInset="inset"===i.legend_position,t.isLegendTop="top-left"===i.legend_inset_anchor||"top-right"===i.legend_inset_anchor,t.isLegendLeft="top-left"===i.legend_inset_anchor||"bottom-left"===i.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=i.axis_rotated&&!i.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},s.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},s.prototype.initWithData=function(t){var e=this,i=e.d3,n=e.config,r=!0;e.axis=new p(e),n.bindto?"function"==typeof n.bindto.node?e.selectChart=n.bindto:e.selectChart=i.select(n.bindto):e.selectChart=i.selectAll([]),e.selectChart.empty()&&(e.selectChart=i.select(document.createElement("div")).style("opacity",0),e.observeInserted(e.selectChart),r=!1),e.selectChart.html("").classed("c3",!0),e.data.xs={},e.data.targets=e.convertDataToTargets(t),n.data_filter&&(e.data.targets=e.data.targets.filter(n.data_filter)),n.data_hide&&e.addHiddenTargetIds(!0===n.data_hide?e.mapToIds(e.data.targets):n.data_hide),n.legend_hide&&e.addHiddenLegendIds(!0===n.legend_hide?e.mapToIds(e.data.targets):n.legend_hide),e.isStanfordGraphType()&&e.initStanfordData(),e.updateSizes(),e.updateScales(),e.x.domain(i.extent(e.getXDomain(e.data.targets))),e.y.domain(e.getYDomain(e.data.targets,"y")),e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subX.domain(e.x.domain()),e.subY.domain(e.y.domain()),e.subY2.domain(e.y2.domain()),e.orgXDomain=e.x.domain(),e.svg=e.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return n.onmouseover.call(e)}).on("mouseleave",function(){return n.onmouseout.call(e)}),e.config.svg_classname&&e.svg.attr("class",e.config.svg_classname),i=e.svg.append("defs"),e.clipChart=e.appendClip(i,e.clipId),e.clipXAxis=e.appendClip(i,e.clipIdForXAxis),e.clipYAxis=e.appendClip(i,e.clipIdForYAxis),e.clipGrid=e.appendClip(i,e.clipIdForGrid),e.clipSubchart=e.appendClip(i,e.clipIdForSubchart),e.updateSvgSize(),i=e.main=e.svg.append("g").attr("transform",e.getTranslate("main")),e.initPie&&e.initPie(),e.initDragZoom&&e.initDragZoom(),e.initSubchart&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),e.initTitle&&e.initTitle(),e.initZoom&&e.initZoom(),e.isStanfordGraphType()&&e.drawColorScale(),e.initSubchartBrush&&e.initSubchartBrush(),i.append("text").attr("class",R.text+" "+R.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),e.initGrid(),i.append("g").attr("clip-path",e.clipPath).attr("class",R.chart),n.grid_lines_front&&e.initGridLines(),e.initStanfordElements(),e.initEventRect(),e.initChartElements(),e.axis.init(),e.updateTargets(e.data.targets),n.axis_x_selection&&e.brush.selectionAsValue(e.getDefaultSelection()),r&&(e.updateDimension(),e.config.oninit.call(e),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),e.bindResize(),e.bindWindowFocus(),e.api.element=e.selectChart.node()},s.prototype.smoothLines=function(t,e){var a=this;"grid"===e&&t.each(function(){var t=a.d3.select(this),e=t.attr("x1"),i=t.attr("x2"),n=t.attr("y1"),r=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(i),y1:Math.ceil(n),y2:Math.ceil(r)})})},s.prototype.updateSizes=function(){var t=this,e=t.config,i=t.legend?t.getLegendHeight():0,n=t.legend?t.getLegendWidth():0,r=t.isLegendRight||t.isLegendInset?0:i,a=t.hasArcType(),o=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!a?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+r+t.getCurrentPaddingBottom(),left:s+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:o+s+r+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+r,left:t.rotated_padding_left}:{top:t.currentHeight-s-r,right:NaN,bottom:o+r,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(i,n),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?n+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&a&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},s.prototype.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},s.prototype.showTargets=function(){var e=this;e.svg.selectAll("."+R.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},s.prototype.redraw=function(t,e){var i,n,r,a,o,s,c,d=this,l=d.main,u=d.d3,h=d.config,g=d.getShapeIndices(d.isAreaType),p=d.getShapeIndices(d.isBarType),f=d.getShapeIndices(d.isLineType),_=d.hasArcType(),x=d.filterTargetsToShow(d.data.targets),y=d.xv.bind(d),m=I(t=t||{},"withY",!0),S=I(t,"withSubchart",!0),w=I(t,"withTransition",!0),v=I(t,"withTransform",!1),b=I(t,"withUpdateXDomain",!1),T=I(t,"withUpdateOrgXDomain",!1),A=I(t,"withTrimXDomain",!0),P=I(t,"withUpdateXAxis",b),C=I(t,"withLegend",!1),L=I(t,"withEventRect",!0),V=I(t,"withDimension",!0),G=I(t,"withTransitionForExit",w),E=I(t,"withTransitionForAxis",w),O=w?h.transition_duration:0,G=G?O:0,E=E?O:0;if(e=e||d.axis.generateTransitions(E),C&&h.legend_show?d.updateLegend(d.mapToIds(d.data.targets),t,e):V&&d.updateDimension(!0),d.isCategorized()&&0===x.length&&d.x.domain([0,d.axes.x.selectAll(".tick").size()]),x.length?(d.updateXDomain(x,b,T,A),h.axis_x_tick_values||(a=d.axis.updateXAxisTickValues(x))):(d.xAxis.tickValues([]),d.subXAxis.tickValues([])),h.zoom_rescale&&!t.flow&&(c=d.x.orgDomain()),d.y.domain(d.getYDomain(x,"y",c)),d.y2.domain(d.getYDomain(x,"y2",c)),!h.axis_y_tick_values&&h.axis_y_tick_count&&d.yAxis.tickValues(d.axis.generateTickValues(d.y.domain(),h.axis_y_tick_count)),!h.axis_y2_tick_values&&h.axis_y2_tick_count&&d.y2Axis.tickValues(d.axis.generateTickValues(d.y2.domain(),h.axis_y2_tick_count)),d.axis.redraw(E,_),d.axis.updateLabels(w),(b||P)&&x.length)if(h.axis_x_tick_culling&&a){for(o=1;o<a.length;o++)if(a.length/o<h.axis_x_tick_culling_max){s=o;break}d.svg.selectAll("."+R.axisX+" .tick text").each(function(t){t=a.indexOf(t);0<=t&&u.select(this).style("display",t%s?"none":"block")})}else d.svg.selectAll("."+R.axisX+" .tick text").style("display","block");A=d.generateDrawArea?d.generateDrawArea(g,!1):void 0,c=d.generateDrawBar?d.generateDrawBar(p):void 0,E=d.generateDrawLine?d.generateDrawLine(f,!1):void 0,_=d.generateXYForText(g,p,f,!0),w=d.generateXYForText(g,p,f,!1),d.updateCircleY(),b=(d.config.axis_rotated?d.circleY:d.circleX).bind(d),P=(d.config.axis_rotated?d.circleX:d.circleY).bind(d),m&&(d.subY.domain(d.getYDomain(x,"y")),d.subY2.domain(d.getYDomain(x,"y2"))),d.updateXgridFocus(),l.select("text."+R.text+"."+R.empty).attr("x",d.width/2).attr("y",d.height/2).text(h.data_empty_label_text).transition().style("opacity",x.length?0:1),L&&d.redrawEventRect(),d.updateGrid(O),d.updateStanfordElements(O),d.updateRegion(O),d.updateBar(G),d.updateLine(G),d.updateArea(G),d.updateCircle(b,P),d.hasDataLabel()&&d.updateText(_,w,G),d.redrawTitle&&d.redrawTitle(),d.redrawArc&&d.redrawArc(O,G,v),d.redrawSubchart&&d.redrawSubchart(S,e,O,G,g,p,f),d.isStanfordGraphType()&&d.drawColorScale(),l.selectAll("."+R.selectedCircles).filter(d.isBarType.bind(d)).selectAll("circle").remove(),t.flow&&(r=d.generateFlow({targets:x,flow:t.flow,duration:t.flow.duration,drawBar:c,drawLine:E,drawArea:A,cx:b,cy:P,xv:y,xForText:_,yForText:w})),O&&d.isTabVisible()?(O=u.transition().duration(O),i=[],[d.redrawBar(c,!0,O),d.redrawLine(E,!0,O),d.redrawArea(A,!0,O),d.redrawCircle(b,P,!0,O),d.redrawText(_,w,t.flow,!0,O),d.redrawRegion(!0,O),d.redrawGrid(!0,O)].forEach(function(t){t.forEach(function(t){i.push(t)})}),n=d.generateWait(),i.forEach(function(t){n.add(t)}),n(function(){r&&r(),h.onrendered&&h.onrendered.call(d)})):(d.redrawBar(c),d.redrawLine(E),d.redrawArea(A),d.redrawCircle(b,P),d.redrawText(_,w,t.flow),d.redrawRegion(),d.redrawGrid(),r&&r(),h.onrendered&&h.onrendered.call(d)),d.mapToIds(d.data.targets).forEach(function(t){d.withoutFadeIn[t]=!0})},s.prototype.updateAndRedraw=function(t){var e,i=this,n=i.config;(t=t||{}).withTransition=I(t,"withTransition",!0),t.withTransform=I(t,"withTransform",!1),t.withLegend=I(t,"withLegend",!1),t.withUpdateXDomain=I(t,"withUpdateXDomain",!0),t.withUpdateOrgXDomain=I(t,"withUpdateOrgXDomain",!0),t.withTransitionForExit=!1,t.withTransitionForTransform=I(t,"withTransitionForTransform",t.withTransition),i.updateSizes(),t.withLegend&&n.legend_show||(e=i.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0),i.updateScales(),i.updateSvgSize(),i.transformAll(t.withTransitionForTransform,e)),i.redraw(t,e)},s.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},s.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},s.prototype.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},s.prototype.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||m(t.data_xs))},s.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},s.prototype.getTranslate=function(t){var e,i,n=this,r=n.config;return"main"===t?(e=a(n.margin.left),i=a(n.margin.top)):"context"===t?(e=a(n.margin2.left),i=a(n.margin2.top)):"legend"===t?(e=n.margin3.left,i=n.margin3.top):"x"===t?(e=0,i=r.axis_rotated?0:n.height):"y"===t?(e=0,i=r.axis_rotated?n.height:0):"y2"===t?(e=r.axis_rotated?0:n.width,i=r.axis_rotated?1:0):"subx"===t?(e=0,i=r.axis_rotated?0:n.height2):"arc"===t&&(e=n.arcWidth/2,i=n.arcHeight/2-(n.hasType("gauge")?6:0)),"translate("+e+","+i+")"},s.prototype.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},s.prototype.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},s.prototype.opacityForCircle=function(t){var e=(l(this.config.point_show)?this.config.point_show(t):this.config.point_show)||this.isStanfordType(t)?1:0;return y(t.value)?this.isScatterType(t)?.5:e:0},s.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},s.prototype.xx=function(t){return t?this.x(t.x):null},s.prototype.xvCustom=function(t,e){var i=this,e=e?t[e]:t.value;return i.isTimeSeries()?e=i.parseDate(t.value):i.isCategorized()&&"string"==typeof t.value&&(e=i.config.axis_x_categories.indexOf(t.value)),Math.ceil(i.x(e))},s.prototype.yvCustom=function(t,e){var i=t.axis&&"y2"===t.axis?this.y2:this.y,t=e?t[e]:t.value;return Math.ceil(i(t))},s.prototype.xv=function(t){var e=this,i=t.value;return e.isTimeSeries()?i=e.parseDate(t.value):e.isCategorized()&&"string"==typeof t.value&&(i=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(i))},s.prototype.yv=function(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(t.value))},s.prototype.subxx=function(t){return t?this.subX(t.x):null},s.prototype.transformMain=function(t,e){var i,n,r,a=this;e&&e.axisX?i=e.axisX:(i=a.main.select("."+R.axisX),t&&(i=i.transition())),e&&e.axisY?n=e.axisY:(n=a.main.select("."+R.axisY),t&&(n=n.transition())),e&&e.axisY2?r=e.axisY2:(r=a.main.select("."+R.axisY2),t&&(r=r.transition())),(t?a.main.transition():a.main).attr("transform",a.getTranslate("main")),i.attr("transform",a.getTranslate("x")),n.attr("transform",a.getTranslate("y")),r.attr("transform",a.getTranslate("y2")),a.main.select("."+R.chartArcs).attr("transform",a.getTranslate("arc"))},s.prototype.transformAll=function(t,e){var i=this;i.transformMain(t,e),i.config.subchart_show&&i.transformContext(t,e),i.legend&&i.transformLegend(t)},s.prototype.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .overlay");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.selectChart.style("max-height",t.currentHeight+"px")},s.prototype.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},s.prototype.observeInserted=function(e){var i,n=this;"undefined"!=typeof MutationObserver?(i=new MutationObserver(function(t){t.forEach(function(t){"childList"===t.type&&t.previousSibling&&(i.disconnect(),n.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&&(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})})).observe(e.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},s.prototype.bindResize=function(){var t,e=this,i=e.config;e.resizeFunction=e.generateResize(),e.resizeFunction.add(function(){i.onresize.call(e)}),i.resize_auto&&e.resizeFunction.add(function(){void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),e.resizeTimeout=window.setTimeout(function(){delete e.resizeTimeout,e.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.brush&&e.brush.update()},100)}),e.resizeFunction.add(function(){i.onresized.call(e)}),e.resizeIfElementDisplayed=function(){null!=e.api&&e.api.element.offsetParent&&e.resizeFunction()},window.attachEvent?window.attachEvent("onresize",e.resizeIfElementDisplayed):window.addEventListener?window.addEventListener("resize",e.resizeIfElementDisplayed,!1):((t=window.onresize)?t.add&&t.remove||(t=e.generateResize()).add(window.onresize):t=e.generateResize(),t.add(e.resizeFunction),window.onresize=function(){e.api.element.offsetParent&&t()})},s.prototype.bindWindowFocus=function(){var t=this;this.windowFocusHandler||(this.windowFocusHandler=function(){t.redraw()},window.addEventListener("focus",this.windowFocusHandler))},s.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},s.prototype.generateResize=function(){var i=[];function t(){i.forEach(function(t){t()})}return t.add=function(t){i.push(t)},t.remove=function(t){for(var e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}},t},s.prototype.endall=function(t,e){var i=0;t.each(function(){++i}).on("end",function(){--i||e.apply(this,arguments)})},s.prototype.generateWait=function(){function t(t){var i=setInterval(function(){var e;n.isTabVisible()&&(e=0,r.forEach(function(t){if(t.empty())e+=1;else try{t.transition()}catch(t){e+=1}}),e===r.length&&(clearInterval(i),t&&t()))},50)}var n=this,r=[];return t.add=function(t){r.push(t)},t},s.prototype.parseDate=function(t){var e;return t instanceof Date?e=t:"string"==typeof t?e=this.dataTimeParse(t):"object"!==o(t)&&("number"!=typeof t||isNaN(t))||(e=new Date(+t)),e&&!isNaN(+e)||window.console.error("Failed to parse x '"+t+"' to Date object"),e},s.prototype.isTabVisible=function(){return!document.hidden},s.prototype.getPathBox=x,s.prototype.CLASS=R,"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,i){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=i},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=i},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=i},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=i},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=i},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,i,n,r,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=i,this._x1=n,this._y1=r,this._x2=a,this._y2=o},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,i,n,r,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=i,this._x1=n,this._y1=r,this._x2=a,this._y2=o},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=i,this._x1=n,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=i,this._x1=n,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,i,n,r,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=i,this._r1=n,this._r2=r,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,i,n,r,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=i,this._r1=n,this._r2=r,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=i,this._x2=n,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=i,this._x2=n,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,i,n,r,a){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,i,n,r,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,i,n,r,a){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,i,n,r,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,i,n,r,a,o){return new window.SVGPathSegArcAbs(void 0,t,e,i,n,r,a,o)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,i,n,r,a,o){return new window.SVGPathSegArcRel(void 0,t,e,i,n,r,a,o)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var i=e.pathSegList.numberOfItems-1;if(i<=0)return 0;for(;e.pathSegList.removeItem(i),!(t>e.getTotalLength())&&0<--i;);return i})),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){var e;this._pathElement&&(e=!1,t.forEach(function(t){"d"==t.attributeName&&(e=!0)}),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d"))))},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),((this._list[e]=t)._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",i=!0;return t.forEach(function(t){i?(i=!1,e+=t._asPathString()):e+=" "+t._asPathString()}),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];function e(){this.pathSegList=[]}var n=this;e.prototype.appendSegment=function(t){this.pathSegList.push(t)};function i(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()}i.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},i.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},i.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||"0"<=t&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var t=0,e=0,i=1,n=0,r=1,a=1,o=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=s)for(var c=this._currentIndex-1,d=1;s<=c;)e+=d*(this._string.charAt(c--)-"0"),d*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)i*=10,n+=(this._string.charAt(this._currentIndex)-"0")/i,this._currentIndex+=1}if(this._currentIndex!=o&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,a=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var l=e+n;if(l*=r,t&&(l*=Math.pow(10,a*t)),o!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),l}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},i.prototype.parseSegment=function(){var t=this._string[this._currentIndex],e=this._pathSegTypeFromChar(t);if(e==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((e=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=e){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(n);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type."}};var r=new e,a=new i(t);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var o=a.parseSegment();if(!o)return[];r.appendSegment(o)}return r.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(t,e){return t>>=0,e=String(void 0!==e?e:" "),this.length>t?String(this):((t-=this.length)>e.length&&(e+=e.repeat(t/e.length)),String(this)+e.slice(0,t))}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])}return i},writable:!0,configurable:!0}),(n.prototype.axis=function(){}).labels=function(e){var i=this.internal;arguments.length&&(Object.keys(e).forEach(function(t){i.axis.setLabelText(t,e[t])}),i.axis.updateLabels())},n.prototype.axis.max=function(t){var e=this.internal,i=e.config;if(!arguments.length)return{x:i.axis_x_max,y:i.axis_y_max,y2:i.axis_y2_max};"object"===o(t)?(y(t.x)&&(i.axis_x_max=t.x),y(t.y)&&(i.axis_y_max=t.y),y(t.y2)&&(i.axis_y2_max=t.y2)):i.axis_y_max=i.axis_y2_max=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},n.prototype.axis.min=function(t){var e=this.internal,i=e.config;if(!arguments.length)return{x:i.axis_x_min,y:i.axis_y_min,y2:i.axis_y2_min};"object"===o(t)?(y(t.x)&&(i.axis_x_min=t.x),y(t.y)&&(i.axis_y_min=t.y),y(t.y2)&&(i.axis_y2_min=t.y2)):i.axis_y_min=i.axis_y2_min=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},n.prototype.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};E(t.max)&&this.axis.max(t.max),E(t.min)&&this.axis.min(t.min)},n.prototype.axis.types=function(t){var e=this.internal;if(void 0===t)return{y:e.config.axis_y_type,y2:e.config.axis_y2_type};E(t.y)&&(e.config.axis_y_type=t.y),E(t.y2)&&(e.config.axis_y2_type=t.y2),e.updateScales(),e.redraw()},n.prototype.category=function(t,e){var i=this.internal,n=i.config;return 1<arguments.length&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},n.prototype.categories=function(t){var e=this.internal,i=e.config;return arguments.length&&(i.axis_x_categories=t,e.redraw()),i.axis_x_categories},n.prototype.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},n.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},n.prototype.destroy=function(){var t,e=this.internal;return window.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),window.detachEvent?window.detachEvent("onresize",e.resizeIfElementDisplayed):window.removeEventListener?window.removeEventListener("resize",e.resizeIfElementDisplayed):(t=window.onresize)&&t.add&&t.remove&&t.remove(e.resizeFunction),e.resizeFunction.remove(),e.unbindWindowFocus(),e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},n.prototype.color=function(t){return this.internal.color(t)},(n.prototype.data=function(e){var t=this.internal.data.targets;return void 0===e?t:t.filter(function(t){return 0<=[].concat(e).indexOf(t.id)})}).shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},n.prototype.data.values=function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],e=null;return!t||(t=this.data(t))&&u(t)&&(e=t.reduce(function(t,e){e=e.values.map(function(t){return t.value});return i?t=t.concat(e):t.push(e),t},[])),e},n.prototype.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},n.prototype.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},n.prototype.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},n.prototype.data.stackNormalized=function(t){if(void 0===t)return this.internal.isStackNormalized();this.internal.config.data_stack_normalize=!!t,this.internal.redraw()},(n.prototype.donut=function(){}).padAngle=function(t){if(void 0===t)return this.internal.config.donut_padAngle;this.internal.config.donut_padAngle=t,this.flush()},n.prototype.flow=function(t){var r,e,i,n,a,o,s=this.internal,c=[],d=s.getMaxDataCount(),l=0,u=0;if(t.json)n=s.convertJsonToData(t.json,t.keys);else if(t.rows)n=s.convertRowsToData(t.rows);else{if(!t.columns)return;n=s.convertColumnsToData(t.columns)}r=s.convertDataToTargets(n,!0),s.data.targets.forEach(function(t){for(var e,i=!1,n=0;n<r.length;n++)if(t.id===r[n].id){for(i=!0,t.values[t.values.length-1]&&(u=t.values[t.values.length-1].index+1),l=r[n].values.length,e=0;e<l;e++)r[n].values[e].index=u+e,s.isTimeSeries()||(r[n].values[e].x=u+e);t.values=t.values.concat(r[n].values),r.splice(n,1);break}i||c.push(t.id)}),s.data.targets.forEach(function(t){for(var e,i=0;i<c.length;i++)if(t.id===c[i])for(u=t.values[t.values.length-1].index+1,e=0;e<l;e++)t.values.push({id:t.id,index:u+e,x:s.isTimeSeries()?s.getOtherTargetX(u+e):u+e,value:null})}),s.data.targets.length&&r.forEach(function(t){for(var e=[],i=s.data.targets[0].values[0].index;i<u;i++)e.push({id:t.id,index:i,x:s.isTimeSeries()?s.getOtherTargetX(i):i,value:null});t.values.forEach(function(t){t.index+=u,s.isTimeSeries()||(t.x+=u)}),t.values=e.concat(t.values)}),s.data.targets=s.data.targets.concat(r),s.getMaxDataCount(),n=(i=s.data.targets[0]).values[0],E(t.to)?(l=0,o=s.isTimeSeries()?s.parseDate(t.to):t.to,i.values.forEach(function(t){t.x<o&&l++})):E(t.length)&&(l=t.length),d?1===d&&s.isTimeSeries()&&(a=(i.values[i.values.length-1].x-n.x)/2,e=[new Date(+n.x-a),new Date(+n.x+a)],s.updateXDomain(null,!0,!0,!1,e)):(a=s.isTimeSeries()?1<i.values.length?i.values[i.values.length-1].x-n.x:n.x-s.getXDomain(s.data.targets)[0]:1,e=[n.x-a,n.x],s.updateXDomain(null,!0,!0,!1,e)),s.updateTargets(s.data.targets),s.redraw({flow:{index:n.index,length:l,duration:y(t.duration)?t.duration:s.config.transition_duration,done:t.done,orgDataCount:d},withLegend:!0,withTransition:1<d,withTrimXDomain:!1,withUpdateXAxis:!0})},s.prototype.generateFlow=function(P){var C=this,L=C.config,V=C.d3;return function(){var n,r,a,o,s,c,d,l,t=P.targets,e=P.flow,u=P.drawBar,h=P.drawLine,g=P.drawArea,p=P.cx,f=P.cy,_=P.xv,x=P.xForText,y=P.yForText,i=P.duration,m=e.index,S=e.length,w=C.getValueOnIndex(C.data.targets[0].values,m),v=C.getValueOnIndex(C.data.targets[0].values,m+S),b=C.x.domain(),T=e.duration||i,A=e.done||function(){},i=C.generateWait();C.flowing=!0,C.data.targets.forEach(function(t){t.values.splice(0,S)}),t=C.updateXDomain(t,!0,!0),C.updateXGrid&&C.updateXGrid(!0),n=C.xgrid||V.selectAll([]),r=C.xgridLines||V.selectAll([]),a=C.mainRegion||V.selectAll([]),o=C.mainText||V.selectAll([]),s=C.mainBar||V.selectAll([]),c=C.mainLine||V.selectAll([]),d=C.mainArea||V.selectAll([]),l=C.mainCircle||V.selectAll([]),t="translate("+(e.orgDataCount?1===e.orgDataCount||(w&&w.x)===(v&&v.x)||C.isTimeSeries()?C.x(b[0])-C.x(t[0]):C.x(w.x)-C.x(v.x):1!==C.data.targets[0].values.length?C.x(b[0])-C.x(t[0]):C.isTimeSeries()?(w=C.getValueOnIndex(C.data.targets[0].values,0),v=C.getValueOnIndex(C.data.targets[0].values,C.data.targets[0].values.length-1),C.x(w.x)-C.x(v.x)):G(t)/2)+",0) scale("+G(b)/G(t)+",1)",C.hideXGridFocus();T=V.transition().ease(V.easeLinear).duration(T);i.add(C.xAxis(C.axes.x,T)),i.add(s.transition(T).attr("transform",t)),i.add(c.transition(T).attr("transform",t)),i.add(d.transition(T).attr("transform",t)),i.add(l.transition(T).attr("transform",t)),i.add(o.transition(T).attr("transform",t)),i.add(a.filter(C.isRegionOnX).transition(T).attr("transform",t)),i.add(n.transition(T).attr("transform",t)),i.add(r.transition(T).attr("transform",t)),i(function(){var t,e=[],i=[];if(S){for(t=0;t<S;t++)e.push("."+R.shape+"-"+(m+t)),i.push("."+R.text+"-"+(m+t));C.svg.selectAll("."+R.shapes).selectAll(e).remove(),C.svg.selectAll("."+R.texts).selectAll(i).remove(),C.svg.select("."+R.xgrid).remove()}n.attr("transform",null).attr("x1",C.xgridAttr.x1).attr("x2",C.xgridAttr.x2).attr("y1",C.xgridAttr.y1).attr("y2",C.xgridAttr.y2).style("opacity",C.xgridAttr.opacity),r.attr("transform",null),r.select("line").attr("x1",L.axis_rotated?0:_).attr("x2",L.axis_rotated?C.width:_),r.select("text").attr("x",L.axis_rotated?C.width:0).attr("y",_),s.attr("transform",null).attr("d",u),c.attr("transform",null).attr("d",h),d.attr("transform",null).attr("d",g),l.attr("transform",null).attr("cx",p).attr("cy",f),o.attr("transform",null).attr("x",x).attr("y",y).style("fill-opacity",C.opacityForText.bind(C)),a.attr("transform",null),a.filter(C.isRegionOnX).attr("x",C.regionX.bind(C)).attr("width",C.regionWidth.bind(C)),A(),C.flowing=!1})}},n.prototype.focus=function(e){var t,i=this.internal;e=i.mapToTargetIds(e),t=i.svg.selectAll(i.selectorTargets(e.filter(i.isTargetToShow,i))),this.revert(),this.defocus(),t.classed(R.focused,!0).classed(R.defocused,!1),i.hasArcType()&&i.expandArc(e),i.toggleFocusLegend(e,!0),i.focusedTargetIds=e,i.defocusedTargetIds=i.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},n.prototype.defocus=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))).classed(R.focused,!1).classed(R.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),t.defocusedTargetIds=e},n.prototype.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(R.focused,!1).classed(R.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter(function(){return e.d3.select(this).classed(R.legendItemFocused)}).classed(R.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},(n.prototype.xgrids=function(t){var e=this.internal,i=e.config;return t&&(i.grid_x_lines=t,e.redrawWithoutRescale()),i.grid_x_lines}).add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},n.prototype.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},(n.prototype.ygrids=function(t){var e=this.internal,i=e.config;return t&&(i.grid_y_lines=t,e.redrawWithoutRescale()),i.grid_y_lines}).add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},n.prototype.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},n.prototype.groups=function(t){var e=this.internal,i=e.config;return w(t)||(i.data_groups=t,e.redraw()),i.data_groups},(n.prototype.legend=function(){}).show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},n.prototype.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!1})},n.prototype.load=function(e){var t=this.internal,i=t.config;e.xs&&t.addXs(e.xs),"names"in e&&n.prototype.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){i.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(i.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){i.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){i.data_colors[t]=e.colors[t]}),"cacheIds"in e&&t.hasCaches(e.cacheIds)?t.load(t.getCaches(e.cacheIds),e.done):e.unload?t.unload(t.mapToTargetIds(!0===e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e)},n.prototype.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},(n.prototype.pie=function(){}).padAngle=function(t){if(void 0===t)return this.internal.config.pie_padAngle;this.internal.config.pie_padAngle=t,this.flush()},(n.prototype.regions=function(t){var e=this.internal,i=e.config;return t&&(i.regions=t,e.redrawWithoutRescale()),i.regions}).add=function(t){var e=this.internal,i=e.config;return t&&(i.regions=i.regions.concat(t),e.redrawWithoutRescale()),i.regions},n.prototype.regions.remove=function(t){var e=this.internal,i=e.config,n=I(t=t||{},"duration",i.transition_duration),r=I(t,"classes",[R.region]),e=e.main.select("."+R.regions).selectAll(r.map(function(t){return"."+t}));return(n?e.transition().duration(n):e).style("opacity",0).remove(),i.regions=i.regions.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0<=r.indexOf(t)&&(e=!0)}),!e)}),i.regions},n.prototype.selected=function(t){var e=this.internal,i=e.d3;return e.main.selectAll("."+R.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+R.shape).filter(function(){return i.select(this).classed(R.SELECTED)}).nodes().map(function(t){t=t.__data__;return t.data||t})},n.prototype.select=function(s,c,d){var l=this.internal,u=l.d3,h=l.config;h.data_selection_enabled&&l.main.selectAll("."+R.shapes).selectAll("."+R.shape).each(function(t,e){var i=u.select(this),n=(t.data||t).id,r=l.getToggle(this,t).bind(l),a=h.data_selection_grouped||!s||0<=s.indexOf(n),o=!c||0<=c.indexOf(e),n=i.classed(R.SELECTED);i.classed(R.line)||i.classed(R.area)||(a&&o?h.data_selection_isselectable(t)&&!n&&r(!0,i.classed(R.SELECTED,!0),t,e):E(d)&&d&&n&&r(!1,i.classed(R.SELECTED,!1),t,e))})},n.prototype.unselect=function(s,c){var d=this.internal,l=d.d3,u=d.config;u.data_selection_enabled&&d.main.selectAll("."+R.shapes).selectAll("."+R.shape).each(function(t,e){var i=l.select(this),n=(t.data||t).id,r=d.getToggle(this,t).bind(d),a=u.data_selection_grouped||!s||0<=s.indexOf(n),o=!c||0<=c.indexOf(e),n=i.classed(R.SELECTED);i.classed(R.line)||i.classed(R.area)||a&&o&&u.data_selection_isselectable(t)&&n&&r(!1,i.classed(R.SELECTED,!1),t,e)})},n.prototype.show=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.removeHiddenTargetIds(t),(i=n.svg.selectAll(n.selectorTargets(t))).transition().style("display","initial","important").style("opacity",1,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",1)}),e.withLegend&&n.showLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.prototype.hide=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.addHiddenTargetIds(t),(i=n.svg.selectAll(n.selectorTargets(t))).transition().style("opacity",0,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",0),i.style("display","none")}),e.withLegend&&n.hideLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.prototype.toggle=function(t,e){var i=this,n=this.internal;n.mapToTargetIds(t).forEach(function(t){n.isTargetToShow(t)?i.hide(t,e):i.show(t,e)})},(n.prototype.tooltip=function(){}).show=function(e){var t,i=this.internal,n=e.mouse||(e.data?t=e.data:void 0!==e.x&&(n=e.id?i.data.targets.filter(function(t){return t.id===e.id}):i.data.targets,t=i.filterByX(n,e.x).slice(0,1)[0]),t?i.getMousePosition(t):null);i.dispatchEvent("mousemove",n),i.config.tooltip_onshow.call(i,t)},n.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},n.prototype.transform=function(t,e){var i=this.internal,n=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;i.transformTo(e,t,n)},s.prototype.transformTo=function(t,e,i){var n=this,r=!n.hasArcType(),r=i||{withTransitionForAxis:r};r.withTransitionForTransform=!1,n.transiting=!1,n.setTargetType(t,e),n.updateTargets(n.data.targets),n.updateAndRedraw(r)},n.prototype.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},n.prototype.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},(n.prototype.zoom=function(t){var e=this.internal;return t?(e.isTimeSeries()&&(t=t.map(function(t){return e.parseDate(t)})),e.config.subchart_show?e.brush.selectionAsValue(t,!0):(e.updateXDomain(null,!0,!1,!1,t),e.redraw({withY:e.config.zoom_rescale,withSubchart:!1})),e.config.zoom_onzoom.call(this,e.x.orgDomain()),t):e.x.domain()}).enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},n.prototype.unzoom=function(){var t=this.internal;t.config.subchart_show?t.brush.clear():(t.updateXDomain(null,!0,!1,!1,t.subX.domain()),t.redraw({withY:t.config.zoom_rescale,withSubchart:!1}))},n.prototype.zoom.max=function(t){var e=this.internal,i=e.config,n=e.d3;if(0!==t&&!t)return i.zoom_x_max;i.zoom_x_max=n.max([e.orgXDomain[1],t])},n.prototype.zoom.min=function(t){var e=this.internal,i=e.config,n=e.d3;if(0!==t&&!t)return i.zoom_x_min;i.zoom_x_min=n.min([e.orgXDomain[0],t])},n.prototype.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};E(t.max)&&this.domain.max(t.max),E(t.min)&&this.domain.min(t.min)},s.prototype.initPie=function(){var t=this,e=t.d3;t.pie=e.pie().padAngle(this.getPadAngle.bind(this)).value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)});var i,e=t.getOrderFunction();e&&(t.isOrderAsc()||t.isOrderDesc())&&(i=e,e=function(t,e){return-1*i(t,e)}),t.pie.sort(e||null)},s.prototype.updateRadius=function(){var t=this,e=t.config,i=e.gauge_width||e.donut_width,e=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=i?(t.radius-i)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0,t.gaugeArcWidth=i||(e<=t.radius-t.innerRadius?t.radius-t.innerRadius:e<=t.radius?e:t.radius)},s.prototype.getPadAngle=function(){return this.hasType("pie")?this.config.pie_padAngle||0:this.hasType("donut")&&this.config.donut_padAngle||0},s.prototype.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},s.prototype.updateAngle=function(e){var t,i,n=this,r=n.config,a=!1,o=0;return r?(n.pie(n.filterTargetsToShow(n.data.targets)).forEach(function(t){a||t.data.id!==e.data.id||(a=!0,(e=t).index=o),o++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),n.isGaugeType(e.data)&&(i=r.gauge_min,t=r.gauge_max,n=Math.PI*(r.gauge_fullCircle?2:1)/(t-i),i=e.value<i?0:e.value<t?e.value-i:t-i,e.startAngle=r.gauge_startingAngle,e.endAngle=e.startAngle+n*i),a?e:null):null},s.prototype.getSvgArc=function(){function t(t,e){return e?r(t):(t=i.updateAngle(t))?r(t):"M 0 0"}var i=this,e=i.hasType("gauge"),n=i.gaugeArcWidth/i.filterTargetsToShow(i.data.targets).length,r=i.d3.arc().outerRadius(function(t){return e?i.radius-n*t.index:i.radius}).innerRadius(function(t){return e?i.radius-n*(t.index+1):i.innerRadius});return t.centroid=r.centroid,t},s.prototype.getSvgArcExpanded=function(e){e=e||1;var i=this,n=i.hasType("gauge"),r=i.gaugeArcWidth/i.filterTargetsToShow(i.data.targets).length,a=Math.min(i.radiusExpanded*e-i.radius,.8*r-100*(1-e)),o=i.d3.arc().outerRadius(function(t){return n?i.radius-r*t.index+a:i.radiusExpanded*e}).innerRadius(function(t){return n?i.radius-r*(t.index+1):i.innerRadius});return function(t){t=i.updateAngle(t);return t?o(t):"M 0 0"}},s.prototype.getArc=function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},s.prototype.transformForArcLabel=function(t){var e,i,n,r=this,a=r.config,o=r.updateAngle(t),s="",c=r.hasType("gauge");return o&&!c?(n=this.svgArc.centroid(o),e=isNaN(n[0])?0:n[0],i=isNaN(n[1])?0:n[1],n=Math.sqrt(e*e+i*i),s="translate("+e*(n=r.hasType("donut")&&a.donut_label_ratio?l(a.donut_label_ratio)?a.donut_label_ratio(t,r.radius,n):a.donut_label_ratio:r.hasType("pie")&&a.pie_label_ratio?l(a.pie_label_ratio)?a.pie_label_ratio(t,r.radius,n):a.pie_label_ratio:r.radius&&n?(.375<36/r.radius?1.175-36/r.radius:.8)*r.radius/n:0)+","+i*n+")"):o&&c&&1<r.filterTargetsToShow(r.data.targets).length&&(c=Math.sin(o.endAngle-Math.PI/2),s="translate("+(e=Math.cos(o.endAngle-Math.PI/2)*(r.radiusExpanded+25))+","+(i=c*(r.radiusExpanded+15-Math.abs(10*c))+3)+")"),s},s.prototype.getArcRatio=function(t){return this.getRatio("arc",t)},s.prototype.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},s.prototype.textForArcLabel=function(t){var e,i,n,r=this;return r.shouldShowArcLabel()?(e=(n=r.updateAngle(t))?n.value:null,i=r.getRatio("arc",n),n=t.data.id,r.hasType("gauge")||r.meetsArcLabelThreshold(i)?(t=r.getArcLabelFormat())?t(e,i,n):r.defaultArcValueFormat(e,i):""):""},s.prototype.textForGaugeMinMax=function(t,e){var i=this.getGaugeLabelExtents();return i?i(t,e):t},s.prototype.expandArc=function(t){var e,i=this;i.transiting?e=window.setInterval(function(){i.transiting||(window.clearInterval(e),0<i.legend.selectAll(".c3-legend-item-focused").size()&&i.expandArc(t))},10):(t=i.mapToTargetIds(t),i.svg.selectAll(i.selectorTargets(t,"."+R.chartArc)).each(function(t){i.shouldExpand(t.data.id)&&i.d3.select(this).selectAll("path").transition().duration(i.expandDuration(t.data.id)).attr("d",i.svgArcExpanded).transition().duration(2*i.expandDuration(t.data.id)).attr("d",i.svgArcExpandedSub).each(function(t){i.isDonutType(t.data)})}))},s.prototype.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+R.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+R.arc))},s.prototype.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},s.prototype.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},s.prototype.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},s.prototype.meetsArcLabelThreshold=function(t){var e=this.config;return(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)<=t},s.prototype.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},s.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},s.prototype.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},s.prototype.updateTargetsForArc=function(t){var e=this,i=e.main,n=e.classChartArc.bind(e),r=e.classArcs.bind(e),a=e.classFocus.bind(e);(t=i.select("."+R.chartArcs).selectAll("."+R.chartArc).data(e.pie(t)).attr("class",function(t){return n(t)+a(t.data)}).enter().append("g").attr("class",n)).append("g").attr("class",r),t.append("text").attr("dy",e.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},s.prototype.initArc=function(){var t=this;t.arcs=t.main.select("."+R.chart).append("g").attr("class",R.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",R.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},s.prototype.redrawArc=function(t,e,i){var n,r,a,c=this,d=c.d3,o=c.config,s=c.main,l=c.hasType("gauge"),u=(n=s.selectAll("."+R.arcs).selectAll("."+R.arc).data(c.arcData.bind(c))).enter().append("path").attr("class",c.classArc.bind(c)).style("fill",function(t){return c.color(t.data)}).style("cursor",function(t){return o.interaction_enabled&&o.data_selection_isselectable(t)?"pointer":null}).each(function(t){c.isGaugeType(t.data)&&(t.startAngle=t.endAngle=o.gauge_startingAngle),this._current=t}).merge(n);l&&(r=(r=s.selectAll("."+R.arcs).selectAll("."+R.arcLabelLine).data(c.arcData.bind(c))).enter().append("rect").attr("class",function(t){return R.arcLabelLine+" "+R.target+" "+R.target+"-"+t.data.id}).merge(r),1===c.filterTargetsToShow(c.data.targets).length?r.style("display","none"):r.style("fill",function(t){return c.levelColor?c.levelColor(t.data.values[0].value):c.color(t.data)}).style("display",o.gauge_labelLine_show?"":"none").each(function(t){var e,i,n,r=0,a=0,o=0,s="";c.hiddenTargetIds.indexOf(t.data.id)<0&&(n=c.updateAngle(t),e=c.gaugeArcWidth/c.filterTargetsToShow(c.data.targets).length*(n.index+1),n=(i=n.endAngle-Math.PI/2)-(0==(t=c.radius-e)?0:1/t),r=c.radiusExpanded-c.radius+e,a=Math.cos(n)*t,o=Math.sin(n)*t,s="rotate("+180*i/Math.PI+", "+a+", "+o+")"),d.select(this).attr("x",a).attr("y",o).attr("width",r).attr("height",2).attr("transform",s).style("stroke-dasharray","0, "+(r+2)+", 0")})),u.attr("transform",function(t){return!c.isGaugeType(t.data)&&i?"scale(0)":""}).on("mouseover",o.interaction_enabled?function(t){var e;c.transiting||(e=c.updateAngle(t))&&(t=c.convertToArcData(e),c.expandArc(e.data.id),c.api.focus(e.data.id),c.toggleFocusLegend(e.data.id,!0),c.config.data_onmouseover(t,this))}:null).on("mousemove",o.interaction_enabled?function(t){var t=c.updateAngle(t);t&&(t=[c.convertToArcData(t)],c.showTooltip(t,this))}:null).on("mouseout",o.interaction_enabled?function(t){var e;c.transiting||(e=c.updateAngle(t))&&(t=c.convertToArcData(e),c.unexpandArc(e.data.id),c.api.revert(),c.revertLegend(),c.hideTooltip(),c.config.data_onmouseout(t,this))}:null).on("click",o.interaction_enabled?function(t,e){var t=c.updateAngle(t);t&&(t=c.convertToArcData(t),c.toggleShape&&c.toggleShape(this,t,e),c.config.data_onclick.call(c.api,t,this))}:null).each(function(){c.transiting=!0}).transition().duration(t).attrTween("d",function(e){var i,t=c.updateAngle(e);return t?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),i=d.interpolate(this._current,t),this._current=i(0),function(t){if(null===c.config)return"M 0 0";t=i(t);return t.data=e.data,c.getArc(t,!0)}):function(){return"M 0 0"}}).attr("transform",i?"scale(1)":"").style("fill",function(t){return c.levelColor?c.levelColor(t.data.values[0].value):c.color(t.data.id)}).call(c.endall,function(){c.transiting=!1}),n.exit().transition().duration(e).style("opacity",0).remove(),s.selectAll("."+R.chartArc).select("text").style("opacity",0).attr("class",function(t){return c.isGaugeType(t.data)?R.gaugeValue:""}).text(c.textForArcLabel.bind(c)).attr("transform",c.transformForArcLabel.bind(c)).style("font-size",function(t){return c.isGaugeType(t.data)&&1===c.filterTargetsToShow(c.data.targets).length?Math.round(c.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return c.isTargetToShow(t.data.id)&&c.isArcType(t.data)?1:0}),s.select("."+R.chartArcsTitle).style("opacity",c.hasType("donut")||l?1:0),l&&(a=0,(l=c.arcs.select("g."+R.chartArcsBackground).selectAll("path."+R.chartArcsBackground).data(c.data.targets)).enter().append("path").attr("class",function(t,e){return R.chartArcsBackground+" "+R.chartArcsBackground+"-"+e}).merge(l).attr("d",function(t){if(0<=c.hiddenTargetIds.indexOf(t.id))return"M 0 0";t={data:[{value:o.gauge_max}],startAngle:o.gauge_startingAngle,endAngle:-1*o.gauge_startingAngle*(o.gauge_fullCircle?Math.PI:1),index:a++};return c.getArc(t,!0,!0)}),l.exit().remove(),c.arcs.select("."+R.chartArcsGaugeUnit).attr("dy",".75em").text(o.gauge_label_show?o.gauge_units:""),c.arcs.select("."+R.chartArcsGaugeMin).attr("dx",-1*(c.innerRadius+(c.radius-c.innerRadius)/(o.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(o.gauge_label_show?c.textForGaugeMinMax(o.gauge_min,!1):""),c.arcs.select("."+R.chartArcsGaugeMax).attr("dx",c.innerRadius+(c.radius-c.innerRadius)/(o.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(o.gauge_label_show?c.textForGaugeMinMax(o.gauge_max,!0):""))},s.prototype.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("g").attr("class",R.chartArcsBackground),t.append("text").attr("class",R.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",R.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",R.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},s.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},s.prototype.addToCache=function(t,e){this.cache["$".concat(t)]=e},s.prototype.getFromCache=function(t){return this.cache["$".concat(t)]},s.prototype.resetCache=function(){var e=this;Object.keys(this.cache).filter(function(t){return/^\$/.test(t)}).forEach(function(t){delete e.cache[t]})},s.prototype.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},s.prototype.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},s.prototype.getCaches=function(t){for(var e=[],i=0;i<t.length;i++)t[i]in this.cache&&e.push(this.cloneTarget(this.cache[t[i]]));return e},s.prototype.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},s.prototype.generateTargetClass=function(t){return t||0===t?("-"+t).replace(/\s/g,"-"):""},s.prototype.generateClass=function(t,e){return" "+t+" "+t+this.generateTargetClass(e)},s.prototype.classText=function(t){return this.generateClass(R.text,t.index)},s.prototype.classTexts=function(t){return this.generateClass(R.texts,t.id)},s.prototype.classShape=function(t){return this.generateClass(R.shape,t.index)},s.prototype.classShapes=function(t){return this.generateClass(R.shapes,t.id)},s.prototype.classLine=function(t){return this.classShape(t)+this.generateClass(R.line,t.id)},s.prototype.classLines=function(t){return this.classShapes(t)+this.generateClass(R.lines,t.id)},s.prototype.classCircle=function(t){return this.classShape(t)+this.generateClass(R.circle,t.index)},s.prototype.classCircles=function(t){return this.classShapes(t)+this.generateClass(R.circles,t.id)},s.prototype.classBar=function(t){return this.classShape(t)+this.generateClass(R.bar,t.index)},s.prototype.classBars=function(t){return this.classShapes(t)+this.generateClass(R.bars,t.id)},s.prototype.classArc=function(t){return this.classShape(t.data)+this.generateClass(R.arc,t.data.id)},s.prototype.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(R.arcs,t.data.id)},s.prototype.classArea=function(t){return this.classShape(t)+this.generateClass(R.area,t.id)},s.prototype.classAreas=function(t){return this.classShapes(t)+this.generateClass(R.areas,t.id)},s.prototype.classRegion=function(t,e){return this.generateClass(R.region,e)+" "+("class"in t?t.class:"")},s.prototype.classEvent=function(t){return this.generateClass(R.eventRect,t.index)},s.prototype.classTarget=function(t){var e=this.config.data_classes[t],e=e?" "+R.target+"-"+e:"";return this.generateClass(R.target,t)+e},s.prototype.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},s.prototype.classFocused=function(t){return" "+(0<=this.focusedTargetIds.indexOf(t.id)?R.focused:"")},s.prototype.classDefocused=function(t){return" "+(0<=this.defocusedTargetIds.indexOf(t.id)?R.defocused:"")},s.prototype.classChartText=function(t){return R.chartText+this.classTarget(t.id)},s.prototype.classChartLine=function(t){return R.chartLine+this.classTarget(t.id)},s.prototype.classChartBar=function(t){return R.chartBar+this.classTarget(t.id)},s.prototype.classChartArc=function(t){return R.chartArc+this.classTarget(t.data.id)},s.prototype.getTargetSelectorSuffix=function(t){t=this.generateTargetClass(t);return window.CSS&&window.CSS.escape?window.CSS.escape(t):t.replace(/([?!@#$%^&*()=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},s.prototype.selectorTarget=function(t,e){return(e||"")+"."+R.target+this.getTargetSelectorSuffix(t)},s.prototype.selectorTargets=function(t,e){var i=this;return(t=t||[]).length?t.map(function(t){return i.selectorTarget(t,e)}):null},s.prototype.selectorLegend=function(t){return"."+R.legendItem+this.getTargetSelectorSuffix(t)},s.prototype.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null},s.prototype.getClipPath=function(t){return"url("+(0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+t+")"},s.prototype.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},s.prototype.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},s.prototype.getAxisClipY=function(t){return t?-20:-this.margin.top},s.prototype.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},s.prototype.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},s.prototype.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},s.prototype.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},s.prototype.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),i=Math.max(30,this.margin.right);return t?this.width+2+e+i:this.margin.left+20},s.prototype.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},s.prototype.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},s.prototype.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},s.prototype.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},s.prototype.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},s.prototype.generateColor=function(){var t=this.config,e=this.d3,n=t.data_colors,r=m(t.color_pattern)?t.color_pattern:e.schemeCategory10,a=t.data_color,o=[];return function(t){var e,i=t.id||t.data&&t.data.id||t;return n[i]instanceof Function?e=n[i](t):n[i]?e=n[i]:(o.indexOf(i)<0&&o.push(i),e=r[o.indexOf(i)%r.length],n[i]=e),a instanceof Function?a(e,t):e}},s.prototype.generateLevelColor=function(){var t=this.config,n=t.color_pattern,t=t.color_threshold,r="value"===t.unit,a=t.values&&t.values.length?t.values:[],o=t.max||100;return m(t)&&m(n)?function(t){for(var e=n[n.length-1],i=0;i<a.length;i++)if((r?t:100*t/o)<a[i]){e=n[i];break}return e}:null},s.prototype.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_epochs:"epochs",data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_stack_normalize:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:"linear",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_type:"linear",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_padAngle:0,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",stanford_lines:[],stanford_regions:[],stanford_texts:[],stanford_scaleMin:void 0,stanford_scaleMax:void 0,stanford_scaleWidth:void 0,stanford_scaleFormat:void 0,stanford_scaleValues:void 0,stanford_colors:void 0,stanford_padding:{top:0,right:0,bottom:0,left:0},regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_horizontal:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,i,n){return this.getTooltipContent?this.getTooltipContent(t,e,i,n):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},s.prototype.additionalConfig={},s.prototype.loadConfig=function(e){var i,n,r,a=this.config;Object.keys(a).forEach(function(t){i=e,n=t.split("_"),r=function t(){var e=n.shift();return e&&i&&"object"===o(i)&&e in i?(i=i[e],t()):e?void 0:i}(),E(r)&&(a[t]=r)})},s.prototype.convertUrlToData=function(t,e,i,n,r){var a,o=this,e=e||"csv",s="json"===e?(a=o.d3.json,o.convertJsonToData):(a="tsv"===e?o.d3.tsv:o.d3.csv,o.convertXsvToData);a(t,i).then(function(t){r.call(o,s.call(o,t,n))}).catch(function(t){throw t})},s.prototype.convertXsvToData=function(t){var e=t.columns;return 0===t.length?{keys:e,rows:[e.reduce(function(t,e){return Object.assign(t,((t=e)in(e={})?Object.defineProperty(e,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):e[t]=null,e))},{})]}:{keys:e,rows:[].concat(t)}},s.prototype.convertJsonToData=function(e,t){var n,r=this,a=[];return t?(t.x?(n=t.value.concat(t.x),r.config.data_x=t.x):n=t.value,a.push(n),e.forEach(function(e){var i=[];n.forEach(function(t){t=r.findValueInJson(e,t);w(t)&&(t=null),i.push(t)}),a.push(i)}),r.convertRowsToData(a)):(Object.keys(e).forEach(function(t){a.push([t].concat(e[t]))}),r.convertColumnsToData(a))},s.prototype.findValueInJson=function(t,e){for(var i=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),n=0;n<i.length;++n){var r=i[n];if(!(r in t))return;t=t[r]}return t},s.prototype.convertRowsToData=function(t){for(var e=[],i=t[0],n=1;n<t.length;n++){for(var r={},a=0;a<t[n].length;a++){if(w(t[n][a]))throw new Error("Source data is missing a component at ("+n+","+a+")!");r[i[a]]=t[n][a]}e.push(r)}return{keys:i,rows:e}},s.prototype.convertColumnsToData=function(t){for(var e=[],i=[],n=0;n<t.length;n++){for(var r=t[n][0],a=1;a<t[n].length;a++){if(w(e[a-1])&&(e[a-1]={}),w(t[n][a]))throw new Error("Source data is missing a component at ("+n+","+a+")!");e[a-1][r]=t[n][a]}i.push(r)}return{keys:i,rows:e}},s.prototype.convertDataToTargets=function(t,n){var e,r,i,c,d=this,l=d.config;if(u(t)?i=Object.keys(t[0]):(i=t.keys,t=t.rows),r=i.filter(d.isX,d),d.isStanfordGraphType()){if(c=i.filter(d.isEpochs,d),e=i.filter(d.isNotXAndNotEpochs,d),1!==r.length||1!==c.length||1!==e.length)throw new Error("You must define the 'x' key name and the 'epochs' for Stanford Diagrams")}else e=i.filter(d.isNotX,d);return e.forEach(function(i){var e=d.getXKey(i);d.isCustomX()||d.isTimeSeries()?0<=r.indexOf(e)?d.data.xs[i]=(n&&d.data.xs[i]?d.data.xs[i]:[]).concat(t.map(function(t){return t[e]}).filter(y).map(function(t,e){return d.generateTargetX(t,i,e)})):l.data_x?d.data.xs[i]=d.getOtherTargetXs():m(l.data_xs)&&(d.data.xs[i]=d.getXValuesOfXKey(e,d.data.targets)):d.data.xs[i]=t.map(function(t,e){return e})}),e.forEach(function(t){if(!d.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),(e=e.map(function(a,o){var s=l.data_idConverter(a);return{id:s,id_org:a,values:t.map(function(t,e){var i,n=t[d.getXKey(a)],r=null===t[a]||isNaN(t[a])?null:+t[a];return d.isCustomX()&&d.isCategorized()&&!w(n)?(0===o&&0===e&&(l.axis_x_categories=[]),-1===(i=l.axis_x_categories.indexOf(n))&&(i=l.axis_x_categories.length,l.axis_x_categories.push(n))):i=d.generateTargetX(n,a,e),r={x:i=w(t[a])||d.data.xs[a].length<=e?void 0:i,value:r,id:s},d.isStanfordGraphType()&&(r.epochs=t[c]),r}).filter(function(t){return E(t.x)})}})).forEach(function(t){var e;l.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),e=0,t.values.forEach(function(t){t.index=e++}),d.data.xs[t.id].sort(function(t,e){return t-e})}),d.hasNegativeValue=d.hasNegativeValueInTargets(e),d.hasPositiveValue=d.hasPositiveValueInTargets(e),l.data_type&&d.setTargetType(d.mapToIds(e).filter(function(t){return!(t in l.data_types)}),l.data_type),e.forEach(function(t){d.addCache(t.id_org,t)}),e},s.prototype.isEpochs=function(t){var e=this.config;return e.data_epochs&&t===e.data_epochs},s.prototype.isX=function(t){var e,i,n,r=this.config;return r.data_x&&t===r.data_x||m(r.data_xs)&&(e=r.data_xs,i=t,n=!1,Object.keys(e).forEach(function(t){e[t]===i&&(n=!0)}),n)},s.prototype.isNotX=function(t){return!this.isX(t)},s.prototype.isNotXAndNotEpochs=function(t){return!this.isX(t)&&!this.isEpochs(t)},s.prototype.isStackNormalized=function(){return this.config.data_stack_normalize&&0<this.config.data_groups.length},s.prototype.isAxisNormalized=function(e){var i=this;return!!i.isStackNormalized()&&i.data.targets.filter(function(t){return i.axis.getId(t.id)===e}).some(function(t){return i.isTargetNormalized(t.id)})},s.prototype.isTargetNormalized=function(e){return this.isStackNormalized()&&this.config.data_groups.some(function(t){return t.includes(e)})},s.prototype.getXKey=function(t){var e=this.config;return e.data_x||(m(e.data_xs)?e.data_xs[t]:null)},s.prototype.getTotalPerIndex=function(t){var e=this;if(!e.isStackNormalized())return null;var i=e.getFromCache("getTotalPerIndex");if(void 0!==i)return i[t];var n={y:[],y2:[]};return e.data.targets.filter(function(t){return e.isTargetNormalized(t.id)}).filter(function(t){return e.isTargetToShow(t.id)}).forEach(function(t){var i=n[e.axis.getId(t.id)];t.values.forEach(function(t,e){i[e]||(i[e]=0),i[e]+=h(t.value)?t.value:0})}),e.addToCache("getTotalPerIndex",n),n[t]},s.prototype.getTotalDataSum=function(){var e=this,t=e.getFromCache("getTotalDataSum");if(void 0!==t)return t;var i=(t=e.data.targets.filter(function(t){return e.isTargetToShow(t.id)}).map(function(t){return t.values}),(Array.isArray(t)?(i=[]).concat.apply(i,function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(i=t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()):[]).map(function(t){return t.value}).reduce(function(t,e){return t+e},0));return e.addToCache("getTotalDataSum",i),i},s.prototype.getXValuesOfXKey=function(e,t){var i,n=this;return(t&&m(t)?n.mapToIds(t):[]).forEach(function(t){n.getXKey(t)===e&&(i=n.data.xs[t])}),i},s.prototype.getXValue=function(t,e){return t in this.data.xs&&this.data.xs[t]&&y(this.data.xs[t][e])?this.data.xs[t][e]:e},s.prototype.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},s.prototype.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},s.prototype.addXs=function(e){var i=this;Object.keys(e).forEach(function(t){i.config.data_xs[t]=e[t]})},s.prototype.addName=function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},s.prototype.getValueOnIndex=function(t,e){t=t.filter(function(t){return t.index===e});return t.length?t[0]:null},s.prototype.updateTargetX=function(t,n){var r=this;t.forEach(function(i){i.values.forEach(function(t,e){t.x=r.generateTargetX(n[e],i.id,e)}),r.data.xs[i.id]=n})},s.prototype.updateTargetXs=function(t,e){var i=this;t.forEach(function(t){e[t.id]&&i.updateTargetX([t],e[t.id])})},s.prototype.generateTargetX=function(t,e,i){var n=this;return n.isTimeSeries()?t?n.parseDate(t):n.parseDate(n.getXValue(e,i)):n.isCustomX()&&!n.isCategorized()?y(t)?+t:n.getXValue(e,i):i},s.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},s.prototype.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(t){return t.values.length})},s.prototype.mapToIds=function(t){return t.map(function(t){return t.id})},s.prototype.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},s.prototype.hasTarget=function(t,e){for(var i=this.mapToIds(t),n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},s.prototype.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},s.prototype.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},s.prototype.getTargetsToShow=function(){return this.filterTargetsToShow(this.data.targets)},s.prototype.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},s.prototype.mapTargetsToUniqueXs=function(t){t=this.d3.set(this.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return(t=this.isTimeSeries()?t.map(function(t){return new Date(+t)}):t.map(function(t){return+t})).sort(function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN})},s.prototype.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenTargetIds.indexOf(t[e])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]));this.resetCache()},s.prototype.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0}),this.resetCache()},s.prototype.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenLegendIds.indexOf(t[e])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},s.prototype.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},s.prototype.getValuesAsIdKeyed=function(t){var i={};return t.forEach(function(e){i[e.id]=[],e.values.forEach(function(t){i[e.id].push(t.value)})}),i},s.prototype.checkValueInTargets=function(t,e){for(var i,n,r=Object.keys(t),a=0;a<r.length;a++)for(n=t[r[a]].values,i=0;i<n.length;i++)if(e(n[i].value))return!0;return!1},s.prototype.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t<0})},s.prototype.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return 0<t})},s.prototype.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},s.prototype.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},s.prototype.getOrderFunction=function(){var t=this.config,i=this.isOrderAsc(),e=this.isOrderDesc();if(i||e){var n=function(t,e){return t+Math.abs(e.value)};return function(t,e){t=t.values.reduce(n,0),e=e.values.reduce(n,0);return i?e-t:t-e}}if(l(t.data_order))return t.data_order;if(u(t.data_order)){var r=t.data_order;return function(t,e){return r.indexOf(t.id)-r.indexOf(e.id)}}},s.prototype.orderTargets=function(t){var e=this.getOrderFunction();return e&&t.sort(e),t},s.prototype.filterByIndex=function(t,e){return this.d3.merge(t.map(function(t){return t.values.filter(function(t){return t.index===e})}))},s.prototype.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},s.prototype.filterRemoveNull=function(t){return t.filter(function(t){return y(t.value)})},s.prototype.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},s.prototype.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!==o(t.data_labels)||!m(t.data_labels))},s.prototype.getDataLabelLength=function(t,e,i){var n=this,r=[0,0];return n.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return n.dataLabelFormat(t.id)(t)}).each(function(t,e){r[e]=1.3*c(this)[i]}).remove(),r},s.prototype.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},s.prototype.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},s.prototype.findClosestFromTargets=function(t,e){var i=this,t=t.map(function(t){return i.findClosest(t.values,e,(i.config.tooltip_horizontal?i.horizontalDistance:i.dist).bind(i),i.config.point_sensitivity)}).filter(function(t){return t});return 0===t.length?void 0:1===t.length?t[0]:i.findClosest(t,e,i.dist.bind(i))},s.prototype.findClosestFromTargetsByX=function(t,i){var n,r;return t.forEach(function(t){t.values.forEach(function(t){var e=Math.abs(i-t.x);(void 0===r||e<r)&&(n=t,r=e)})}),n},s.prototype.findClosest=function(t,i,n){var r,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1/0,o=this;return t.filter(function(t){return t&&o.isBarType(t.id)}).forEach(function(t){var e;r||(e=o.main.select("."+R.bars+o.getTargetSelectorSuffix(t.id)+" ."+R.bar+"-"+t.index).node(),o.isWithinBar(i,e)&&(r=t))}),t.filter(function(t){return t&&!o.isBarType(t.id)}).forEach(function(t){var e=n(t,i);e<a&&(a=e,r=t)}),r},s.prototype.dist=function(t,e){var i=this.config,n=i.axis_rotated?1:0,r=i.axis_rotated?0:1,i=this.circleY(t,t.index),t=this.x(t.x);return Math.sqrt(Math.pow(t-e[n],2)+Math.pow(i-e[r],2))},s.prototype.horizontalDistance=function(t,e){var i=this.config.axis_rotated?1:0,t=this.x(t.x);return Math.abs(t-e[i])},s.prototype.convertValuesToStep=function(t){var e,i=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)i[e]=i[e-1];return i[0]={x:i[0].x-1,value:i[0].value,id:i[0].id},i[t.length+1]={x:i[t.length].x+1,value:i[t.length].value,id:i[t.length].id},i},s.prototype.getRatio=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=this,r=n.api,a=0;return e&&r.data.shown.call(r).length&&(a=e.ratio||e.value,"arc"===t?a=n.hasType("gauge")?(e.endAngle-e.startAngle)/(Math.PI*(n.config.gauge_fullCircle?2:1)):(r=n.getTotalDataSum(),e.value/r):"index"===t&&(n=n.getTotalPerIndex(n.axis.getId(e.id)),e.ratio=h(e.value)&&n&&0<n[e.index]?e.value/n[e.index]:0,a=e.ratio)),i&&a?100*a:a},s.prototype.updateDataAttributes=function(t,e){var i=this.config["data_"+t];return void 0===e||(Object.keys(e).forEach(function(t){i[t]=e[t]}),this.redraw({withLegend:!0})),i},s.prototype.load=function(i,n){var r=this;i&&(n.filter&&(i=i.filter(n.filter)),(n.type||n.types)&&i.forEach(function(t){var e=n.types&&n.types[t.id]?n.types[t.id]:n.type;r.setTargetType(t.id,e)}),r.data.targets.forEach(function(t){for(var e=0;e<i.length;e++)if(t.id===i[e].id){t.values=i[e].values,i.splice(e,1);break}}),r.data.targets=r.data.targets.concat(i)),r.updateTargets(r.data.targets),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.done&&n.done()},s.prototype.loadFromArgs=function(e){var i=this;i.resetCache(),e.data?i.load(i.convertDataToTargets(e.data),e):e.url?i.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(t){i.load(i.convertDataToTargets(t),e)}):e.json?i.load(i.convertDataToTargets(i.convertJsonToData(e.json,e.keys)),e):e.rows?i.load(i.convertDataToTargets(i.convertRowsToData(e.rows)),e):e.columns?i.load(i.convertDataToTargets(i.convertColumnsToData(e.columns)),e):i.load(null,e)},s.prototype.unload=function(t,e){var i=this;i.resetCache(),e=e||function(){},(t=t.filter(function(t){return i.hasTarget(i.data.targets,t)}))&&0!==t.length?(i.svg.selectAll(t.map(function(t){return i.selectorTarget(t)})).transition().style("opacity",0).remove().call(i.endall,e),t.forEach(function(e){i.withoutFadeIn[e]=!1,i.legend&&i.legend.selectAll("."+R.legendItem+i.getTargetSelectorSuffix(e)).remove(),i.data.targets=i.data.targets.filter(function(t){return t.id!==e})})):e()},s.prototype.getYDomainMin=function(t){var e,i,n,r,a,o,s=this,c=s.config,d=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0<c.data_groups.length)for(o=s.hasNegativeValueInTargets(t),e=0;e<c.data_groups.length;e++)if(0!==(r=c.data_groups[e].filter(function(t){return 0<=d.indexOf(t)})).length)for(n=r[0],o&&l[n]&&l[n].forEach(function(t,e){l[n][e]=t<0?t:0}),i=1;i<r.length;i++)a=r[i],l[a]&&l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(n)||!l[n]||o&&0<+t||(l[n][e]+=+t)});return s.d3.min(Object.keys(l).map(function(t){return s.d3.min(l[t])}))},s.prototype.getYDomainMax=function(t){var e,i,n,r,a,o,s=this,c=s.config,d=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0<c.data_groups.length)for(o=s.hasPositiveValueInTargets(t),e=0;e<c.data_groups.length;e++)if(0!==(r=c.data_groups[e].filter(function(t){return 0<=d.indexOf(t)})).length)for(n=r[0],o&&l[n]&&l[n].forEach(function(t,e){l[n][e]=0<t?t:0}),i=1;i<r.length;i++)a=r[i],l[a]&&l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(n)||!l[n]||o&&+t<0||(l[n][e]+=+t)});return s.d3.max(Object.keys(l).map(function(t){return s.d3.max(l[t])}))},s.prototype.getYDomain=function(t,e,i){var n=this,r=n.config;if(n.isAxisNormalized(e))return[0,100];var a,o=t.filter(function(t){return n.axis.getId(t.id)===e}),s=i?n.filterByXDomain(o,i):o,c="y2"===e?r.axis_y2_min:r.axis_y_min,d="y2"===e?r.axis_y2_max:r.axis_y_max,l=n.getYDomainMin(s),u=n.getYDomainMax(s),h="y2"===e?r.axis_y2_center:r.axis_y_center,g=n.hasType("bar",s)&&r.bar_zerobased||n.hasType("area",s)&&r.area_zerobased,p="y2"===e?r.axis_y2_inverted:r.axis_y_inverted,f=n.hasDataLabel()&&r.axis_rotated,_=n.hasDataLabel()&&!r.axis_rotated,l=y(c)?c:!y(d)||l<d?l:d-10,u=y(d)?d:!y(c)||c<u?u:c+10;return 0===s.length?("y2"===e?n.y2:n.y).domain():((l=isNaN(l)?0:l)===(u=isNaN(u)?l:u)&&(l<0?u=0:l=0),t=0<=l&&0<=u,i=l<=0&&u<=0,(g=y(c)&&t||y(d)&&i?!1:g)&&(t&&(l=0),i&&(u=0)),c=s=.1*(o=Math.abs(u-l)),void 0!==h&&(u=h+(d=Math.max(Math.abs(l),Math.abs(u))),l=h-d),f?(a=n.getDataLabelLength(l,u,"width"),f=G(n.y.range()),c+=o*((f=[a[0]/f,a[1]/f])[1]/(1-f[0]-f[1])),s+=o*(f[0]/(1-f[0]-f[1]))):_&&(a=n.getDataLabelLength(l,u,"height"),c+=(_=n.getY(r["axis_".concat(e,"_type")],[0,r.axis_rotated?n.width:n.height],[0,o]))(a[1]),s+=_(a[0])),"y"===e&&m(r.axis_y_padding)&&(c=n.axis.getPadding(r.axis_y_padding,"top",c,o),s=n.axis.getPadding(r.axis_y_padding,"bottom",s,o)),"y2"===e&&m(r.axis_y2_padding)&&(c=n.axis.getPadding(r.axis_y2_padding,"top",c,o),s=n.axis.getPadding(r.axis_y2_padding,"bottom",s,o)),g&&(t&&(s=l),i&&(c=-u)),c=[l-s,u+c],p?c.reverse():c)},s.prototype.getXDomainMin=function(t){var e=this,i=e.config;return E(i.axis_x_min)?e.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},s.prototype.getXDomainMax=function(t){var e=this,i=e.config;return E(i.axis_x_max)?e.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},s.prototype.getXDomainPadding=function(t){var e,i,n=this.config,r=t[1]-t[0],r=this.isCategorized()?0:this.hasType("bar")?1<(t=this.getMaxDataCount())?r/(t-1)/2:.5:.01*r;return"object"===o(n.axis_x_padding)&&m(n.axis_x_padding)?(e=y(n.axis_x_padding.left)?n.axis_x_padding.left:r,i=y(n.axis_x_padding.right)?n.axis_x_padding.right:r):e=i="number"==typeof n.axis_x_padding?n.axis_x_padding:r,{left:e,right:i}},s.prototype.getXDomain=function(t){var e=this,i=[e.getXDomainMin(t),e.getXDomainMax(t)],n=i[0],r=i[1],a=e.getXDomainPadding(i),t=0,i=0;return n-r!=0||e.isCategorized()||(r=e.isTimeSeries()?(n=new Date(.5*n.getTime()),new Date(1.5*r.getTime())):(n=0===n?1:.5*n,0===r?-1:1.5*r)),[t=n||0===n?e.isTimeSeries()?new Date(n.getTime()-a.left):n-a.left:t,i=r||0===r?e.isTimeSeries()?new Date(r.getTime()+a.right):r+a.right:i]},s.prototype.updateXDomain=function(t,e,i,n,r){var a=this,o=a.config;return i&&(a.x.domain(r||a.d3.extent(a.getXDomain(t))),a.orgXDomain=a.x.domain(),o.zoom_enabled&&a.zoom.update(),a.subX.domain(a.x.domain()),a.brush&&a.brush.updateScale(a.subX)),e&&a.x.domain(r||(!a.brush||a.brush.empty()?a.orgXDomain:a.brush.selectionAsValue())),n&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},s.prototype.trimXDomain=function(t){var e=this.getZoomDomain(),i=e[0],e=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),e<=t[1]&&(t[0]=+t[0]-(t[1]-e),t[1]=e),t},s.prototype.drag=function(t){var e,i,n,u,h,g,p,f=this,r=f.config,a=f.main,_=f.d3;f.hasArcType()||r.data_selection_enabled&&r.data_selection_multiple&&(e=f.dragStart[0],i=f.dragStart[1],n=t[0],t=t[1],u=Math.min(e,n),h=Math.max(e,n),g=r.data_selection_grouped?f.margin.top:Math.min(i,t),p=r.data_selection_grouped?f.height:Math.max(i,t),a.select("."+R.dragarea).attr("x",u).attr("y",g).attr("width",h-u).attr("height",p-g),a.selectAll("."+R.shapes).selectAll("."+R.shape).filter(function(t){return r.data_selection_isselectable(t)}).each(function(t,e){var i,n,r,a,o,s=_.select(this),c=s.classed(R.SELECTED),d=s.classed(R.INCLUDED),l=!1;if(s.classed(R.circle))i=+s.attr("cx"),n=+s.attr("cy"),a=f.togglePoint,l=u<i&&i<h&&g<n&&n<p;else{if(!s.classed(R.bar))return;i=(o=x(this)).x,n=o.y,r=o.width,o=o.height,a=f.togglePath,l=!(h<i||i+r<u||p<n||n+o<g)}l^d&&(s.classed(R.INCLUDED,!d),s.classed(R.SELECTED,!c),a.call(f,!c,s,t,e))}))},s.prototype.dragstart=function(t){var e=this,i=e.config;e.hasArcType()||i.data_selection_enabled&&(e.dragStart=t,e.main.select("."+R.chart).append("rect").attr("class",R.dragarea).style("opacity",.1),e.dragging=!0)},s.prototype.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+R.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+R.shape).classed(R.INCLUDED,!1),t.dragging=!1)},s.prototype.getYFormat=function(t){var n=this,r=t&&!n.hasType("gauge")?n.defaultArcValueFormat:n.yFormat,a=t&&!n.hasType("gauge")?n.defaultArcValueFormat:n.y2Format;return function(t,e,i){return("y2"===n.axis.getId(i)?a:r).call(n,t,e)}},s.prototype.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format||this.defaultValueFormat)(t)},s.prototype.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format||this.defaultValueFormat)(t)},s.prototype.defaultValueFormat=function(t){return y(t)?+t:""},s.prototype.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},s.prototype.dataLabelFormat=function(t){function e(t){return y(t)?+t:""}var i=this.config.data_labels;return"function"==typeof i.format?i.format:"object"===o(i.format)?i.format[t]?!0===i.format[t]?e:i.format[t]:function(){return""}:e},s.prototype.initGrid=function(){var t=this,e=t.config,i=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",R.grid),e.grid_x_show&&t.grid.append("g").attr("class",R.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",R.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",R.xgridFocus).append("line").attr("class",R.xgridFocus),t.xgrid=i.selectAll([]),e.grid_lines_front||t.initGridLines()},s.prototype.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",R.grid+" "+R.gridLines),t.gridLines.append("g").attr("class",R.xgridLines),t.gridLines.append("g").attr("class",R.ygridLines),t.xgridLines=e.selectAll([])},s.prototype.updateXGrid=function(t){var e=this,i=e.config,n=e.d3,r=e.generateGridData(i.grid_x_type,e.x),a=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=i.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-a},y2:function(t){return e.x(t)-a}}:{x1:function(t){return e.x(t)+a},x2:function(t){return e.x(t)+a},y1:0,y2:e.height},e.xgridAttr.opacity=function(){return+n.select(this).attr(i.axis_rotated?"y1":"x1")===(i.axis_rotated?e.height:0)?0:1};var o=e.main.select("."+R.xgrids).selectAll("."+R.xgrid).data(r),r=o.enter().append("line").attr("class",R.xgrid).attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",0);e.xgrid=r.merge(o),t||e.xgrid.attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",e.xgridAttr.opacity),o.exit().remove()},s.prototype.updateYGrid=function(){var t=this,e=t.config,i=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks),n=t.main.select("."+R.ygrids).selectAll("."+R.ygrid).data(i),i=n.enter().append("line").attr("class",R.ygrid);t.ygrid=i.merge(n),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),n.exit().remove(),t.smoothLines(t.ygrid,"grid")},s.prototype.gridTextAnchor=function(t){return t.position||"end"},s.prototype.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},s.prototype.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},s.prototype.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},s.prototype.updateGrid=function(t){var e,i,n=this,r=n.main,a=n.config,o=n.xv.bind(n),s=n.yv.bind(n),c=n.xGridTextX.bind(n),d=n.yGridTextX.bind(n);n.grid.style("visibility",n.hasArcType()?"hidden":"visible"),r.select("line."+R.xgridFocus).style("visibility","hidden"),a.grid_x_show&&n.updateXGrid(),(e=(i=r.select("."+R.xgridLines).selectAll("."+R.xgridLine).data(a.grid_x_lines)).enter().append("g").attr("class",function(t){return R.xgridLine+(t.class?" "+t.class:"")})).append("line").attr("x1",a.axis_rotated?0:o).attr("x2",a.axis_rotated?n.width:o).attr("y1",a.axis_rotated?o:0).attr("y2",a.axis_rotated?o:n.height).style("opacity",0),e.append("text").attr("text-anchor",n.gridTextAnchor).attr("transform",a.axis_rotated?"":"rotate(-90)").attr("x",a.axis_rotated?d:c).attr("y",o).attr("dx",n.gridTextDx).attr("dy",-5).style("opacity",0),n.xgridLines=e.merge(i),i.exit().transition().duration(t).style("opacity",0).remove(),a.grid_y_show&&n.updateYGrid(),(r=(i=r.select("."+R.ygridLines).selectAll("."+R.ygridLine).data(a.grid_y_lines)).enter().append("g").attr("class",function(t){return R.ygridLine+(t.class?" "+t.class:"")})).append("line").attr("x1",a.axis_rotated?s:0).attr("x2",a.axis_rotated?s:n.width).attr("y1",a.axis_rotated?0:s).attr("y2",a.axis_rotated?n.height:s).style("opacity",0),r.append("text").attr("text-anchor",n.gridTextAnchor).attr("transform",a.axis_rotated?"rotate(-90)":"").attr("x",a.axis_rotated?c:d).attr("y",s).attr("dx",n.gridTextDx).attr("dy",-5).style("opacity",0),n.ygridLines=r.merge(i),n.ygridLines.select("line").transition().duration(t).attr("x1",a.axis_rotated?s:0).attr("x2",a.axis_rotated?s:n.width).attr("y1",a.axis_rotated?0:s).attr("y2",a.axis_rotated?n.height:s).style("opacity",1),n.ygridLines.select("text").transition().duration(t).attr("x",(a.axis_rotated?n.xGridTextX:n.yGridTextX).bind(n)).attr("y",s).text(function(t){return t.text}).style("opacity",1),i.exit().transition().duration(t).style("opacity",0).remove()},s.prototype.redrawGrid=function(t,e){var i=this,n=i.config,r=i.xv.bind(i),a=i.xgridLines.select("line"),o=i.xgridLines.select("text");return[(t?a.transition(e):a).attr("x1",n.axis_rotated?0:r).attr("x2",n.axis_rotated?i.width:r).attr("y1",n.axis_rotated?r:0).attr("y2",n.axis_rotated?r:i.height).style("opacity",1),(t?o.transition(e):o).attr("x",(n.axis_rotated?i.yGridTextX:i.xGridTextX).bind(i)).attr("y",r).text(function(t){return t.text}).style("opacity",1)]},s.prototype.showXGridFocus=function(t){var e=this,i=e.config,n=t.filter(function(t){return t&&y(t.value)}),r=e.main.selectAll("line."+R.xgridFocus),t=e.xx.bind(e);i.tooltip_show&&(e.hasType("stanford")||e.hasArcType()||(r.style("visibility","visible").data([n[0]]).attr(i.axis_rotated?"y1":"x1",t).attr(i.axis_rotated?"y2":"x2",t),e.smoothLines(r,"grid")))},s.prototype.hideXGridFocus=function(){this.main.select("line."+R.xgridFocus).style("visibility","hidden")},s.prototype.updateXgridFocus=function(){var t=this.config;this.main.select("line."+R.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},s.prototype.generateGridData=function(t,e){var i,n,r,a=[],o=this.main.select("."+R.axisX).selectAll(".tick").size();if("year"===t)for(t=(i=this.getXDomain())[0].getFullYear(),n=i[1].getFullYear(),r=t;r<=n;r++)a.push(new Date(r+"-01-01 00:00:00"));else(a=e.ticks(10)).length>o&&(a=a.filter(function(t){return(""+t).indexOf(".")<0}));return a},s.prototype.getGridFilterToRemove=function(t){return t?function(e){var i=!1;return[].concat(t).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(i=!0)}),i}:function(){return!0}},s.prototype.removeGridLines=function(t,e){function i(t){return!r(t)}var n=this.config,r=this.getGridFilterToRemove(t),t=e?R.xgridLine:R.ygridLine;this.main.select("."+(e?R.xgridLines:R.ygridLines)).selectAll("."+t).filter(r).transition().duration(n.transition_duration).style("opacity",0).remove(),e?n.grid_x_lines=n.grid_x_lines.filter(i):n.grid_y_lines=n.grid_y_lines.filter(i)},s.prototype.initEventRect=function(){var t=this,e=t.config;t.main.select("."+R.chart).append("g").attr("class",R.eventRects).style("fill-opacity",0),t.eventRect=t.main.select("."+R.eventRects).append("rect").attr("class",R.eventRect),e.zoom_enabled&&t.zoom&&(t.eventRect.call(t.zoom).on("dblclick.zoom",null),e.zoom_initialRange&&t.eventRect.transition().duration(0).call(t.zoom.transform,t.zoomTransform(e.zoom_initialRange)))},s.prototype.redrawEventRect=function(){var o=this,s=o.d3,c=o.config;function d(){o.svg.select("."+R.eventRect).style("cursor",null),o.hideXGridFocus(),o.hideTooltip(),o.unexpandCircles(),o.unexpandBars()}function l(t,e){return e&&(o.isBarType(e.id)||o.dist(e,t)<c.point_sensitivity)}function u(t){return t?o.addName(Object.assign({},t)):null}o.main.select("."+R.eventRects).style("cursor",c.zoom_enabled?c.axis_rotated?"ns-resize":"ew-resize":null),o.eventRect.attr("x",0).attr("y",0).attr("width",o.width).attr("height",o.height).on("mouseout",c.interaction_enabled?function(){c&&(o.hasArcType()||(o.mouseover&&(c.data_onmouseout.call(o.api,o.mouseover),o.mouseover=void 0),d()))}:null).on("mousemove",c.interaction_enabled?function(){if(!o.dragging){var t=o.getTargetsToShow();if(!o.hasArcType(t)){var e,i,n=s.mouse(this),r=u(o.findClosestFromTargets(t,n)),a=l(n,r);if(!o.mouseover||r&&r.id===o.mouseover.id&&r.index===o.mouseover.index||(c.data_onmouseout.call(o.api,o.mouseover),o.mouseover=void 0),r&&!o.mouseover&&(c.data_onmouseover.call(o.api,r),o.mouseover=r),o.svg.select("."+R.eventRect).style("cursor",a?"pointer":null),!c.tooltip_grouped||o.hasType("stanford",t)?r&&(e=[r]):(i=r||(i=c.axis_rotated?n[1]:n[0],o.findClosestFromTargetsByX(t,o.x.invert(i))))&&(e=o.filterByX(t,i.x)),!e||0===e.length)return d();e=e.map(u),o.showTooltip(e,this),c.point_focus_expand_enabled&&(o.unexpandCircles(),e.forEach(function(t){o.expandCircles(t.index,t.id,!1)})),o.unexpandBars(),e.forEach(function(t){o.expandBars(t.index,t.id,!1)}),o.showXGridFocus(e)}}}:null).on("click",c.interaction_enabled?function(){var t,e,i=o.getTargetsToShow();o.hasArcType(i)||(t=s.mouse(this),e=u(o.findClosestFromTargets(i,t)),l(t,e)&&((!c.data_selection_grouped||o.isStanfordType(e)?[e]:o.filterByX(i,e.x)).forEach(function(t){o.main.selectAll("."+R.shapes+o.getTargetSelectorSuffix(t.id)).selectAll("."+R.shape+"-"+t.index).each(function(){(c.data_selection_grouped||o.isWithinShape(this,t))&&o.toggleShape(this,t,t.index)})}),e&&(i=o.main.selectAll("."+R.shapes+o.getTargetSelectorSuffix(e.id)).select("."+R.shape+"-"+e.index),c.data_onclick.call(o.api,e,i.node()))))}:null).call(c.interaction_enabled&&c.data_selection_draggable&&o.drag?s.drag().on("drag",function(){o.drag(s.mouse(this))}).on("start",function(){o.dragstart(s.mouse(this))}).on("end",function(){o.dragend()}):function(){})},s.prototype.getMousePosition=function(t){return[this.x(t.x),this.getYScale(t.id)(t.value)]},s.prototype.dispatchEvent=function(t,e){var i=this.main.select("."+R.eventRect).node(),n=i.getBoundingClientRect(),r=n.left+(e?e[0]:0),n=n.top+(e?e[1]:0),e=document.createEvent("MouseEvents");e.initMouseEvent(t,!0,!0,window,0,r,n,r,n,!1,!1,!1,!1,0,null),i.dispatchEvent(e)},s.prototype.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},s.prototype.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},s.prototype.updateSizeForLegend=function(t,e){var i=this,n=i.config,n={top:i.isLegendTop?i.getCurrentPaddingTop()+n.legend_inset_y+5.5:i.currentHeight-t-i.getCurrentPaddingBottom()-n.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+n.legend_inset_x+.5:i.currentWidth-e-i.getCurrentPaddingRight()-n.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?n.top:i.currentHeight-t,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-e:i.isLegendInset?n.left:0}},s.prototype.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},s.prototype.updateLegendStep=function(t){this.legendStep=t},s.prototype.updateLegendItemWidth=function(t){this.legendItemWidth=t},s.prototype.updateLegendItemHeight=function(t){this.legendItemHeight=t},s.prototype.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},s.prototype.getLegendHeight=function(){var t=this,e=0;return e=t.config.legend_show?t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1):e},s.prototype.opacityForLegend=function(t){return t.classed(R.legendItemHidden)?null:1},s.prototype.opacityForUnfocusedLegend=function(t){return t.classed(R.legendItemHidden)?null:.3},s.prototype.toggleFocusLegend=function(e,t){var i=this;e=i.mapToTargetIds(e),i.legend.selectAll("."+R.legendItem).filter(function(t){return 0<=e.indexOf(t)}).classed(R.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,i.d3.select(this))})},s.prototype.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+R.legendItem).classed(R.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},s.prototype.showLegend=function(t){var e=this,i=e.config;i.legend_show||(i.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},s.prototype.hideLegend=function(t){var e=this,i=e.config;i.legend_show&&d(t)&&(i.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},s.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},s.prototype.updateLegend=function(d,t,e){var i,n,r,a,o,s,c,l,u,h,g,p,f=this,_=f.config,x=4,y=10,m=0,S=0,w=10,v=_.legend_item_tile_width+5,b=0,T={},A={},P={},C=[0],L={},V=0;function G(t,e,i){var n,r=0===i,a=i===d.length-1,i=(f.legendItemTextBox[i=e]||(f.legendItemTextBox[i]=f.getTextRect(t.textContent,R.legendItem,t)),f.legendItemTextBox[i]),a=i.width+v+(!a||f.isLegendRight||f.isLegendInset?y:0)+_.legend_padding,i=i.height+x,o=f.isLegendRight||f.isLegendInset?i:a,s=f.isLegendRight||f.isLegendInset?f.getLegendHeight():f.getLegendWidth();function c(t,e){e||(n=(s-b-o)/2)<w&&(n=(s-o)/2,b=0,V++),L[t]=V,C[V]=f.isLegendInset?10:n,T[t]=b,b+=o}r&&(S=m=V=b=0),!_.legend_show||f.isLegendToShow(e)?(A[e]=a,P[e]=i,(!m||m<=a)&&(m=a),(!S||S<=i)&&(S=i),i=f.isLegendRight||f.isLegendInset?S:m,_.legend_equally?(Object.keys(A).forEach(function(t){A[t]=m}),Object.keys(P).forEach(function(t){P[t]=S}),(n=(s-i*d.length)/2)<w?(V=b=0,d.forEach(function(t){c(t)})):c(e,!0)):c(e)):A[e]=P[e]=L[e]=T[e]=0}d=d.filter(function(t){return!E(_.data_names[t])||null!==_.data_names[t]}),l=I(t=t||{},"withTransition",!0),u=I(t,"withTransitionForTransform",!0),f.isLegendInset&&(V=_.legend_inset_step||d.length,f.updateLegendStep(V)),a=f.isLegendRight?(i=function(t){return m*L[t]},function(t){return C[L[t]]+T[t]}):f.isLegendInset?(i=function(t){return m*L[t]+10},function(t){return C[L[t]]+T[t]}):(i=function(t){return C[L[t]]+T[t]},function(t){return S*L[t]}),n=function(t,e){return i(t,e)+4+_.legend_item_tile_width},g=function(t,e){return a(t,e)+9},r=function(t,e){return i(t,e)},p=function(t,e){return a(t,e)-5},o=function(t,e){return i(t,e)-2},s=function(t,e){return i(t,e)-2+_.legend_item_tile_width},c=function(t,e){return a(t,e)+4},(h=f.legend.selectAll("."+R.legendItem).data(d).enter().append("g").attr("class",function(t){return f.generateClass(R.legendItem,t)}).style("visibility",function(t){return f.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){_.legend_item_onclick?_.legend_item_onclick.call(f,t):f.d3.event.altKey?(f.api.hide(),f.api.show(t)):(f.api.toggle(t),f.isTargetToShow(t)?f.api.focus(t):f.api.revert())}).on("mouseover",function(t){_.legend_item_onmouseover?_.legend_item_onmouseover.call(f,t):(f.d3.select(this).classed(R.legendItemFocused,!0),!f.transiting&&f.isTargetToShow(t)&&f.api.focus(t))}).on("mouseout",function(t){_.legend_item_onmouseout?_.legend_item_onmouseout.call(f,t):(f.d3.select(this).classed(R.legendItemFocused,!1),f.api.revert())})).append("text").text(function(t){return E(_.data_names[t])?_.data_names[t]:t}).each(function(t,e){G(this,t,e)}).style("pointer-events","none").attr("x",f.isLegendRight||f.isLegendInset?n:-200).attr("y",f.isLegendRight||f.isLegendInset?-200:g),h.append("rect").attr("class",R.legendItemEvent).style("fill-opacity",0).attr("x",f.isLegendRight||f.isLegendInset?r:-200).attr("y",f.isLegendRight||f.isLegendInset?-200:p),h.append("line").attr("class",R.legendItemTile).style("stroke",f.color).style("pointer-events","none").attr("x1",f.isLegendRight||f.isLegendInset?o:-200).attr("y1",f.isLegendRight||f.isLegendInset?-200:c).attr("x2",f.isLegendRight||f.isLegendInset?s:-200).attr("y2",f.isLegendRight||f.isLegendInset?-200:c).attr("stroke-width",_.legend_item_tile_height),t=f.legend.select("."+R.legendBackground+" rect"),f.isLegendInset&&0<m&&0===t.size()&&(t=f.legend.insert("g","."+R.legendItem).attr("class",R.legendBackground).append("rect")),h=f.legend.selectAll("text").data(d).text(function(t){return E(_.data_names[t])?_.data_names[t]:t}).each(function(t,e){G(this,t,e)}),(l?h.transition():h).attr("x",n).attr("y",g),g=f.legend.selectAll("rect."+R.legendItemEvent).data(d),(l?g.transition():g).attr("width",function(t){return A[t]}).attr("height",function(t){return P[t]}).attr("x",r).attr("y",p),p=f.legend.selectAll("line."+R.legendItemTile).data(d),(l?p.transition():p).style("stroke",f.levelColor?function(t){return f.levelColor(f.cache[t].values[0].value)}:f.color).attr("x1",o).attr("y1",c).attr("x2",s).attr("y2",c),t&&(l?t.transition():t).attr("height",f.getLegendHeight()-12).attr("width",m*(V+1)+10),f.legend.selectAll("."+R.legendItem).classed(R.legendItemHidden,function(t){return!f.isTargetToShow(t)}),f.updateLegendItemWidth(m),f.updateLegendItemHeight(S),f.updateLegendStep(V),f.updateSizes(),f.updateScales(),f.updateSvgSize(),f.transformAll(u,e),f.legendHasRendered=!0},s.prototype.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",R.regions)},s.prototype.updateRegion=function(t){var e=this,i=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible");var n=e.main.select("."+R.regions).selectAll("."+R.region).data(i.regions),i=n.enter().append("g");i.append("rect").attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)).style("fill-opacity",function(t){return y(t.opacity)?t.opacity:.1}),i.append("text").text(e.labelRegion.bind(e)),e.mainRegion=i.merge(n).attr("class",e.classRegion.bind(e)),n.exit().transition().duration(t).style("opacity",0).remove()},s.prototype.redrawRegion=function(t,e){var i=this,n=i.mainRegion,r=i.mainRegion.selectAll("text");return[(t?n.transition(e):n).attr("x",i.regionX.bind(i)).attr("y",i.regionY.bind(i)).attr("width",i.regionWidth.bind(i)).attr("height",i.regionHeight.bind(i)).style("fill-opacity",function(t){return y(t.opacity)?t.opacity:.1}),(t?r.transition(e):r).attr("x",i.labelOffsetX.bind(i)).attr("y",i.labelOffsetY.bind(i)).attr("transform",i.labelTransform.bind(i)).attr("style","text-anchor: left;")]},s.prototype.regionX=function(t){var e=this,i=e.config,n="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?i.axis_rotated&&"start"in t?n(t.start):0:!i.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},s.prototype.regionY=function(t){var e=this,i=e.config,n="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?!i.axis_rotated&&"end"in t?n(t.end):0:i.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},s.prototype.regionWidth=function(t){var e=this,i=e.config,n=e.regionX(t),r="y"===t.axis?e.y:e.y2;return(e="y"===t.axis||"y2"===t.axis?i.axis_rotated&&"end"in t?r(t.end):e.width:!i.axis_rotated&&"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.width)<n?0:e-n},s.prototype.regionHeight=function(t){var e=this,i=e.config,n=this.regionY(t),r="y"===t.axis?e.y:e.y2;return(e="y"===t.axis||"y2"===t.axis?!i.axis_rotated&&"start"in t?r(t.start):e.height:i.axis_rotated&&"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.height)<n?0:e-n},s.prototype.isRegionOnX=function(t){return!t.axis||"x"===t.axis},s.prototype.labelRegion=function(t){return"label"in t?t.label:""},s.prototype.labelTransform=function(t){return"vertical"in t&&t.vertical?"rotate(90)":""},s.prototype.labelOffsetX=function(t){var e="paddingX"in t?t.paddingX:3,i="paddingY"in t?t.paddingY:3;return"vertical"in t&&t.vertical?this.regionY(t)+i:this.regionX(t)+e},s.prototype.labelOffsetY=function(t){var e="paddingX"in t?t.paddingX:3,i="paddingY"in t?t.paddingY:3;return"vertical"in t&&t.vertical?-(this.regionX(t)+e):this.regionY(t)+10+i},s.prototype.getScale=function(t,e,i){return(i?this.d3.scaleTime():this.d3.scaleLinear()).range([t,e])},s.prototype.getX=function(t,e,i,n){var r,a=this.getScale(t,e,this.isTimeSeries()),o=i?a.domain(i):a,a=this.isCategorized()?(n=n||function(){return 0},function(t,e){t=o(t)+n(t);return e?t:Math.ceil(t)}):function(t,e){t=o(t);return e?t:Math.ceil(t)};for(r in o)a[r]=o[r];return a.orgDomain=function(){return o.domain()},this.isCategorized()&&(a.domain=function(t){return arguments.length?(o.domain(t),a):[(t=this.orgDomain())[0],t[1]+1]}),a},s.prototype.getY=function(t,e,i){var n;if("timeseries"===t||"time"===t)n=this.d3.scaleTime();else if("log"===t)n=function t(e,i,n){var r=[.01,10];function a(t){return n(i(t))}return i||(i=e.scaleLinear()).range(r),n||((n=e.scaleLog()).domain(r),n.nice()),a.domain=function(t){return arguments.length?(i.domain(t),a):i.domain()},a.range=function(t){return arguments.length?(n.range(t),a):n.range()},a.ticks=function(t){return function(t,e,i){var n,r,a,o;if(arguments.length<3)i=10;else if(0===i)return[];o=3/(r=i-1),a=-2,(n=new Array(i))[0]=Math.pow(10,a);for(var s=1;s<r;s++)a+=o,n[s]=Math.pow(10,a);return n[r]=Math.pow(10,1),n}(-2,1,t||10).map(function(t){return i.invert(t)})},a.copy=function(){return t(e,i.copy(),n.copy())},a}(this.d3);else{if("linear"!==t&&void 0!==t)throw new Error('Invalid Y axis type: "'.concat(t,'"'));n=this.d3.scaleLinear()}return e&&n.domain(e),i&&n.range(i),n},s.prototype.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},s.prototype.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},s.prototype.updateScales=function(){var e=this,t=e.config,i=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,i?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(t.axis_y_type,i?t.axis_y_default:e.y.domain(),[e.yMin,e.yMax]),e.y2=e.getY(t.axis_y2_type,i?t.axis_y2_default:e.y2.domain(),[e.yMin,e.yMax]),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(t.axis_y_type,i?t.axis_y_default:e.subY.domain(),[e.subYMin,e.subYMax]),e.subY2=e.getY(t.axis_y2_type,i?t.axis_y2_default:e.subY2.domain(),[e.subYMin,e.subYMax]),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis("y",e.y,e.yOrient,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis("y2",e.y2,e.y2Orient,e.y2AxisTickValues,t.axis_y2_tick_outer),i||e.brush&&e.brush.updateScale(e.subX),e.updateArc&&e.updateArc()},s.prototype.selectPoint=function(t,e,i){var n=this,r=n.config,a=(r.axis_rotated?n.circleY:n.circleX).bind(n),o=(r.axis_rotated?n.circleX:n.circleY).bind(n),s=n.pointSelectR.bind(n);r.data_onselected.call(n.api,e,t.node()),n.main.select("."+R.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+R.selectedCircle+"-"+i).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(R.selectedCircle,i)}).attr("cx",a).attr("cy",o).attr("stroke",function(){return n.color(e)}).attr("r",function(t){return 1.4*n.pointSelectR(t)}).transition().duration(100).attr("r",s)},s.prototype.unselectPoint=function(t,e,i){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+R.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+R.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},s.prototype.togglePoint=function(t,e,i,n){t?this.selectPoint(e,i,n):this.unselectPoint(e,i,n)},s.prototype.selectPath=function(t,e){var i=this;i.config.data_onselected.call(i,e,t.node()),i.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return i.d3.rgb(i.color(e)).brighter(.75)})},s.prototype.unselectPath=function(t,e){var i=this;i.config.data_onunselected.call(i,e,t.node()),i.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return i.color(e)})},s.prototype.togglePath=function(t,e,i,n){t?this.selectPath(e,i,n):this.unselectPath(e,i,n)},s.prototype.getToggle=function(t,e){var i;return"circle"===t.nodeName?i=this.isStepType(e)?function(){}:this.togglePoint:"path"===t.nodeName&&(i=this.togglePath),i},s.prototype.toggleShape=function(t,e,i){var n=this,r=n.d3,a=n.config,o=r.select(t),s=o.classed(R.SELECTED),c=n.getToggle(t,e).bind(n);a.data_selection_enabled&&a.data_selection_isselectable(e)&&(a.data_selection_multiple||n.main.selectAll("."+R.shapes+(a.data_selection_grouped?n.getTargetSelectorSuffix(e.id):"")).selectAll("."+R.shape).each(function(t,e){var i=r.select(this);i.classed(R.SELECTED)&&c(!1,i.classed(R.SELECTED,!1),t,e)}),o.classed(R.SELECTED,!s),c(!s,o,e,i))},s.prototype.initBar=function(){this.main.select("."+R.chart).append("g").attr("class",R.chartBars)},s.prototype.updateTargetsForBar=function(t){var e=this,i=e.config,n=e.classChartBar.bind(e),r=e.classBars.bind(e),a=e.classFocus.bind(e);e.main.select("."+R.chartBars).selectAll("."+R.chartBar).data(t).attr("class",function(t){return n(t)+a(t)}).enter().append("g").attr("class",n).style("pointer-events","none").append("g").attr("class",r).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null})},s.prototype.updateBar=function(t){function e(t){return i.color(t.id)}var i=this,n=i.barData.bind(i),r=i.classBar.bind(i),a=i.initialOpacity.bind(i),n=i.main.selectAll("."+R.bars).selectAll("."+R.bar).data(n),r=n.enter().append("path").attr("class",r).style("stroke",e).style("fill",e);i.mainBar=r.merge(n).style("opacity",a),n.exit().transition().duration(t).style("opacity",0)},s.prototype.redrawBar=function(t,e,i){var n=this;return[(e?this.mainBar.transition(i):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",function(t){return n.isTargetToShow(t.id)?1:0})]},s.prototype.getBarW=function(t,e){var i=this.config,e="number"==typeof i.bar_width?i.bar_width:e?t.tickInterval()*i.bar_width_ratio/e:0;return i.bar_width_max&&e>i.bar_width_max?i.bar_width_max:e},s.prototype.getBars=function(t,e){return(e?this.main.selectAll("."+R.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+R.bar+(y(t)?"-"+t:""))},s.prototype.expandBars=function(t,e,i){i&&this.unexpandBars(),this.getBars(t,e).classed(R.EXPANDED,!0)},s.prototype.unexpandBars=function(t){this.getBars(t).classed(R.EXPANDED,!1)},s.prototype.generateDrawBar=function(t,e){var n=this.config,r=this.generateGetBarPoints(t,e);return function(t,e){var i=r(t,e),t=n.axis_rotated?1:0,e=n.axis_rotated?0:1;return"M "+i[0][t]+","+i[0][e]+" L"+i[1][t]+","+i[1][e]+" L"+i[2][t]+","+i[2][e]+" L"+i[3][t]+","+i[3][e]+" z"}},s.prototype.generateGetBarPoints=function(t,e){var a=this,i=e?a.subXAxis:a.xAxis,n=t.__max__+1,o=a.getBarW(i,n),s=a.getShapeX(o,n,t,!!e),c=a.getShapeY(!!e),d=a.getShapeOffset(a.isBarType,t,!!e),l=o*(a.config.bar_space/2),u=e?a.getSubYScale:a.getYScale;return function(t,e){var i=u.call(a,t.id)(0),n=d(t,e)||i,r=s(t),e=c(t);return a.config.axis_rotated&&(0<t.value&&e<i||t.value<0&&i<e)&&(e=i),[[r+l,n],[r+l,e-=i-n],[r+o-l,e],[r+o-l,n]]}},s.prototype.isWithinBar=function(t,e){return function(t,e,i){var n=2<arguments.length&&void 0!==i?i:0,r=e.x-n,a=e.x+e.width+n,i=e.y+e.height+n,n=e.y-n;return r<t[0]&&t[0]<a&&n<t[1]&&t[1]<i}(t,c(e),2)},s.prototype.getShapeIndices=function(t){var e,i,n=this.config,r={},a=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(e=0;e<n.data_groups.length;e++)if(!(n.data_groups[e].indexOf(t.id)<0))for(i=0;i<n.data_groups[e].length;i++)if(n.data_groups[e][i]in r){r[t.id]=r[n.data_groups[e][i]];break}w(r[t.id])&&(r[t.id]=a++)}),r.__max__=a-1,r},s.prototype.getShapeX=function(i,n,r,t){var a=t?this.subX:this.x;return function(t){var e=t.id in r?r[t.id]:0;return t.x||0===t.x?a(t.x)-i*(n/2-e):0}},s.prototype.getShapeY=function(e){var i=this;return function(t){return(e?i.getSubYScale(t.id):i.getYScale(t.id))(i.isTargetNormalized(t.id)?i.getRatio("index",t,!0):t.value)}},s.prototype.getShapeOffset=function(t,d,e){var l=this,i=l.orderTargets(l.filterTargetsToShow(l.data.targets.filter(t,l))),u=i.map(function(t){return t.id});return function(r,a){var o=e?l.getSubYScale(r.id):l.getYScale(r.id),s=o(0),c=s;return i.forEach(function(t){var e=l.isStepType(r)?l.convertValuesToStep(t.values):t.values,i=l.isTargetNormalized(r.id),n=e.map(function(t){return i?l.getRatio("index",t,!0):t.value});t.id!==r.id&&d[t.id]===d[r.id]&&u.indexOf(t.id)<u.indexOf(r.id)&&(!w(e[a])&&+e[a].x==+r.x||(a=-1,e.forEach(function(t,e){(t.x.constructor===Date?+t.x:t.x)===(r.x.constructor===Date?+r.x:r.x)&&(a=e)})),a in e&&0<=e[a].value*r.value&&(c+=o(n[a])-s))}),c}},s.prototype.isWithinShape=function(t,e){var i,n=this,r=n.d3.select(t);return n.isTargetToShow(e.id)?"circle"===t.nodeName?i=n.isStepType(e)?n.isWithinStep(t,n.getYScale(e.id)(e.value)):n.isWithinCircle(t,1.5*n.pointSelectR(e)):"path"===t.nodeName&&(i=!r.classed(R.bar)||n.isWithinBar(n.d3.mouse(t),t)):i=!1,i},s.prototype.getInterpolate=function(t){var e=this,i=e.d3,i={linear:i.curveLinear,"linear-closed":i.curveLinearClosed,basis:i.curveBasis,"basis-open":i.curveBasisOpen,"basis-closed":i.curveBasisClosed,bundle:i.curveBundle,cardinal:i.curveCardinal,"cardinal-open":i.curveCardinalOpen,"cardinal-closed":i.curveCardinalClosed,monotone:i.curveMonotoneX,step:i.curveStep,"step-before":i.curveStepBefore,"step-after":i.curveStepAfter};return e.isSplineType(t)?i[e.config.spline_interpolation_type]||i.cardinal:e.isStepType(t)?i[e.config.line_step_type]:i.linear},s.prototype.initLine=function(){this.main.select("."+R.chart).append("g").attr("class",R.chartLines)},s.prototype.updateTargetsForLine=function(t){var e,i=this,n=i.config,r=i.classChartLine.bind(i),a=i.classLines.bind(i),o=i.classAreas.bind(i),s=i.classCircles.bind(i),c=i.classFocus.bind(i);(e=i.main.select("."+R.chartLines).selectAll("."+R.chartLine).data(t).attr("class",function(t){return r(t)+c(t)}).enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none")).append("g").attr("class",a),e.append("g").attr("class",o),e.append("g").attr("class",function(t){return i.generateClass(R.selectedCircles,t.id)}),e.append("g").attr("class",s).style("cursor",function(t){return n.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(e){i.main.selectAll("."+R.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+R.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},s.prototype.updateLine=function(t){var e=this,i=e.main.selectAll("."+R.lines).selectAll("."+R.line).data(e.lineData.bind(e)),n=i.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);e.mainLine=n.merge(i).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),i.exit().transition().duration(t).style("opacity",0)},s.prototype.redrawLine=function(t,e,i){return[(e?this.mainLine.transition(i):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},s.prototype.generateDrawLine=function(t,o){function e(t){return(o?s.subxx:s.xx).call(s,t)}function i(t,e){return 0<c.data_groups.length?n(t,e)[0][1]:l.call(s,t.id)(t.value)}var s=this,c=s.config,d=s.d3.line(),n=s.generateGetLinePoints(t,o),l=o?s.getSubYScale:s.getYScale,d=c.axis_rotated?d.x(i).y(e):d.x(e).y(i);return c.line_connectNull||(d=d.defined(function(t){return null!=t.value})),function(t){var e=c.line_connectNull?s.filterRemoveNull(t.values):t.values,i=o?s.subX:s.x,n=l.call(s,t.id),r=0,a=0;return(s.isLineType(t)?c.data_regions[t.id]?s.lineWithRegions(e,i,n,c.data_regions[t.id]):(s.isStepType(t)&&(e=s.convertValuesToStep(e)),d.curve(s.getInterpolate(t))(e)):(e[0]&&(r=i(e[0].x),a=n(e[0].value)),c.axis_rotated?"M "+a+" "+r:"M "+r+" "+a))||"M 0 0"}},s.prototype.generateGetLinePoints=function(t,e){var a=this,o=a.config,i=t.__max__+1,s=a.getShapeX(0,i,t,!!e),c=a.getShapeY(!!e),d=a.getShapeOffset(a.isLineType,t,!!e),l=e?a.getSubYScale:a.getYScale;return function(t,e){var i=l.call(a,t.id)(0),n=d(t,e)||i,r=s(t),e=c(t);return[[r,(e=o.axis_rotated&&(0<t.value&&e<i||t.value<0&&i<e)?i:e)-(i-n)],[r,e-(i-n)],[r,e-(i-n)],[r,e-(i-n)]]}},s.prototype.lineWithRegions=function(t,a,o,e){var i,n,r,s,c,d,l,u,h,g,p,f=this,_=f.config,x="M",y=f.isCategorized()?.5:0,m=[];if(E(e))for(i=0;i<e.length;i++)m[i]={},w(e[i].start)?m[i].start=t[0].x:m[i].start=f.isTimeSeries()?f.parseDate(e[i].start):e[i].start,w(e[i].end)?m[i].end=t[t.length-1].x:m[i].end=f.isTimeSeries()?f.parseDate(e[i].end):e[i].end;function S(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}for(g=_.axis_rotated?function(t){return o(t.value)}:function(t){return a(t.x)},p=_.axis_rotated?function(t){return a(t.x)}:function(t){return o(t.value)},r=f.isTimeSeries()?function(t,e,i,n){var r=t.x.getTime(),e=e.x-t.x,t=new Date(r+e*i),e=new Date(r+e*(i+n));return S(_.axis_rotated?[[o(c(i)),a(t)],[o(c(i+n)),a(e)]]:[[a(t),o(c(i))],[a(e),o(c(i+n))]])}:function(t,e,i,n){return S(_.axis_rotated?[[o(c(i),!0),a(s(i))],[o(c(i+n),!0),a(s(i+n))]]:[[a(s(i),!0),o(c(i))],[a(s(i+n),!0),o(c(i+n))]])},i=0;i<t.length;i++){if(w(m)||!function(t,e){for(var i=0;i<e.length;i++)if(e[i].start<t&&t<=e[i].end)return 1}(t[i].x,m))x+=" "+g(t[i])+" "+p(t[i]);else for(s=f.getScale(t[i-1].x+y,t[i].x+y,f.isTimeSeries()),c=f.getScale(t[i-1].value,t[i].value),d=a(t[i].x)-a(t[i-1].x),l=o(t[i].value)-o(t[i-1].value),h=2*(u=2/Math.sqrt(Math.pow(d,2)+Math.pow(l,2))),n=u;n<=1;n+=h)x+=r(t[i-1],t[i],n,u);t[i].x}return x},s.prototype.updateArea=function(t){var e=this,i=e.d3,n=e.main.selectAll("."+R.areas).selectAll("."+R.area).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0});e.mainArea=r.merge(n).style("opacity",e.orgAreaOpacity),n.exit().transition().duration(t).style("opacity",0)},s.prototype.redrawArea=function(t,e,i){return[(e?this.mainArea.transition(i):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},s.prototype.generateDrawArea=function(t,e){function i(t){return(e?a.subxx:a.xx).call(a,t)}function n(t,e){return 0<o.data_groups.length?c(t,e)[0][1]:d.call(a,t.id)(a.getAreaBaseValue(t.id))}function r(t,e){return 0<o.data_groups.length?c(t,e)[1][1]:d.call(a,t.id)(t.value)}var a=this,o=a.config,s=a.d3.area(),c=a.generateGetAreaPoints(t,e),d=e?a.getSubYScale:a.getYScale,s=o.axis_rotated?s.x0(n).x1(r).y(i):s.x(i).y0(o.area_above?0:n).y1(r);return o.line_connectNull||(s=s.defined(function(t){return null!==t.value})),function(t){var e=o.line_connectNull?a.filterRemoveNull(t.values):t.values,i=0,n=0;return(a.isAreaType(t)?(a.isStepType(t)&&(e=a.convertValuesToStep(e)),s.curve(a.getInterpolate(t))(e)):(e[0]&&(i=a.x(e[0].x),n=a.getYScale(t.id)(e[0].value)),o.axis_rotated?"M "+n+" "+i:"M "+i+" "+n))||"M 0 0"}},s.prototype.getAreaBaseValue=function(){return 0},s.prototype.generateGetAreaPoints=function(t,e){var a=this,o=a.config,i=t.__max__+1,s=a.getShapeX(0,i,t,!!e),c=a.getShapeY(!!e),d=a.getShapeOffset(a.isAreaType,t,!!e),l=e?a.getSubYScale:a.getYScale;return function(t,e){var i=l.call(a,t.id)(0),n=d(t,e)||i,r=s(t),e=c(t);return[[r,n],[r,(e=o.axis_rotated&&(0<t.value&&e<i||t.value<0&&i<e)?i:e)-(i-n)],[r,e-(i-n)],[r,n]]}},s.prototype.updateCircle=function(t,e){var i=this,n=i.main.selectAll("."+R.circles).selectAll("."+R.circle).data(i.lineOrScatterOrStanfordData.bind(i)),e=n.enter().append("circle").attr("shape-rendering",i.isStanfordGraphType()?"crispEdges":"").attr("class",i.classCircle.bind(i)).attr("cx",t).attr("cy",e).attr("r",i.pointR.bind(i)).style("color",i.isStanfordGraphType()?i.getStanfordPointColor.bind(i):i.color);i.mainCircle=e.merge(n).style("opacity",i.isStanfordGraphType()?1:i.initialOpacityForCircle.bind(i)),n.exit().style("opacity",0)},s.prototype.redrawCircle=function(t,e,i,n){var r=this,a=r.main.selectAll("."+R.selectedCircle);return[(i?r.mainCircle.transition(n):r.mainCircle).style("opacity",this.opacityForCircle.bind(r)).style("color",r.isStanfordGraphType()?r.getStanfordPointColor.bind(r):r.color).attr("cx",t).attr("cy",e),(i?a.transition(n):a).attr("cx",t).attr("cy",e)]},s.prototype.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},s.prototype.updateCircleY=function(){var t,i,e=this;0<e.config.data_groups.length?(t=e.getShapeIndices(e.isLineType),i=e.generateGetLinePoints(t),e.circleY=function(t,e){return i(t,e)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},s.prototype.getCircles=function(t,e){return(e?this.main.selectAll("."+R.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+R.circle+(y(t)?"-"+t:""))},s.prototype.expandCircles=function(t,e,i){var n=this.pointExpandedR.bind(this);i&&this.unexpandCircles(),this.getCircles(t,e).classed(R.EXPANDED,!0).attr("r",n)},s.prototype.unexpandCircles=function(t){var e=this,i=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(R.EXPANDED)}).classed(R.EXPANDED,!1).attr("r",i)},s.prototype.pointR=function(t){var e=this.config;return this.isStepType(t)?0:l(e.point_r)?e.point_r(t):e.point_r},s.prototype.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?l(e.point_focus_expand_r)?e.point_focus_expand_r(t):e.point_focus_expand_r||1.75*this.pointR(t):this.pointR(t)},s.prototype.pointSelectR=function(t){var e=this.config;return l(e.point_select_r)?e.point_select_r(t):e.point_select_r||4*this.pointR(t)},s.prototype.isWithinCircle=function(t,e){var i=this.d3,n=i.mouse(t),i=i.select(t),t=+i.attr("cx"),i=+i.attr("cy");return Math.sqrt(Math.pow(t-n[0],2)+Math.pow(i-n[1],2))<e},s.prototype.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},s.prototype.getCurrentWidth=function(){var t=this.config;return t.size_width||this.getParentWidth()},s.prototype.getCurrentHeight=function(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},s.prototype.getCurrentPaddingTop=function(){var t=this.config,t=y(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(t+=this.getTitlePadding()),t},s.prototype.getCurrentPaddingBottom=function(){var t=this.config;return y(t.padding_bottom)?t.padding_bottom:0},s.prototype.getCurrentPaddingLeft=function(t){var e=this.config;return y(e.padding_left)?e.padding_left:e.axis_rotated?!e.axis_x_show||e.axis_x_inner?1:Math.max(r(this.getAxisWidthByAxisId("x",t)),40):!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:r(this.getAxisWidthByAxisId("y",t))},s.prototype.getCurrentPaddingRight=function(){var t=this,e=t.config,i=0,n=t.isLegendRight?t.getLegendWidth()+20:0,i=y(e.padding_right)?e.padding_right+1:e.axis_rotated?10+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):r(t.getAxisWidthByAxisId("y2"))+n;return t.colorScale&&t.colorScale.node()&&(i+=t.getColorScalePadding()),i},s.prototype.getParentRectValue=function(e){for(var i,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{i=n.getBoundingClientRect()[e]}catch(t){"width"===e&&(i=n.offsetWidth)}if(i)break;n=n.parentNode}return i},s.prototype.getParentWidth=function(){return this.getParentRectValue("width")},s.prototype.getParentHeight=function(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?+t.replace("px",""):0},s.prototype.getSvgLeft=function(t){var e=this,i=e.config,n=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,r=i.axis_rotated?R.axisX:R.axisY,i=e.main.select("."+r).node(),r=i&&n?i.getBoundingClientRect():{right:0},n=e.selectChart.node().getBoundingClientRect(),i=e.hasArcType(),t=r.right-n.left-(i?0:e.getCurrentPaddingLeft(t));return 0<t?t:0},s.prototype.getAxisWidthByAxisId=function(t,e){var i=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)},s.prototype.getHorizontalAxisHeight=function(t){var e=this,i=e.config,n=30;return"x"!==t||i.axis_x_show?"x"===t&&i.axis_x_height?i.axis_x_height:"y"!==t||i.axis_y_show?"y2"!==t||i.axis_y2_show?("x"===t&&!i.axis_rotated&&i.axis_x_tick_rotate&&(n=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(i.axis_x_tick_rotate))/180)),(n="y"===t&&i.axis_rotated&&i.axis_y_tick_rotate?30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(i.axis_y_tick_rotate))/180):n)+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!i.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},s.prototype.initBrush=function(t){var n=this,e=n.d3;return n.brush=(n.config.axis_rotated?e.brushY():e.brushX()).on("brush",function(){var t=e.event.sourceEvent;t&&"zoom"===t.type||n.redrawForBrush()}).on("end",function(){var t=e.event.sourceEvent;t&&"zoom"===t.type||n.brush.empty()&&t&&"end"!==t.type&&n.brush.clear()}),n.brush.updateExtent=function(){var t=this.scale.range(),t=n.config.axis_rotated?[[0,t[0]],[n.width2,t[1]]]:[[t[0],0],[t[1],n.height2]];return this.extent(t),this},n.brush.updateScale=function(t){return this.scale=t,this},n.brush.update=function(t){this.updateScale(t||n.subX).updateExtent(),n.context.select("."+R.brush).call(this)},n.brush.clear=function(){n.context.select("."+R.brush).call(n.brush.move,null)},n.brush.selection=function(){return e.brushSelection(n.context.select("."+R.brush).node())},n.brush.selectionAsValue=function(t,e){var i;return t?(n.context&&(i=[this.scale(t[0]),this.scale(t[1])],t=n.context.select("."+R.brush),e&&(t=t.transition()),n.brush.move(t,i)),[]):(i=n.brush.selection()||[0,0],[this.scale.invert(i[0]),this.scale.invert(i[1])])},n.brush.empty=function(){var t=n.brush.selection();return!t||t[0]===t[1]},n.brush.updateScale(t)},s.prototype.initSubchart=function(){var t=this,e=t.config,i=t.context=t.svg.append("g").attr("transform",t.getTranslate("context")),n=e.subchart_show?"visible":"hidden";i.style("visibility",n),i.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",R.chart),i.select("."+R.chart).append("g").attr("class",R.chartBars),i.select("."+R.chart).append("g").attr("class",R.chartLines),i.append("g").attr("clip-path",t.clipPath).attr("class",R.brush),t.axes.subx=i.append("g").attr("class",R.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis)},s.prototype.initSubchartBrush=function(){this.initBrush(this.subX).updateExtent(),this.context.select("."+R.brush).call(this.brush)},s.prototype.updateTargetsForSubchart=function(t){var e,i,n=this,r=n.context,a=n.config,o=n.classChartBar.bind(n),s=n.classBars.bind(n),c=n.classChartLine.bind(n),d=n.classLines.bind(n),l=n.classAreas.bind(n);a.subchart_show&&((e=(i=r.select("."+R.chartBars).selectAll("."+R.chartBar).data(t)).enter().append("g").style("opacity",0)).merge(i).attr("class",o),e.append("g").attr("class",s),(t=(s=r.select("."+R.chartLines).selectAll("."+R.chartLine).data(t)).enter().append("g").style("opacity",0)).merge(s).attr("class",c),t.append("g").attr("class",d),t.append("g").attr("class",l),r.selectAll("."+R.brush+" rect").attr(a.axis_rotated?"width":"height",a.axis_rotated?n.width2:n.height2))},s.prototype.updateBarForSubchart=function(t){var e=this,i=e.context.selectAll("."+R.bars).selectAll("."+R.bar).data(e.barData.bind(e)),n=i.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color);i.exit().transition().duration(t).style("opacity",0).remove(),e.contextBar=n.merge(i).style("opacity",e.initialOpacity.bind(e))},s.prototype.redrawBarForSubchart=function(t,e,i){(e?this.contextBar.transition(Math.random().toString()).duration(i):this.contextBar).attr("d",t).style("opacity",1)},s.prototype.updateLineForSubchart=function(t){var e=this,i=e.context.selectAll("."+R.lines).selectAll("."+R.line).data(e.lineData.bind(e)),n=i.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);i.exit().transition().duration(t).style("opacity",0).remove(),e.contextLine=n.merge(i).style("opacity",e.initialOpacity.bind(e))},s.prototype.redrawLineForSubchart=function(t,e,i){(e?this.contextLine.transition(Math.random().toString()).duration(i):this.contextLine).attr("d",t).style("opacity",1)},s.prototype.updateAreaForSubchart=function(t){var e=this,i=e.d3,n=e.context.selectAll("."+R.areas).selectAll("."+R.area).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0});n.exit().transition().duration(t).style("opacity",0).remove(),e.contextArea=r.merge(n).style("opacity",0)},s.prototype.redrawAreaForSubchart=function(t,e,i){(e?this.contextArea.transition(Math.random().toString()).duration(i):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},s.prototype.redrawSubchart=function(t,e,i,n,r,a,o){var s=this,c=s.d3,d=s.config;s.context.style("visibility",d.subchart_show?"visible":"hidden"),d.subchart_show&&(c.event&&"zoom"===c.event.type&&s.brush.selectionAsValue(s.x.orgDomain()),t&&(s.brush.empty()||s.brush.selectionAsValue(s.x.orgDomain()),r=s.generateDrawArea(r,!0),a=s.generateDrawBar(a,!0),o=s.generateDrawLine(o,!0),s.updateBarForSubchart(i),s.updateLineForSubchart(i),s.updateAreaForSubchart(i),s.redrawBarForSubchart(a,i,i),s.redrawLineForSubchart(o,i,i),s.redrawAreaForSubchart(r,i,i)))},s.prototype.redrawForBrush=function(){var t,e=this,i=e.x,n=e.d3;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),t=n.event.selection||e.brush.scale.range(),e.main.select("."+R.eventRect).call(e.zoom.transform,n.zoomIdentity.scale(e.width/(t[1]-t[0])).translate(-t[0],0)),e.config.subchart_onbrush.call(e.api,i.orgDomain())},s.prototype.transformContext=function(t,e){var i;e&&e.axisSubX?i=e.axisSubX:(i=this.context.select("."+R.axisX),t&&(i=i.transition())),this.context.attr("transform",this.getTranslate("context")),i.attr("transform",this.getTranslate("subx"))},s.prototype.getDefaultSelection=function(){var t=this,e=t.config,e=l(e.axis_x_selection)?e.axis_x_selection(t.getXDomain(t.data.targets)):e.axis_x_selection;return e=t.isTimeSeries()?[t.parseDate(e[0]),t.parseDate(e[1])]:e},s.prototype.initText=function(){this.main.select("."+R.chart).append("g").attr("class",R.chartTexts),this.mainText=this.d3.selectAll([])},s.prototype.updateTargetsForText=function(t){var e=this,i=e.classChartText.bind(e),n=e.classTexts.bind(e),r=e.classFocus.bind(e),e=e.main.select("."+R.chartTexts).selectAll("."+R.chartText).data(t),t=e.enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none");t.append("g").attr("class",n),t.merge(e).attr("class",function(t){return i(t)+r(t)})},s.prototype.updateText=function(t,e,i){var n=this,r=n.config,a=n.barOrLineData.bind(n),o=n.classText.bind(n),a=n.main.selectAll("."+R.texts).selectAll("."+R.text).data(a),e=a.enter().append("text").attr("class",o).attr("text-anchor",function(t){return r.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").attr("x",t).attr("y",e).style("fill",function(t){return n.color(t)}).style("fill-opacity",0);n.mainText=e.merge(a).text(function(t,e,i){return n.dataLabelFormat(t.id)(t.value,t.id,e,i)}),a.exit().transition().duration(i).style("fill-opacity",0).remove()},s.prototype.redrawText=function(t,e,i,n,r){return[(n?this.mainText.transition(r):this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]},s.prototype.getTextRect=function(t,e,i){var n,r=this.d3.select("body").append("div").classed("c3",!0),a=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),i=this.d3.select(i).style("font");return a.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",i).text(t).each(function(){n=c(this)}),r.remove(),n},s.prototype.generateXYForText=function(t,e,i,n){var r=this,a=r.generateGetAreaPoints(t,!1),o=r.generateGetBarPoints(e,!1),s=r.generateGetLinePoints(i,!1),c=n?r.getXForText:r.getYForText;return function(t,e){var i=r.isAreaType(t)?a:r.isBarType(t)?o:s;return c.call(r,i(t,e),t,this)}},s.prototype.getXForText=function(t,e,i){var n=this,r=c(i),t=n.config.axis_rotated?(i=n.isBarType(e)?4:6,t[2][1]+i*(e.value<0?-1:1)):n.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0];return null===e.value&&(t>n.width?t=n.width-r.width:t<0&&(t=4)),t},s.prototype.getYForText=function(t,e,i){var n,r=this,i=c(i);return r.config.axis_rotated?n=(t[0][0]+t[2][0]+.6*i.height)/2:(n=t[2][1],e.value<0||0===e.value&&!r.hasPositiveValue?(n+=i.height,r.isBarType(e)&&r.isSafari()?n-=3:!r.isBarType(e)&&r.isChrome()&&(n+=3)):n+=r.isBarType(e)?-3:-6),null!==e.value||r.config.axis_rotated||(n<i.height?n=i.height:n>this.height&&(n=this.height-4)),n},s.prototype.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},s.prototype.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},s.prototype.xForTitle=function(){var t=this,e=t.config,i=e.title_position||"left";return 0<=i.indexOf("right")?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:0<=i.indexOf("center")?Math.max((t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2,0):e.title_padding.left},s.prototype.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},s.prototype.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},s.prototype.drawColorScale=function(){var t,e,i,n=this,r=n.d3,a=n.config,o=n.data.targets[0],s=isNaN(a.stanford_scaleWidth)?20:a.stanford_scaleWidth;if(s<0)throw Error("Colorscale's barheight and barwidth must be greater than 0.");i=n.height-a.stanford_padding.bottom-a.stanford_padding.top,t=r.range(a.stanford_padding.bottom,i,5),e=r.scaleSequential(o.colors).domain([t[t.length-1],t[0]]),n.colorScale&&n.colorScale.remove(),n.colorScale=n.svg.append("g").attr("width",50).attr("height",i).attr("class",R.colorScale),n.colorScale.append("g").attr("transform","translate(0, ".concat(a.stanford_padding.top,")")).selectAll("bars").data(t).enter().append("rect").attr("y",function(t,e){return 5*e}).attr("x",0).attr("width",s).attr("height",5).attr("fill",function(t){return e(t)}),t=r.scaleLog().domain([o.minEpochs,o.maxEpochs]).range([t[0]+a.stanford_padding.top+t[t.length-1]+5-1,t[0]+a.stanford_padding.top]),t=r.axisRight(t),"pow10"===a.stanford_scaleFormat?t.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):l(a.stanford_scaleFormat)?t.tickFormat(a.stanford_scaleFormat):t.tickFormat(r.format("d")),l(a.stanford_scaleValues)&&t.tickValues(a.stanford_scaleValues(o.minEpochs,o.maxEpochs)),t=n.colorScale.append("g").attr("class","legend axis").attr("transform","translate(".concat(s,",0)")).call(t),"pow10"===a.stanford_scaleFormat&&t.selectAll(".tick text").text(null).filter(_).text(10).append("tspan").attr("dy","-.7em").text(function(t){return Math.round(Math.log(t)/Math.LN10)}),n.colorScale.attr("transform","translate(".concat(n.currentWidth-n.xForColorScale(),", 0)"))},s.prototype.xForColorScale=function(){return this.config.stanford_padding.right+c(this.colorScale.node()).width},s.prototype.getColorScalePadding=function(){return this.xForColorScale()+this.config.stanford_padding.left+20},s.prototype.isStanfordGraphType=function(){return"stanford"===this.config.data_type},s.prototype.initStanfordData=function(){var t,e,i=this.d3,n=this.config,r=this.data.targets[0];if(r.values.sort(b),t=r.values.map(function(t){return t.epochs}),e=isNaN(n.stanford_scaleMin)?i.min(t):n.stanford_scaleMin,(t=isNaN(n.stanford_scaleMax)?i.max(t):n.stanford_scaleMax)<e)throw Error("Number of minEpochs has to be smaller than maxEpochs");r.colors=l(n.stanford_colors)?n.stanford_colors:i.interpolateHslLong(i.hsl(250,1,.5),i.hsl(0,1,.5)),r.colorscale=i.scaleSequentialLog(r.colors).domain([e,t]),r.minEpochs=e,r.maxEpochs=t},s.prototype.getStanfordPointColor=function(t){return this.data.targets[0].colorscale(t.epochs)},s.prototype.getCentroid=function(t){for(var e,i,n,r=S(t),a=0,o=0,s=0,c=t.length-1;s<t.length;c=s,s+=1)i=t[s],n=t[c],e=i.x*n.y-n.x*i.y,a+=(i.x+n.x)*e,o+=(i.y+n.y)*e;return{x:a/(e=6*r),y:o/e}},s.prototype.getStanfordTooltipTitle=function(t){var e=this.axis.getLabelText("x"),i=this.axis.getLabelText("y");return"\n      <tr><th>".concat(e?f(e):"x","</th><th class='value'>").concat(t.x,"</th></tr>\n      <tr><th>").concat(i?f(i):"y","</th><th class='value'>").concat(t.value,"</th></tr>\n    ")},s.prototype.countEpochsInRegion=function(i){var t=this.data.targets[0],e=t.values.reduce(function(t,e){return t+Number(e.epochs)},0);return{value:t=t.values.reduce(function(t,e){return v(e,i)?t+Number(e.epochs):t},0),percentage:0!==t?(t/e*100).toFixed(1):0}};var S=function(t){for(var e,i,n=0,r=0,a=t.length-1;r<t.length;a=r,r+=1)e=t[r],i=t[a],n+=e.x*i.y,n-=e.y*i.x;return n/2},v=function(t,e){for(var i,n,r,a,o=t.x,s=t.value,c=!1,d=0,l=e.length-1;d<e.length;l=d++)i=e[d].x,n=e[d].y,a=e[l].x,s<n!=s<(r=e[l].y)&&o<(a-i)*(s-n)/(r-n)+i&&(c=!c);return c},b=function(t,e){return t.epochs<e.epochs?-1:t.epochs>e.epochs?1:0};return s.prototype.initStanfordElements=function(){var t=this;t.stanfordElements=t.main.select("."+R.chart).append("g").attr("class",R.stanfordElements),t.stanfordElements.append("g").attr("class",R.stanfordLines),t.stanfordElements.append("g").attr("class",R.stanfordTexts),t.stanfordElements.append("g").attr("class",R.stanfordRegions)},s.prototype.updateStanfordElements=function(t){var e,i,n=this,r=n.main,a=n.config,o=n.xvCustom.bind(n),s=n.yvCustom.bind(n),c=n.countEpochsInRegion.bind(n);(e=(i=r.select("."+R.stanfordLines).style("shape-rendering","geometricprecision").selectAll("."+R.stanfordLine).data(a.stanford_lines)).enter().append("g").attr("class",function(t){return R.stanfordLine+(t.class?" "+t.class:"")})).append("line").attr("x1",function(t){return a.axis_rotated?s(t,"value_y1"):o(t,"value_x1")}).attr("x2",function(t){return a.axis_rotated?s(t,"value_y2"):o(t,"value_x2")}).attr("y1",function(t){return a.axis_rotated?o(t,"value_x1"):s(t,"value_y1")}).attr("y2",function(t){return a.axis_rotated?o(t,"value_x2"):s(t,"value_y2")}).style("opacity",0),n.stanfordLines=e.merge(i),n.stanfordLines.select("line").transition().duration(t).attr("x1",function(t){return a.axis_rotated?s(t,"value_y1"):o(t,"value_x1")}).attr("x2",function(t){return a.axis_rotated?s(t,"value_y2"):o(t,"value_x2")}).attr("y1",function(t){return a.axis_rotated?o(t,"value_x1"):s(t,"value_y1")}).attr("y2",function(t){return a.axis_rotated?o(t,"value_x2"):s(t,"value_y2")}).style("opacity",1),i.exit().transition().duration(t).style("opacity",0).remove(),(i=(e=r.select("."+R.stanfordTexts).selectAll("."+R.stanfordText).data(a.stanford_texts)).enter().append("g").attr("class",function(t){return R.stanfordText+(t.class?" "+t.class:"")})).append("text").attr("x",function(t){return a.axis_rotated?s(t,"y"):o(t,"x")}).attr("y",function(t){return a.axis_rotated?o(t,"x"):s(t,"y")}).style("opacity",0),n.stanfordTexts=i.merge(e),n.stanfordTexts.select("text").transition().duration(t).attr("x",function(t){return a.axis_rotated?s(t,"y"):o(t,"x")}).attr("y",function(t){return a.axis_rotated?o(t,"x"):s(t,"y")}).text(function(t){return t.content}).style("opacity",1),e.exit().transition().duration(t).style("opacity",0).remove(),(r=(e=r.select("."+R.stanfordRegions).selectAll("."+R.stanfordRegion).data(a.stanford_regions)).enter().append("g").attr("class",function(t){return R.stanfordRegion+(t.class?" "+t.class:"")})).append("polygon").attr("points",function(t){return t.points.map(function(t){return[a.axis_rotated?s(t,"y"):o(t,"x"),a.axis_rotated?o(t,"x"):s(t,"y")].join(",")}).join(" ")}).style("opacity",0),r.append("text").attr("x",function(t){return n.getCentroid(t.points).x}).attr("y",function(t){return n.getCentroid(t.points).y}).style("opacity",0),n.stanfordRegions=r.merge(e),n.stanfordRegions.select("polygon").transition().duration(t).attr("points",function(t){return t.points.map(function(t){return[a.axis_rotated?s(t,"y"):o(t,"x"),a.axis_rotated?o(t,"x"):s(t,"y")].join(",")}).join(" ")}).style("opacity",function(t){return t.opacity||.2}),n.stanfordRegions.select("text").transition().duration(t).attr("x",function(t){return a.axis_rotated?s(n.getCentroid(t.points),"y"):o(n.getCentroid(t.points),"x")}).attr("y",function(t){return a.axis_rotated?o(n.getCentroid(t.points),"x"):s(n.getCentroid(t.points),"y")}).text(function(t){var e,i;return t.text?(n.isStanfordGraphType()&&(e=(i=c(t.points)).value,i=i.percentage),t.text(e,i)):""}).attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",1),e.exit().transition().duration(t).style("opacity",0).remove()},s.prototype.initTooltip=function(){var t,e=this,i=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",R.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),i.tooltip_init_show){if(e.isTimeSeries()&&g(i.tooltip_init_x)){for(i.tooltip_init_x=e.parseDate(i.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-i.tooltip_init_x!=0;t++);i.tooltip_init_x=t}e.tooltip.html(i.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[i.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display","block")}},s.prototype.getTooltipSortFunction=function(){var t=this,e=t.config;if(0!==e.data_groups.length&&void 0===e.tooltip_order){var i=t.orderTargets(t.data.targets).map(function(t){return t.id});return(t.isOrderAsc()||t.isOrderDesc())&&(i=i.reverse()),function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}}var n=e.tooltip_order;void 0===n&&(n=e.data_order);function r(t){return t?t.value:null}if(g(n)&&"asc"===n.toLowerCase())return function(t,e){return r(t)-r(e)};if(g(n)&&"desc"===n.toLowerCase())return function(t,e){return r(e)-r(t)};if(l(n)){t=n;return t=void 0===e.tooltip_order?function(t,e){return n(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)}:t}return u(n)?function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}:void 0},s.prototype.getTooltipContent=function(t,e,i,n){var r,a,o,s,c,d,l=this,u=l.config,h=u.tooltip_format_title||e,g=u.tooltip_format_name||function(t){return t},p=(p=u.tooltip_format_value)||(l.isTargetNormalized(t.id)?function(t,e){return"".concat((100*e).toFixed(2),"%")}:i),i=this.getTooltipSortFunction();for(i&&t.sort(i),a=0;a<t.length;a++)if(t[a]&&(t[a].value||0===t[a].value)){if(l.isStanfordGraphType())r||(o=l.getStanfordTooltipTitle(t[a]),r="<table class='"+l.CLASS.tooltip+"'>"+o),d=l.getStanfordPointColor(t[a]),c=f(u.data_epochs),s=t[a].epochs;else if(r||(o=f(h?h(t[a].x,t[a].index):t[a].x),r="<table class='"+l.CLASS.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":"")),void 0!==(s=f(p(t[a].value,t[a].ratio,t[a].id,t[a].index,t)))){if(null===t[a].name)continue;c=f(g(t[a].name,t[a].ratio,t[a].id,t[a].index)),d=l.levelColor?l.levelColor(t[a].value):n(t[a].id)}void 0!==s&&(r+="<tr class='"+l.CLASS.tooltipName+"-"+l.getTargetSelectorSuffix(t[a].id)+"'>",r+="<td class='name'><span style='background-color:"+d+"'></span>"+c+"</td>",r+="<td class='value'>"+s+"</td>",r+="</tr>")}return r+"</table>"},s.prototype.tooltipPosition=function(t,e,i,n){var r,a,o,s,c=this,d=c.config,l=c.d3,u=c.hasArcType(),n=l.mouse(n);return u?(r=(c.width-(c.isLegendRight?c.getLegendWidth():0))/2+n[0],o=(c.hasType("gauge")?c.height:c.height/2)+n[1]+20):(u=c.getSvgLeft(!0),o=d.axis_rotated?(a=(r=u+n[0]+100)+e,s=c.currentWidth-c.getCurrentPaddingRight(),c.x(t[0].x)+20):(a=(r=u+c.getCurrentPaddingLeft(!0)+c.x(t[0].x)+20)+e,s=u+c.currentWidth-c.getCurrentPaddingRight(),n[1]+15),s<a&&(r-=a-s+20),o+i>c.currentHeight&&(o-=i+30)),{top:o=o<0?0:o,left:r}},s.prototype.showTooltip=function(t,e){var i=this,n=i.config,r=i.hasArcType(),a=t.filter(function(t){return t&&y(t.value)}),o=n.tooltip_position||s.prototype.tooltipPosition;0!==a.length&&n.tooltip_show&&(i.tooltip.html(n.tooltip_contents.call(i,t,i.axis.getXAxisTickFormat(),i.getYFormat(r),i.color)).style("display","block"),t=i.tooltip.property("offsetWidth"),r=i.tooltip.property("offsetHeight"),e=o.call(this,a,t,r,e),i.tooltip.style("top",e.top+"px").style("left",e.left+"px"))},s.prototype.hideTooltip=function(){this.tooltip.style("display","none")},s.prototype.setTargetType=function(t,e){var i=this,n=i.config;i.mapToTargetIds(t).forEach(function(t){i.withoutFadeIn[t]=e===n.data_types[t],n.data_types[t]=e}),t||(n.data_type=e)},s.prototype.hasType=function(e,t){var i=this.config.data_types,n=!1;return(t=t||this.data.targets)&&t.length?t.forEach(function(t){t=i[t.id];(t&&0<=t.indexOf(e)||!t&&"line"===e)&&(n=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===e&&(n=!0)}):n=this.config.data_type===e,n},s.prototype.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},s.prototype.isLineType=function(t){var e=this.config,t=g(t)?t:t.id;return!e.data_types[t]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[t])},s.prototype.isStepType=function(t){t=g(t)?t:t.id;return 0<=["step","area-step"].indexOf(this.config.data_types[t])},s.prototype.isSplineType=function(t){t=g(t)?t:t.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[t])},s.prototype.isAreaType=function(t){t=g(t)?t:t.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[t])},s.prototype.isBarType=function(t){t=g(t)?t:t.id;return"bar"===this.config.data_types[t]},s.prototype.isScatterType=function(t){t=g(t)?t:t.id;return"scatter"===this.config.data_types[t]},s.prototype.isStanfordType=function(t){t=g(t)?t:t.id;return"stanford"===this.config.data_types[t]},s.prototype.isPieType=function(t){t=g(t)?t:t.id;return"pie"===this.config.data_types[t]},s.prototype.isGaugeType=function(t){t=g(t)?t:t.id;return"gauge"===this.config.data_types[t]},s.prototype.isDonutType=function(t){t=g(t)?t:t.id;return"donut"===this.config.data_types[t]},s.prototype.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},s.prototype.lineData=function(t){return this.isLineType(t)?[t]:[]},s.prototype.arcData=function(t){return this.isArcType(t.data)?[t]:[]},s.prototype.barData=function(t){return this.isBarType(t)?t.values:[]},s.prototype.lineOrScatterOrStanfordData=function(t){return this.isLineType(t)||this.isScatterType(t)||this.isStanfordType(t)?t.values:[]},s.prototype.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},s.prototype.isSafari=function(){var t=window.navigator.userAgent;return 0<=t.indexOf("Safari")&&t.indexOf("Chrome")<0},s.prototype.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")},s.prototype.initZoom=function(){var e,i=this,n=i.d3,r=i.config;return i.zoom=n.zoom().on("start",function(){var t;"scroll"===r.zoom_type&&((t=n.event.sourceEvent)&&"brush"===t.type||(e=t,r.zoom_onzoomstart.call(i.api,t)))}).on("zoom",function(){var t;"scroll"===r.zoom_type&&((t=n.event.sourceEvent)&&"brush"===t.type||(i.redrawForZoom(),r.zoom_onzoom.call(i.api,i.x.orgDomain())))}).on("end",function(){var t;"scroll"===r.zoom_type&&((t=n.event.sourceEvent)&&"brush"===t.type||t&&e.clientX===t.clientX&&e.clientY===t.clientY||r.zoom_onzoomend.call(i.api,i.x.orgDomain()))}),i.zoom.updateDomain=function(){return n.event&&n.event.transform&&i.x.domain(n.event.transform.rescaleX(i.subX).domain()),this},i.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[i.width,i.height]]).extent([[0,0],[i.width,i.height]]),this},i.zoom.update=function(){return this.updateExtent().updateDomain()},i.zoom.updateExtent()},s.prototype.zoomTransform=function(t){t=[this.x(t[0]),this.x(t[1])];return this.d3.zoomIdentity.scale(this.width/(t[1]-t[0])).translate(-t[0],0)},s.prototype.initDragZoom=function(){var e,t,i=this,n=i.d3,r=i.config,a=i.context=i.svg,o=i.margin.left+20.5,s=i.margin.top+.5;"drag"===r.zoom_type&&r.zoom_enabled&&(e=function(t){return t&&t.map(function(t){return i.x.invert(t)})},t=i.dragZoomBrush=n.brushX().on("start",function(){i.api.unzoom(),i.svg.select("."+R.dragZoom).classed("disabled",!1),r.zoom_onzoomstart.call(i.api,n.event.sourceEvent)}).on("brush",function(){r.zoom_onzoom.call(i.api,e(n.event.selection))}).on("end",function(){var t;null!=n.event.selection&&(t=e(n.event.selection),r.zoom_disableDefaultBehavior||i.api.zoom(t),i.svg.select("."+R.dragZoom).classed("disabled",!0),r.zoom_onzoomend.call(i.api,t))}),a.append("g").classed(R.dragZoom,!0).attr("clip-path",i.clipPath).attr("transform","translate("+o+","+s+")").call(t))},s.prototype.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},s.prototype.redrawForZoom=function(){var t=this,e=t.d3,i=t.config,n=t.zoom,r=t.x;i.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length&&(n.update(),i.zoom_disableDefaultBehavior||(t.isCategorized()&&r.orgDomain()[0]===t.orgXDomain[0]&&r.domain([t.orgXDomain[0]-1e-10,r.orgDomain()[1]]),t.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),e.event.sourceEvent&&"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0)))},t});