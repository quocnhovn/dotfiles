!function(u){"use strict";function e(){throw new Error("Not implemented")}var t;u.windowsImpl=u.windowsImpl||function(){function e(){throw new Error("Not implemented")}var t={addListener:e,removeListener:e};return{onCreated:t,onRemoved:t,onUpdated:t,create:e,getLastFocused:e,forEachNative:e}},u.windows=function(n){function a(){}const o=Object.create(null);n.forEachNative((e,t)=>{o[t.windowId]=t});const t=u.utils.channels.newChannel(),r=u.utils.channels.newChannel();n.onCreated.addListener(e=>{o[e.windowId]=e,t.notify(e)}),n.onRemoved.addListener(e=>{var t=o[e];t&&(r.notify(t),delete o[e])});return{onCreated:t,onRemoved:r,create:function(e,t){n.create(e,t||a)},getLastFocused:function(t){n.getLastFocused(e=>{e=o[e];e&&t(e[0])})}}}(u.windowsImpl),u.tabsImpl=u.tabsImpl||{onCreated:t={addListener:e,removeListener:e},onRemoved:t,onUpdated:t,onActivated:t,create:e,remove:e,activate:e,reload:e,sendMessage:e,getAll:e,getActive:e,get:e},u.tabs=function(r){function n(){}const d=Object.create(null),t=u.utils.channels.newChannel(),a=u.utils.channels.newChannel(),o=u.utils.channels.newChannel(),i=u.utils.channels.newChannel();function c(e){d[e.tabId]||(d[e.tabId]=e,t.notify(e))}r.getAll(t=>{for(let e=0;e<t.length;e++){var n=t[e];d[n.tabId]=n}}),r.onCreated.addListener(c),r.onRemoved.addListener(e=>{var t=d[e];t&&(a.notify(t),delete d[e])}),r.onUpdated.addListener(e=>{const t=d[e.tabId];t&&(t.url=e.url,t.title=e.title,t.status=e.status,t.synthetic=!1,o.notify(t))}),r.onActivated.addListener(e=>{e=d[e];e&&i.notify(e)});var e=r["insertCssCode"],l=r["executeScriptCode"],s=r["executeScriptFile"];return{onCreated:t,onRemoved:a,onUpdated:o,onActivated:i,create:function(e,t){r.create(e,t||n)},remove:function(e,t){r.remove(e,t||n)},activate:function(e,t){r.activate(e,t||n)},reload:function(e,t){r.reload(e,t)},sendMessage:function(e,t,n,a){r.sendMessage(e,t,n,a)},getAll:function(e){r.getAll(n=>{const a=[];for(let t=0;t<n.length;t++){var o=n[t];let e=d[o.tabId];e||(d[o.tabId]=e=o),a.push(e)}e(a)})},forEach:function(o){r.getAll(n=>{for(let t=0;t<n.length;t++){var a=n[t];let e=d[a.tabId];e||(d[a.tabId]=e=a),o(e)}})},getActive:function(n){r.getActive(e=>{var t=d[e];t?n(t):r.get(e,e=>{c(e),n(e)})})},isIncognito:function(e){e=d[e];return e&&!0===e.incognito},updateUrl:(e,t)=>{r.updateUrl(e,t)},recordTabFrame:function(e,t,n,a){let o=d[e];o||0!==t||(o={tabId:e,url:n,status:"loading",synthetic:!0},c(o)),o&&(o.frames||(o.frames=Object.create(null)),o.frames[t]={url:n,domainName:a})},clearTabFrames:function(e){const t=d[e];t&&(t.frames=null)},getTabFrame:function(e,t){e=d[e];return e&&e.frames?e.frames[t||0]:null},isNewPopupTab:e=>{e=d[e];return!!e&&!(""!==e.url&&"about:blank"!==e.url)},updateTabMetadata:function(e,t){const n=d[e];if(n){n.metadata||(n.metadata=Object.create(null));for(const a in t)t.hasOwnProperty&&t.hasOwnProperty(a)&&(n.metadata[a]=t[a])}},getTabMetadata:function(e,t){e=d[e];return e&&e.metadata?e.metadata[t]:null},clearTabMetadata:function(e){const t=d[e];t&&(t.metadata=null)},insertCssCode:e,executeScriptCode:l,executeScriptFile:s}}(u.tabsImpl)}(adguard);