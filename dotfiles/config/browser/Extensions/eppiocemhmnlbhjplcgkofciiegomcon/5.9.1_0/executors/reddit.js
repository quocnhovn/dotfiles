(()=>{const W=null!==(q=sessionStorage.getItem("bis_data"))?JSON.parse(q):null;var q;const k=W?W.config.redditConfig:null,u=W?W.id+"_w":null;if(null!==k){function O(W){const q=function(W){const q=function(W){const q=new RegExp(k.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let u=W.match(q),O=null;u&&u.length&&(O=u[1]);return O}(W);return{videoId:q,url:W}}(W);!function(W){try{W.detectionTime=Date.now()/1e3|0;let q={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_VIDEO_DATA",from:u,to:u.substring(0,u.length-2),content:W};window.postMessage(q)}catch(W){}}(q)}function p(W){try{const q=JSON.parse(W.content);let k=[];for(let W of q){const q={};W.source&&W.source.hasOwnProperty("outboundUrl")&&(q.elementId=W.id,q.targetUrl=W.source.outboundUrl,k.push(q))}!function(W){try{let q={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_RIGHT_COLUMN_DATA",from:u,to:u.substring(0,u.length-2),content:W};window.postMessage(q)}catch(W){}}(k)}catch(W){}}let b=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],this.url=arguments[1],b.apply(this,arguments)};let s=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var W=this;let q=(u=W.url,new RegExp(k.VIDEO_TRAFFIC_DETECTOR.VIDEO_MPD_URL_CHECK).test(u));var u;let b,y=function(W){return new RegExp(k.RIGHT_COLUMN.PATH_WITH_AD_URL).test(W)}(W.url);if(!q&&!y)return s.apply(this,arguments);const E=function(){if(y&&4===W.readyState){p({url:W.url,content:""===W.responseType||"text"===W.responseType?W.responseText:""})}else y&&4!==W.readyState?b=setTimeout((()=>E.apply(this,arguments)),0):b&&clearTimeout(b)};return E(),O(W.url),s.apply(this,arguments)}}})();