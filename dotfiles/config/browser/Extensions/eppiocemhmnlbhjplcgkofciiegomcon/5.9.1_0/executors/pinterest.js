(()=>{const W=function(){let W=sessionStorage.getItem("bis_data");return null!==W?JSON.parse(W):null}(),q=W?W.config.pinterestConfig.VIDEO_TRAFFIC_CONFIG.PARSERS:[],k=W?W.config.pinterestConfig.VIDEO_TRAFFIC_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],u=W?`${W.id}_p`:null;const O=function(W,q){let u=null;for(let O of k){const k=O.NAME,b=O.PATH_NAME;u||(u={}),"detectionTime"!==k?"videoId"===k&&u.videoUrl?u[k]=s(u.videoUrl,q[b]):u[k]=p(W,q[b]):u[k]=Date.now()/1e3|0}return u},p=function(W,q){let k=W;for(let W of q)if(k[W])k=k[W];else if(!k[W]){k=null;break}return k},b=function(W,q){return function(){!function(W,q,k){try{let u={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:k,from:W,to:W.substring(0,W.length-2),content:q};window.postMessage(u)}catch(W){}}(u,W,q)}},s=function(W,q){if(!W)return"";const k=new RegExp(q);let u=W.match(k);return u&&u[1]?u[1]:""},y=function(W,q){let k=null;const u=Object.keys(W);for(let p of u){const u=W[p];q.CHECK_PROPERTIES.every((W=>u[W]))&&(k=O(u,q.PATHS_GET_PROPERTIES),k&&setTimeout(b(k,"PINTEREST_VIDEO_DATA"),0))}},E={script:function(W){const q=Array.from(document.querySelectorAll(W.QUERY));if(q.length)for(let k of q)try{if(!k.text||k.text&&"{"!==k.text[0])return;k.setAttribute("data-bis-activated","");let q=JSON.parse(k.text),u={};for(let k of W.PATH_TO_PINS){let W=!1;u=q;for(let q of k){const O=k.indexOf(q);if(!u[q])break;u=u[q],O===k.length-1&&(W=!0)}if(W)break}setTimeout((()=>y(u,W)),0)}catch(W){}},XMLHttpRequest:function(W){let q=XMLHttpRequest.prototype.open,k=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const W=arguments[0].toLowerCase(),q=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[W]=q,k.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],q.apply(this,arguments)};let u=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let q=this.onreadystatechange;return this.onreadystatechange=function(){const k=new RegExp(W.QUERY);if(4===this.readyState&&k.test(this.responseURL)){let q=this.response.length&&"{"===this.response[0]?JSON.parse(this.response):this.response,k=[];for(let u of W.PATH_TO_PINS){let W=!1;k=q;for(let q of u){const O=u.indexOf(q);if(!k[q])break;k=k[q],O===u.length-1&&(W=!0)}if(W)break}!function(W,q){let k=null;if(W.length)for(let u of W)q.CHECK_PROPERTIES.every((W=>u[W]))&&(k=O(u,q.PATHS_GET_PROPERTIES),k&&setTimeout(b(k,"PINTEREST_VIDEO_DATA"),0))}(k,W)}if(q)return q.apply(this,arguments)},u.apply(this,arguments)}}};for(let W of q){if(!W.USE)continue;if("XMLHttpRequest"===W.TYPE){E[W.TYPE](W);continue}let q=W?.MAX_REPEATS_ACTIVATE||5,k=setInterval((()=>{q--,E[W.TYPE](W),q<=0&&clearInterval(k)}),1e3)}})();