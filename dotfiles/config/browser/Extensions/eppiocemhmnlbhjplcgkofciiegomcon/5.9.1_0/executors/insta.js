(()=>{const W=(q=sessionStorage.getItem("bis_data"),k={adOpt:!!document.querySelector("script[ad-opt-on]"),config:null},null!==q&&(k.config=JSON.parse(q)),k);var q,k;const u=W&&W.config?W.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PARSERS:[],O=W&&W.config?W.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],p=W&&W.config?`${W.config.id}_i`:null;!(!W||!W.adOpt)&&W.adOpt;let b=0;const s=function(W,q){return function(){!function(W,q,k){try{let u={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:k,from:W,to:W.substring(0,W.length-2),content:q};window.postMessage(u)}catch(W){}}(p,W,q)}},y=function(W,q){let k=null,u=null;for(let p of O){const O=p.NAME,b=p.PATH_NAME,s=p.IS_NECESSARY,y=p.DEFAULT_VALUE;if(k||(k={}),"detectionTime"!==O){if(q[b])if("showFullText"!==O){if(k[O]=E(W,q[b],y),s&&!k[O])return null}else u=q[b].some((q=>!!E(W,q,y)))}else k[O]=Date.now()/1e3|0}return k.headlineText?.length&&(k.fullText=k.headlineText+"\n"+k.fullText),delete k.headlineText,!1===u&&(k.fullText=""),k},E=function(W,q,k){let u=W;for(let[W,O]of Object.entries(q)){if("*"===O&&u.length){const k=q.slice(+W+1),O=k.length-1;return u.map((W=>{let q=W;for(let[W,u]of Object.entries(k))if(q[u]&&(q=q[u]),O===+W&&"string"==typeof q)return q}))}if(u[O])u=u[O];else if(!u[O]){u=k;break}}return u},R=function(W,q){if(!W||!W.length)return;let k=null;for(let u of W){let W="";try{if(h(u,q.PATH_CHECK_PROPERTIES))k=y(u,q.PATHS_GET_PROPERTIES),W=k.videoSrc?"INSTAGRAM_VIDEO_DATA":"INSTAGRAM_CAROUSEL_SLIDES_SOURCES";else{if(!q.RULES_TO_GET_FULL_TEXT||!h(u,q.RULES_TO_GET_FULL_TEXT.PATH_CHECK_PROPERTIES))continue;k=y(u,q.RULES_TO_GET_FULL_TEXT.PATHS_GET_PROPERTIES),W="INSTAGRAM_FULL_TEXT_DATA"}k&&setTimeout(s(k,W),0)}catch(W){}}},i=function(W,q){if(!W||!W.length)return;let k=[];for(let u of W){if(!h(u,q.PATH_CHECK_PROPERTIES))continue;let W=y(u,q.PATHS_GET_PROPERTIES);W&&(null===W.videoVersions&&delete W.videoVersions,k.push(W))}k.length&&setTimeout(s(k,"INSTAGRAM_STORY_DATA"),0)},h=function(W,q){let k=!1;for(let u of q){let q=W,O=u.length-1;for(let[W,p]of Object.entries(u))if(p in q&&q[p]){if(q=q[p],O===+W){k=!0;break}}else{if("*"===p&&q.length&&q.length>1&&!k&&O===+W){k=!0;break}k=!1}if(k)break}return k},Q={XMLHttpRequest:function(W){let q=XMLHttpRequest.prototype.open,k=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const W=arguments[0].toLowerCase(),q=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[W]=q,k.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],q.apply(this,arguments)};let u=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let q=this.onreadystatechange;return this.onreadystatechange=function(){const k=function(){const q=W.AD_TYPES_WAYS_TO_PROPERTIES;let k=W.QUERY;for(let W=0;W<q.length;W++){const u="QUERY_AD_TYPE_"+W,O=q[W];k=k.replace(u,O.QUERY_URL_PATH)}return new RegExp(k)}(),u=W.MATCH_HEADERS,O=this.requestHeaders?Object.keys(this.requestHeaders):null;let p=!1;if(O&&(p=O.some((W=>{if(u[W]&&u[W].includes(this.requestHeaders[W]))return!0}))),4===this.readyState&&k.test(this.responseURL))for(let s of W.AD_TYPES_WAYS_TO_PROPERTIES){const y=this.responseURL.includes(s.QUERY_URL_PATH);if(p||y){let E=this.response.length?JSON.parse(this.response):this.response;function b(W,q){let k=q;for(let[q,u]of Object.entries(W))k&&k[u]&&(k=k[u]),"*"===u&&k.length&&(k=k.map((k=>b(W.slice(+q+1),k))));return k}let h=b(s.PATH_TO_POSTS,E);"story"===s.AD_TYPE&&this.responseURL.includes(s.QUERY_URL_PATH)&&h.length?h.forEach((W=>{W&&i(W,s)})):"feed"===s.AD_TYPE&&R(h,s)}}if(q)return q.apply(this,arguments)},u.apply(this,arguments)}},script:function(W){function q(){let q=Array.from(document.querySelectorAll("script"));const k=new RegExp(W.REGEXP_FILTER);let u=q.filter((W=>W.innerHTML.search(k)>-1));return u.length?u[0]:null}if(b++,"complete"!==document.readyState&&b<15){let q=null;return void(q=setTimeout((()=>{q&&clearTimeout(q),Q.script(W)}),200))}let k=function(){let W=q();return W?JSON.parse(W.innerHTML):null}();let u=function W(q,k){let u=k;for(let[k,O]of Object.entries(q))u&&u[O]&&(u=u[O]),"*"===O&&u.length&&(u=u.map((u=>W(q.slice(+k+1),u))));return u}(W.PATH_TO_POSTS,k);R(u,W)}};for(let W of u)W.USE&&Q[W.TYPE](W)})();